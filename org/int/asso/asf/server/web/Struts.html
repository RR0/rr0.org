<!--#include virtual="/header-start.html" -->
<title>Struts</title>
<meta name="url" content="http://struts.apache.org">
<!--#include virtual="/header-end.html" -->
<h2><a href="/tech/info/soft/proj/besoin/index.html">Besoin</a></h2>

<p>Fournir un <a href="/tech/info/soft/Framework.html">framework</a> <a href="/tech/info/soft/proj/design/arch/web/index.html">Web</a>
  <a href="/tech/info/soft/prog/oo/java/index.html">Java</a> <a href="/tech/info/OpenSource.html">Open Source</a> prenant
  en charge :</p>
<ul>
  <li>la séparation des <a href="/tech/info/soft/IHM.html">IHM</a> et des processus métiers</li>
  <li>le contrôle de saisie des formulaires</li>
  <li>diverses optimisations (<a href="/tech/info/soft/prog/oo/java/Pooling.html"><em>pooling</em></a>)</li>
</ul>
<h2><a href="/tech/info/soft/proj/Analyse.html">Analyse</a></h2>
<p>Struts externalise les interactions entre requête et actions ainsi que
  le contrôle de validité des formulaires. </p>
<h2><a href="/tech/info/soft/proj/design/index.html">Conception</a></h2>

<p>Struts applique le <a href="/tech/info/soft/proj/design/pattern/index.html">DP</a> <a href="/tech/info/soft/prog/oo/java/MVC.html">MVC</a> qui
  répartit les responsabilités entre :</p>

<ul>
  <li><b>(M)odèle </b>: les <i>form beans</i> représentant les données
    saisies dans des formulaires. D'un point de vue global, les <i>form beans 
    </i>ne représentent qu'un <em>modèle de présentation</em>,
    c'est-à-dire un moyen de récolter les informations saisies par
    l'utilisateur mais qui ne correspond pas forcément au véritable
    modèle, généralement situé dans des JavaBeans
    ou des <a href="/tech/info/soft/prog/oo/java/EJB.html">EJB</a> métier annexes.</li>
  <li><b>(V)ue </b>: les <a href="/tech/info/soft/prog/oo/java/JSP.html">JSP</a>, utilisant des balises  Struts.</li>
  <li><b>(C)ontrôleur</b> MVC2, combinaison de :
    <ul>
      <li>une <a href="/tech/info/soft/prog/oo/java/Servlets.html">servlet</a> unique</li>
      <li> des <strong>actions</strong> déclenchées par cette servlet
        (<a href="/tech/info/soft/proj/design/pattern/index.html">DP</a> Commande/Action).</li>
    </ul>
  </li>
</ul>
<p>Lors de la réception d'une requête Web, la <a href="/tech/info/soft/prog/oo/java/Servlets.html">servlet</a>
  de Struts examine l'<a href="/tech/info/soft/reseau/internet/URL.html">URL</a> demandé et lui cherche une
  correspondance (<em>mapping</em>) dans les classes d'actions spécifiées par le développeur. Une instance de cette classe d'action est récupérée
  (d'un <a href="/tech/info/soft/prog/oo/java/Pooling.html"><em>pool</em></a>) et exécutée. </p>
<p>Cette exécution effectue divers appels métiers, prépare
  généralement un formulaire (<em>form bean</em>) nécessaire
  à la vue. et retourne un code symbolique indiquant le résultat
  de son action. La servlet reçoit ce code et lui troue une correspondance
  (<em>mapping</em>) de vue (<a href="/tech/info/soft/prog/oo/java/JSP.html">JSP</a>) à afficher.</p>
<p>La <a href="/tech/info/soft/prog/oo/java/JSP.html">JSP</a> importe les balises Struts et les utilise pour
  insérer simplement des données du formulaire (<em>form bean</em>)
  dans la page retournée à l'utilisateur.</p>
<h2><a href="/tech/info/soft/proj/impl/index.html">Implémentation</a></h2>
<p>Les formulaires sont des <strong>JavaBeans</strong> héritant de <code>org.apache.struts.action.ActionForm</code>.
  Etant gérés dans un <a href="/tech/info/soft/prog/oo/java/Pooling.html">pool</a>, ils doivent
  avoir un constructeur par défaut.</p>
<p>Les vues sont des <a href="/tech/info/soft/prog/oo/java/JSP.html"><strong>JSP</strong></a> utilisant des
   TagLibs Struts telles que :</p>
<ul>
  <li> <code>struts-html</code> pour la construction de code <a href="/tech/info/soft/proj/design/arch/web/HTML.html">HTML</a> (y
    compris formulaires depuis Struts 1.1)</li>
  <li><code>struts-bean</code> pour l'accès aux propriétés
    de <a href="/tech/info/soft/prog/oo/java/JavaBeans.html">JavaBeans</a> (modèles) </li>
  <li><code>struts-nested</code> pour la version de ces TagLib intégrant
    la notion de hiérarchie</li>
  <li>etc.</li>
</ul>
<p>Tout formulaire se :</p>
<ol>
  <li> <strong>réinitialise</strong> via sa méthode <code>reset()</code></li>
  <li><strong>remplit</strong> à partir d'une requête (soumission d'un formulaire HTML) via
    sa méthode <code>populate()</code></li>
  <li><strong>valide</strong>    (accepte ou rejete les données qu'il contient)
    via sa méthode <code>validate()</code>.</li>
</ol>
<h3>Contrôleur</h3>
<p>Le contrôleur<strong> </strong>est constitué de
  :</p>
<ul>
  <li>une <a href="/tech/info/soft/prog/oo/java/Servlets.html"><strong>servlet</strong></a> unique : <code>org.apache.struts.action.ActionServlet</code>
    fournie par Struts ou dérivée</li>
  <li>des <strong>actions </strong>à implémenter, dérivant
    de <code>org.apache.struts.action.Action</code>. En tant que commande, une
    action n'a qu'à redéfinir le code de sa méthode <code>execute()</code> pour
    indiquer ce qu'elle fait lorsqu'on l'invoque. Cette méthode retourne un <code>ActionForward</code>    représentant
    le résultat de l'exécution. C'est en fonction de ce résultat que la prochaine
    vue à afficher (ou autre action à exécuter) est choisie d'après la configuration
    Struts. Cependant, plusieurs autres actions plus spécialisées sont disponibles
    :
    <ul>
      <li><code>DispachAction</code>, qui exécute telle ou telle méthode (pas
        uniquement <code>execute()</code>) en fonction d'un <strong>paramètre</strong> de la requête soumise.
        Ceci est pratique lorsque l'action varie fortement en fonction des paramètres
        (création, suppression, mise à jour par exemple).
        <ul>
          <li><code>LookupDispatchAction</code> qui considère le paramètre d'action
            comme provenant directement des boutons de l'interface utilisateur.</li>
        </ul>
      </li>
      <li><code>ForwardAction</code>, qui n'effectue rien d'autre que de rediriger
        vers une destination (une vue typiquement). Ceci évite d'avoir à écrire
        des classes d'action aussi simples.</li>
    </ul>
  </li>
</ul>
<h3>Configuration</h3>
<p>Une <strong>WebApp </strong>utilisant Struts ajoute sous son répertoire <code>WEB-INF</code> un
  (ou plusieurs) fichier(s) de configuration Struts définissant :</p>
<ul>
  <li>les sources de données éventuelles. </li>
  <li>les formulaires (<i>form-beans</i>)</li>
  <li>les redirections globales (<i>global forwards</i>) </li>
  <li>les correspondances (<i>action-mappings</i>) entre requêtes, actions
    à exécuter et formulaires utilisés</li>
  <li>les ressources d'internationalisation</li>
</ul>
<blockquote>
  <table border=1 cellspacing=0 cellpadding=5>
  <thead>
    <tr>
      <td colspan=2 rowspan=2>Struts</td>
      <th valign=top> Version</th>
      <th colspan="2"> 1</th>
      <th rowspan=3> Commentaire</th>
    </tr>
    <tr>
      <th valign=top> Release</th>
      <th>0</th>
      <th>1</th>
    </tr>
    <tr>
      <th> Module</th>
      <th> Technologie</th>
      <th valign=top>FixPack</th>
      <th>1 </th>
      <th>  </th>
    </tr>
    <tr>
      <th rowspan="4" valign=top>Java</th>
      <th colspan="2" valign=top><a href="/tech/info/soft/prog/oo/java/J2SE.html">J2SE</a></th>
      <td colspan="2" class="oui">1.2</td>
      <td> </td>
    </tr>
    <tr>
      <th colspan="2" valign=top><a href="/tech/info/soft/prog/oo/java/JDBC.html">JDBC</a></th>
      <td colspan="2" class="oui">2.0</td>
      <td>Optionnel</td>
    </tr>
    <tr>
      <th colspan="2" valign=top><a href="/tech/info/soft/prog/oo/java/Servlets.html">Servlet</a></th>
      <td colspan="2" class="oui">2.2</td>
      <td> </td>
    </tr>
    <tr>
      <th colspan="2" valign=top><a href="/tech/info/soft/prog/oo/java/JSP.html">JSP</a></th>
      <td colspan="2" class="oui">1.1</td>
      <td> </td>
    </tr>
  </thead>
  <tr>
    <th rowspan=9 valign=top><a href="/tech/info/soft/prog/oo/java/Commons.html">Commons</a></th>
    <th colspan="2" valign=top>DBCP</th>
    <td><code>GenericDataSource</code> (non JNDI)</td>
    <td class="oui">Oui</td>
    <td><i>DataBase Connection Pool</i></td>
  </tr>
  <tr>
    <th colspan="2" valign=top>File Upload</th>
    <td> </td>
    <td class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th colspan="2" valign=top>Logging</th>
    <td> </td>
    <td class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th colspan="2" valign=top><a href="http://jakarta.apache.org/commons/pool.html">Pool</a></th>
    <td> </td>
    <td class="oui">Oui</td>
    <td><a href="/tech/info/soft/prog/oo/java/Pooling.html">Pooling</a> d'objets</td>
  </tr>
  <tr>
    <th colspan="2" valign=top>Services</th>
    <td> </td>
    <td class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th colspan="2" valign=top>Validator</th>
    <td>Contribution</td>
    <td class="oui">Oui</td>
    <td>Validation de formulaires via expressions régulières, code
      JavaScript généré</td>
  </tr>
  <tr>
    <th colspan="2" valign=top><a href="http://jakarta.apache.org/commons/beanutils.html">BeanUtils</a></th>
    <td><code>org.apache. struts.utils</code></td>
    <td class="oui">Oui</td>
    <td>Introspection via des scriplets</td>
  </tr>
  <tr>
    <th colspan="2" valign=top>Collections</th>
    <td><code>org.apache. struts.utils</code></td>
    <td class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th colspan="2" valign=top><a href="http://jakarta.apache.org/commons/digester/">Digester</a></th>
    <td><code>org.apache. struts.digester</code></td>
    <td class="oui">Oui</td>
    <td><a href="/tech/info/soft/data/doc/xml/XML.html">XML</a>Mapping XML vers Java, souvent utilisé pour
      la lecture de fichiers de configuration.</td>
  </tr>
  <tr>
    <th valign=top><a href="/tech/info/soft/data/doc/xml/XML.html">XML</a></th>
    <th colspan="2" valign=top><a href="/tech/info/soft/prog/oo/java/JAXP.html">JAXP</a></th>
    <td class="oui">1.0</td>
    <td class="oui">1.1</td>
    <td> </td>
  </tr>
  <tr>
    <th valign=top>DTD</th>
    <th colspan="2" valign=top>Message-Resources</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td>Internationalisation</td>
  </tr>
  <tr>
    <th valign=top>Erreurs</th>
    <th colspan="2" valign=top>Declarative</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th rowspan="2" valign=top>Formulaires</th>
    <th colspan="2" valign=top>ActionForm</th>
    <td colspan="2" class="oui">Oui</td>
    <td>Formulaires implémentés (classes)</td>
  </tr>
  <tr>
    <th colspan="2" valign=top>DynaBeans</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td>Formulaires déclaratifs (XML)</td>
  </tr>
  <tr>
    <th rowspan="4" valign=top>Actions</th>
    <th colspan="2" valign=top>Action</th>
    <td colspan="2" class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th rowspan="2" valign=top>DispachAction</th>
    <th valign=top> </th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th valign=top>LookupDispatchAction</th>
    <td class="non"> </td>
    <td class="oui"> </td>
    <td> </td>
  </tr>
  <tr>
    <th colspan="2" valign=top>ForwardAction</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th valign=top rowspan="16">TagLib</th>
    <th colspan="2" valign=top><a href="http://jakarta.apache.org/struts/userGuide/dev_tiles.html">Tiles</a></th>
    <td> </td>
    <td> </td>
    <td>Framework d'assemblage de <a href="/tech/info/soft/prog/oo/java/JSP.html">JSP</a></td>
  </tr>
  <tr>
    <th valign=top rowspan="9"><a href="http://jakarta.apache.org/struts/userGuide/dev_html.html">Html</a></th>
    <th valign=top>options</th>
    <td colspan="2" class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th valign=top>option</th>
    <td colspan="2" class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th valign=top>optionsCollection</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td> Remplir des options HTML à partir d'une collection.</td>
  </tr>
  <tr>
    <th valign=top>message</th>
    <td colspan="2" class="oui">Oui</td>
    <td> Insertion d'un libellé.</td>
  </tr>
  <tr>
    <th valign=top>messages</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td> Itération d'une collection de messages dans la classe ActionMessages.</td>
  </tr>
  <tr>
    <th valign=top> ActionForm</th>
    <td colspan="2" class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th valign=top>image</th>
    <td colspan="2" class="oui">Oui</td>
    <td>  </td>
  </tr>
  <tr>
    <th valign=top>img</th>
    <td colspan="2" class="oui">Oui</td>
    <td>  </td>
  </tr>
  <tr>
    <th valign=top> SubmitTag, SelectTag, LinkTag.java, CheckboxTag, ButtonTag,
      ImageTag, RadioTag, and TextArea tags</th>
    <td colspan="2" class="oui">Oui</td>
    <td>  </td>
  </tr>
  <tr>
    <th valign=top><a href="http://jakarta.apache.org/struts/userGuide/dev_logic.html">Logic</a></th>
    <th valign=top>empty/notEmpty</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th colspan="2" valign=top><a href="http://jakarta.apache.org/struts/userGuide/dev_nested.html">Nested</a></th>
    <td> </td>
    <td> </td>
    <td>Taglib</td>
  </tr>
  <tr>
    <th valign=top rowspan="4"><a href="http://jakarta.apache.org/struts/userGuide/dev_bean.html">Beans</a></th>
    <th valign=top>write</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td>  </td>
  </tr>
  <tr>
    <th valign=top>cookie</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td>  </td>
  </tr>
  <tr>
    <th valign=top>header</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td>  </td>
  </tr>
  <tr>
    <th valign=top>parameter</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td>  </td>
  </tr>
  <tr>
    <th valign=top rowspan="5">Util</th>
    <th colspan="2" valign=top> LocalStrings</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td> </td>
  </tr>
  <tr>
    <th colspan="2" valign=top>LabelValueBean</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td>Collection clés/valeurs utilisables pour la baslise &lt;html:options&gt; ou
      ailleurs.</td>
  </tr>
  <tr>
    <th colspan="2" valign=top>MessageResources</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td>Escape any single quote characters that are included in the specified
      message string.</td>
  </tr>
  <tr>
    <th colspan="2" valign=top>computeParameters</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td>Allow a transaction token to be the only parameter in .</td>
  </tr>
  <tr>
    <th colspan="2" valign=top>RequestUtils</th>
    <td class="non">Non</td>
    <td class="oui">Oui</td>
    <td> Change to encode ampersands when building a query string.</td>
  </tr>
</table>
</blockquote>
<h2>Notes</h2>
<ul>

  <li> les formulaires 

    <ul>

      <li>peuvent stocker des données relatives à une ou plusieurs

        pages</li>

    </ul>

  </li>

  <li>Les actions 

    <ul>

      <li> appliquent le <a href="/tech/info/soft/proj/design/pattern/index.html">DP</a> Commande.</li>
      <li>sont le prolongement du code de la servlet contrôleur, ce qui
        implique que : 
        <ul>
          <li>elles ne sont pas <i><a href="/tech/info/soft/prog/oo/java/Thread.html">thread</a>-safe</i></li>
          <li>elles adaptent les requête <a href="/tech/info/soft/proj/design/arch/web/HTTP.html">HTTP</a> à
            la véritable logique métier indépendante du
            Web  (<a href="/tech/info/soft/proj/design/pattern/index.html">DP</a> adaptateur)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>les sources de données Struts
    <ul>
      <li>(obsolète) une (<code>GenericDataSource</code>) est livrée
        pour les infrastructures qui en manquent (<a href="Tomcat.html">Tomcat</a> 
        par exemple).</li>
      <li>ne sont pas recommandées à moins de ne disposez d'aucun
        pool de connexion (dans <a href="Tomcat.html">Tomcat</a> par exemple). 
        En effet elles ne sont pas performantes et ne sont accessibles qu'à
        partir du <code>ServletContext</code> de la WebApp. Mieux vaut leurs préferer
        les sources de données fournies par le serveur applicatif (<a href="../../../../../us/company/ibm/product/soft/server/app/WAS.html">WAS</a>,
        <a href="/tech/info/soft/prog/oo/java/WLS.html">WLS</a>), qui ont l'avantage d'être plus performantes
        et accessibles via le service de nommage (API <a href="/tech/info/soft/prog/oo/java/JNDI.html">JNDI</a>).
        Des DataSource <a href="/tech/info/soft/prog/oo/java/JNDI.html">JNDI</a> existent depuis Struts 1.1</li>
    </ul>
  </li>
  <li>Le travail d'initialisation/de terminaison peut être réalisé via un plugin
    Struts plutôt que par une servlet de contrôle spécialisant celle de Struts.</li>
</ul>

<h2>Exemples</h2>
<ul>
  <li>Actions 
    <ul>
      <li><a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/kicsa/Java/org/orange/kicsa/presentation/control/skill/">Gestion 
        des compétences KiCsa</a></li>
    </ul>
  </li>
  <li>Configuration Struts 
    <ul>
      <li><a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/kicsa/WebAoo/WEB-INF/struts-config.xml?rev=1.1.1.1&content-type=text/vnd.viewcvs-markup">Configuration 
        Struts de KiCsa</a></li>
    </ul>
  </li>
  <li>JSP Struts
    <ul>
      <li><a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/kicsa/WebAoo/">JSP 
        de la WebApp KiCsa</a></li>
    </ul>
  </li>
</ul>
<h2>Limitations</h2>

<ul>
  <li>Pas de vérification de la provenance lors de l'exécution d'une
    action (pas d'automate en somme).</li>
<li>Commence à être relativement obsolète, notamment à cause de sa contraire de compatibilité ascendante. Voir son successeur <a href="/tech/info/soft/prog/oo/java/Shale.html">Shale</a>. </li>
</ul>

<h2>Voir</h2>
<ul>
  <li>Struts 
    <ul>
      <li><a href="http://apache.i-connexion.net/dist/jakarta/struts/binaries">Téléchargement</a></li>
      <li><a href="http://jakarta.apache.org/struts/userGuide">Guide de l'utilisateur</a></li>
      <li><a href="http://jakarta.apache.org/struts/api">API</a></li>
      <li><a href="http://rollerjm.free.fr/pro/Struts.html">Validateur </a> 
        <ul>
          <li><a href="http://home.earthlink.net/%7Edwinterfeldt">Struts validator</a> 
            par David winterfeldt</li>
        </ul>
      </li>
      <li>Didacticiel
        <ul>
          <li><a href="http://www.reumann.net/do/struts/main">Struttin' with
              Struts</a> de <a href="mailto:struts@reumann.net">Rick Reumann</a></li>
          <li><a href="http://www.onjava.com/pub/a/onjava/2002/10/30/jakarta.html?page=1">Jakarta
              Struts : Seven lessons from the trenches</a> de <a href="http://www.onjava.com/pub/au/988">Chuck
              Cavaness</a>            (onJava.com)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Alternatives/compléments
<ul>
      <li><a href="/tech/info/soft/prog/oo/java/JSTL.html">JSTL</a></li>
      <li><a href="/tech/info/soft/prog/oo/java/JSF.html">JSF</a></li>
      <li><a href="http://tapestry.sourceforge.net">Tapestry</a></li>
  </ul>
</li>
  <li>Développement
    <ul>
      <li>Javanovic <a href="http://www.javanovic.com/products/karapan-sapi.html">Karapan 
        Sapi Struts Generator</a></li>
    </ul>
  </li>
  <li>Test 
    <ul>
      <li><a href="http://strutstestcase.sourceforge.net/">Struts TestCase for 
        JUnit</a> - Test des actions Struts hors ou à l'intérieur
        d'un conteneur Web.</li>
    </ul>
  </li>
  <li>Husted - <a href="http://www.husted.com/struts/">More about Struts</a></li>
  <li><a href="http://rollerjm.free.fr/pro/Struts.html">Struts controller UML 
    diagram</a> par Jean-Michel Garnier</li>
  <li>2002 AJUG Meeting - <a href="http://www.ajug.org/meetings/download/ajug.pdf">Struts: 
    MVC framework for JSP</a></li>
  <li>2002 AJUG Meeting - <a href="http://www.ajug.org/meetings/download/struts.pdf">Java 
    Struts 1.1: Ready for prime time</a></li>
</ul>
<!--#include virtual="/footer.html" -->
