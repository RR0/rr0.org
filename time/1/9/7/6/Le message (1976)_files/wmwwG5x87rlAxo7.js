!function n(o,s,r){function a(t,e){if(!s[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(d)return d(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}i=s[t]={exports:{}},o[t][0].call(i.exports,function(e){return a(o[t][1][e]||e)},i,i.exports,n,o,s,r)}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<r.length;e++)a(r[e]);return a}({1:[function(e,t,i){function n(e){document.location.hash.match("debug=1")&&void 0!==e&&console.error(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){if("consoleLog"in window&&"generic"in window&&"ad_utils"in window&&"custom"in window&&"monitoring"in window.generic&&"document_is_ready"in window.generic)try{e.call(this)}catch(e){void 0!==t&&(e.message=t+" "+e.message),window.ueLogError&&(e.attribution=o,e.logLevel="ERROR",window.ueLogError(e)),n(e.message)}else n(t)};var o=i.UE_LOG_ERROR_ATTRIBUTION="IMDbAdvertisingStaticMedia-doWithAds"},{}],2:[function(e,t,i){var n,e=e("./doWithAds"),o=(e=e)&&e.__esModule?e:{default:e};function s(){window.jQuery&&(clearTimeout(n),window.jQuery(function(){window.generic.document_is_ready()}),window.generic.monitoring.stop_timing("page_load","",!0),window.generic.monitoring.all_events_started())}n=setInterval(function(){return(0,o.default)(s,"No monitoring or document_is_ready object in generic")},50)},{"./doWithAds":1}],3:[function(e,t,i){t.exports="html{box-sizing:border-box}:after,:before,html *{box-sizing:inherit}body{margin:0}.ad,.app{position:relative;display:block;width:100%;height:100%}.ad{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ad *,.ad :after,.ad :before{-webkit-user-select:inherit;-moz-user-select:inherit;-ms-user-select:inherit;user-select:inherit}.ad,.ad *{z-index:1}.ad>div{position:absolute;width:100%;height:100%;overflow:hidden}graphic>.graphic{opacity:inherit}.graphic>img{position:absolute;top:0;left:0}.graphic>.ad-hover,.graphic>.hover{opacity:0;transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;-webkit-transition:opacity .15s linear}.app:hover .graphic>.ad-hover,.graphic:hover>.hover{opacity:1}.countdown-number-text{text-align:center}.slider-rotator>.slide-offset{position:relative}.slider-rotator>.slide-offset>.slide{position:relative;display:inline-block;width:100%;height:100%;overflow:hidden}.th-gallery-parent .th-gallery-arrow{cursor:pointer}.th-gallery-parent>.th-gallery-image{opacity:0;transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;-webkit-transition:opacity .15s linear}.th-gallery-parent>.active{opacity:1}.minimal-video>video{width:100%;height:auto}"},{}],4:[function(e,t,i){t.exports=function(e){var t,n=window.getClickTracker;return parent.ad_design&&parent.ad_design.Uatu&&parent.getClickTracker?(t=parent.ad_design.Uatu,window.Tarnhelm.log("Tarnhelm is using its legacyTrackingConsumer. This behavior is deprecated, and should only happen if your creative template is out of date."),(t=t()).addConsumerCallback(function(e,t,i){e&&((new Image).src=(n||parent.getClickTracker)(e))}),t.addToTrackingMap(e),t.trackingConsumer):(window.Tarnhelm.log("couldn't find Uatu or getClickTracker. This means NOTHING IS BEING TRACKED."),function(){})}},{}],5:[function(e,t,i){e("riot");function n(e,t){this.eventEmitter=e,this.actionRequirements=t}n.prototype={off:function(e){this.eventEmitter.off(e)},on:function(e,t){this.eventEmitter.on(e,t)},one:function(e,t){this.eventEmitter.one(e,t)},trigger:function(e){if(e.requirements&&!this.canFire(e))return!1;var t,i;e.isGlobal?window.Tarnhelm.triggerGlobalAction(e):null!=e.adName?window.Tarnhelm.triggerTandemAction(e):(t=Math.abs(window.parseInt(e.delay,10)||0))?(i=this,window.setTimeout(function(){i.eventEmitter.trigger(e.actionName,e)},t)):this.eventEmitter.trigger(e.actionName,e)},triggerMany:function(e){for(var t=0;t<e.length;t++)this.trigger(e[t])},canFire:function(e){return!!this.actionRequirements.areMet(e)||(window.Tarnhelm.log("An action's requirements were not met ::",e.requirements,e),!1)}},t.exports=n},{riot:120}],6:[function(e,t,i){var r=e("../renderer/stores/ad.js"),a=e("./actionHandler.js"),d=e("./eventEmitter.js"),l=e("./externalTriggerHandler.js"),u=e("./linkHandler.js"),c=e("./scrollActionHandler"),h=e("./externalFunctionHandler.js"),p=e("./logHandler.js"),m=e("./videoActionHandler.js"),f=e("./backwardsCompatibilityProcessor.js"),g=e("./checkAdParentCompliance.js"),v=e("./rectProcessor.js"),_=(e("../renderer/stores/retrievers/scale.js"),e("./events/adEvent.js"));t.exports=function(e){var i={};if(e.adData=f.process(e.adData),e.adData.rect&&delete e.adData.rect,i.id=e.adData.id,i.name=e.adData.name,i.domNode=e.domNode,i.containerFrame=e.containerFrame,i.initTime=(new Date).getTime(),i.trackingConsumer="function"==typeof e.trackingConsumer?e.trackingConsumer:null,i.requirementsTester=window.Tarnhelm.getRequirementsTester(),i.actionHandler=new a(new d,i.requirementsTester),e.eventSinks)for(var t=0;t<e.eventSinks.length;t++)e.eventSinks[t].registerAdActionHandler(i.name,i.actionHandler);i.actionHandler.on("resize-ad-container",function(e){e&&e.data&&e.data.rect&&o(e.data.rect)});var n={adHeight:i.domNode.offsetHeight,adWidth:i.domNode.offsetWidth};function o(e){i.containerFrame&&(e=v.process(e),v.setElRectStyle(i.containerFrame,e))}function s(){var e,t;i.adStore.requiresAutoplay()&&(e=window.ad_utils&&window.ad_utils.fp?window.ad_utils.fp:void 0)&&e.should_autoplay(i.id)&&(t=i.adStore.getFrequencyCappedInitActions(),i.actionHandler.triggerMany(t),e.log_autoplay(i.id))}return e.adData.isScalable&&150===n.adHeight&&300===n.adWidth&&window.Tarnhelm.log("Warning: Ad is set to `isScalable`, but its iframe does not have a width dimension set. Ad will be 300px wide on init."),i.adStore=new r(e.adData,i.actionHandler,n),i.linkHandler=new u(e.adData.defaultLink,i.actionHandler),e.adData.externalTriggerActions&&(i.externalTriggerHandler=new l(e.adData.externalTriggerActions,i.actionHandler)),p.listen(i.actionHandler),h.listen(i.actionHandler,i.containerFrame),m.listen(i.actionHandler,i.adStore),i.scrollActionHandler=new c(i.actionHandler),{getId:function(){return i.id},getName:function(){return i.name},getDomNode:function(){return i.domNode},getContainerFrame:function(){return i.containerFrame},getActionHandler:function(){return i.actionHandler},getAdStore:function(){return i.adStore},getInitTime:function(){return i.initTime},getTrackingConsumer:function(){return i.trackingConsumer},timeSinceInit:function(e){return(e=e||(new Date).getTime())-i.initTime},resizeAdContainer:o,minimize:function(){i.actionHandler.trigger({actionName:"minimize-ad"})},maximize:function(){i.actionHandler.trigger({actionName:"maximize-ad"})},initAfterMount:function(){var e=i.adStore.getState();this.initted||(this.initted=!0,o(i.adStore.getState().frameProperties),g.check(this),e.actions&&e.actions.init&&e.actions.init.length&&i.actionHandler.triggerMany(e.actions.init),s(),i.actionHandler.trigger({actionName:_.DISPLAYED}))}}}},{"../renderer/stores/ad.js":70,"../renderer/stores/retrievers/scale.js":80,"./actionHandler.js":5,"./backwardsCompatibilityProcessor.js":7,"./checkAdParentCompliance.js":8,"./eventEmitter.js":11,"./events/adEvent.js":12,"./externalFunctionHandler.js":15,"./externalTriggerHandler.js":16,"./linkHandler.js":19,"./logHandler.js":20,"./rectProcessor.js":24,"./scrollActionHandler":26,"./videoActionHandler.js":30}],7:[function(e,t,i){t.exports={process:function(e){var t,i="Ad schema not up to date! ["+e.name+"] :: ",n=!!e.rect,o=!!e.frameProperties,s=o&&!!e.frameProperties.rect,r=!1;return n&&!o?(r=!0,t={width:e.rect.width,height:e.rect.height},e.frameProperties=t):n||(o&&s?(r=!0,t={width:e.frameProperties.rect.width,height:e.frameProperties.rect.height},e.frameProperties=t):o||s||(window.Tarnhelm.log(i+"Bad dimensions config, please update immediately."),e.frameProperties={width:0,height:0})),r&&window.Tarnhelm.log(i+"Please update ad's frameProperties and ad.rect schema."),e}}},{}],8:[function(e,t,i){t.exports={check:function(e){var t,i="Ad ["+e.getAdStore().getState().name+"] may not render properly! ",n=(this.hasAdContainerParent(e)?(t=this.getAdContainerParent(e),t=window.getComputedStyle(t),n=new RegExp(/relative|absolute/),o=new RegExp(/(inline\-|)block/),n.test(t.position)||window.Tarnhelm.log(i+' iframe.parentNode must be set to  position "relative" or "absolute".'),"visible"!==t.overflow&&window.Tarnhelm.log(i+"iframe.parentNode is not set to overflow: visible;"),"relative"!==t.position||o.test(t.display)||window.Tarnhelm.log(i+'iframe.parentNode is set to position "relative", so it must also be set to display "block" or "inline-block".'),""===t.width&&window.Tarnhelm.log(i+"iframe.parentNode requires an explicit width."),""===t.height&&window.Tarnhelm.log(i+"iframe.parentNode requires an explicit height.")):window.Tarnhelm.log(i+"Incorrect context for Tarnhelm iframe: Ad iframe does not have an iframeNode.parentNode"),e.getContainerFrame()),o=window.getComputedStyle(n);""===o.top&&""===o.bottom&&""===o.left&&""===o.right&&window.Tarnhelm.log(i+"iframe has no positioning values.")},hasAdContainerParent:function(e){return e.getContainerFrame()&&e.getContainerFrame().parentNode},getAdContainerParent:function(e){return e.getContainerFrame().parentNode}}},{}],9:[function(e,t,i){function n(e){var t="number"==typeof e?new Date(e):Date.parse(e);isNaN(t)?(window.Tarnhelm.log('Bad date string "'+e+'", setting CountdownTimer to NOW to avoid errors'),this.targetDate=new Date):this.targetDate=new Date(e),o.observable(this),this.tick(),this.start()}var o=e("riot");e("../tarnhelm.js");n.prototype={getMillisecondsRemaining:function(){var e=this.targetDate.valueOf()-window.Tarnhelm.getNowTime();return 0<e?e:0},start:function(){window.clearInterval(this.interval),this.boundTick=this.tick.bind(this),this.interval=window.setInterval(this.boundTick,1e3)},stop:function(){window.clearInterval(this.interval),delete this.boundTick},tick:function(){var e=this.getRemainingValues(this.getMillisecondsRemaining());this.trigger("tick",e),e.totalMs||(this.stop(),this.trigger("end"))},getRemainingValues:function(e){var t={days:0,hours:0,minutes:0,seconds:0,totalMs:0};return 0!==e&&(t.totalMs=e,t.days=Math.floor(e/864e5),e-=864e5*t.days,t.hours=Math.floor(e/36e5),e-=36e5*t.hours,t.minutes=Math.floor(e/6e4),e-=6e4*t.minutes,t.seconds=Math.floor(e/1e3)),t}},t.exports=n},{"../tarnhelm.js":83,riot:120}],10:[function(e,t,i){var n=/^http(s)?\:\/\/m\.(.*\.)?imdb\.com/,s=/(Android|OS|Windows Phone) (\d+)[\._](\d+)[\._]?(\d+)?/,r=/Android (\d{2,})/,o=/iP(hone|ad|od)/,a=/Version\/[\d\.]+.*Safari/,d="Chrome/",l=/(Chrome|Safari|MSIE|Firefox)/,u=/(SamsungBrowser|Galaxy Nexus Build|iPhone OS 8|iPhone OS 7)/;function c(e,t){this.userAgentString=t,this.url=e,this._calculate()}c.prototype={getInfo:function(){return this.deviceInfo},_calculate:function(){var e=this._isWindowsDevice(this.userAgentString),t=this._isIOSDevice(this.userAgentString),i=this._isAndroidDevice(this.userAgentString),n=e||t||i,o=this._isIMDbApp(this.userAgentString),s=this._isSafari(this.userAgentString),r=this._getMobilePlatformVersion(this.userAgentString,o,i),a=!n||this._hasMobileTransitionTransformSupport(this.userAgentString,o,i,r);this.deviceInfo={isWindowsDevice:e,isSafari:s,isIOSDevice:!e&&t,isAndroidDevice:!e&&i,isMobileDevice:n,isMobileSite:this._isMobileSite(this.url),isIMDbApp:o,hasTouch:this._hasTouch(document),canAutoplay:this._canAutoplay(r,o,i,t,n),canFullscreen:this._canFullscreen(document),mobilePlatformVersion:r,canTransitionTransforms:a}},_isWindowsDevice:function(e){return-1<e.indexOf("Windows Phone")},_isIOSDevice:function(e){return-1<e.search(o)},_isSafari:function(e){return-1<e.search(a)},_isAndroidDevice:function(e){return-1<e.indexOf("Android")},_isMobileSite:function(e){return-1<e.search(n)},_isIMDbApp:function(e){return-1<e.indexOf("IMDb-flg")},_hasTouch:function(e){return"ontouchstart"in e},_getChromeVersion:function(e){if(-1!==e.indexOf(d))return parseInt(e.substr(e.indexOf(d)+d.length,2),10);window.Tarnhelm.log("Attempted to get chrome version string of non chrome userAgentString")},_getMobilePlatformVersion:function(e,t,i){var n={},o=e.match(s);return o&&0<o.length&&(n.major=parseInt(o[2],10)||0,n.minor=parseInt(o[3],10)||0,n.patch=parseInt(o[4],10)||0),t&&i&&((o=e.match(r))&&0<o.length?n.androidAPI=parseInt(o[1],10)||0:n.androidAPI=0),n},_canAutoplay:function(e,t,i,n,o){return t?i?17<=e.androidAPI||4<=e.major&&!(4===e.major&&e.minor<2):!!(n&&4<=e.major):!o},_canFullscreen:function(e){return e.fullscreenEnabled||e.webkitFullscreenEnabled||e.msFullscreenEnabled||e.mozFullscreenEnabled},_hasMobileTransitionTransformSupport:function(e,t,i,n){i=!i&&n.major<9;if(t)return!i;if(u.test(e)||!l.test(e))return!1;if(-1!==e.indexOf(d)){n=this._getChromeVersion(e);if(!Number.isNaN(n)&&n<46)return!1}return!0}},t.exports=c},{}],11:[function(e,t,i){var n=e("riot");t.exports=function(){n.observable(this)}},{riot:120}],12:[function(e,t,i){t.exports={DISPLAYED:"ad:displayed",ASSET_PRELOAD_START:"ad:asset-preload-start",ASSET_PRELOAD_FINISH:"ad:asset-preload-finish",ASSET_PRELOAD_TIMEOUT:"ad:asset-preload-timeout",VIDEO_FAILURE:"ad:video-failure",VIDEO_LOADED:"ad:video-loaded"}},{}],13:[function(e,t,i){function n(e){this.topActionHandler=e,this.registerTopActionHandler();var t=this;this.topActionHandler.on("fireDeferredMetrics",function(){t.fireDeferredMetrics()})}var o=e("./tarnhelmEvent.js"),s=e("./adEvent.js"),r=[];function a(e){r.push({fired:!1,fn:e})}function d(e,t){window.premiumAdMetrics&&window.premiumAdMetrics.initCounter?(window.Tarnhelm.log("initializing counter for "+e+"_"+t,Date.now()),window.premiumAdMetrics.initCounter(e,t)):(window.Tarnhelm.log("deferring counter initialization for "+e+"_"+t,Date.now()),a(function(){window.premiumAdMetrics&&"function"==typeof window.premiumAdMetrics.initCounter&&window.premiumAdMetrics.initCounter(e,t)}))}function l(e,t){window.premiumAdMetrics&&window.premiumAdMetrics.recordCounter?(window.Tarnhelm.log("logging counter for "+e+"_"+t,Date.now()),window.premiumAdMetrics.recordCounter(e,t)):(window.Tarnhelm.log("deferring counter for "+e+"_"+t,Date.now()),a(function(){window.premiumAdMetrics.recordCounter(e,t)}))}function u(e,t){var i=window.IMDbTimer?Date.now()-window.IMDbTimer.starttime:-1;-1==i?window.Tarnhelm.log("no timer baseline present to log timed event for "+e+"_"+t,Date.now()):window.premiumAdMetrics&&window.premiumAdMetrics.recordLatency?(window.Tarnhelm.log("logging timed event for "+e+"_"+t,Date.now()),window.premiumAdMetrics.recordLatency(e,t,i)):(window.Tarnhelm.log("deferring timed event for "+e+"_"+t,Date.now()),a(function(){window.premiumAdMetrics.recordLatency(e,t,i)}))}n.prototype={registerTopActionHandler:function(){this.topActionHandler.on(o.READY,function(){u("tarnhelm","start")}),this.topActionHandler.on(o.INIT_FAILURE,function(){u("tarnhelm","initFailure")}),d("creative","abort"),this.topActionHandler.on(o.MPTP_ABORT,function(){l("creative","abort")}),d("tarnhelm","error"),this.topActionHandler.on(o.ERROR,function(){l("tarnhelm","error")}),d("creative","transitionSuccess"),this.topActionHandler.on(o.MPTP_TRANSITION,function(){l("creative","transitionSuccess")}),d("creative","transitionFailure"),this.topActionHandler.on(o.MPTP_TRANSITION_FAILURE,function(){l("creative","transitionFailure")})},registerAdActionHandler:function(e,t){t.on(s.ASSET_PRELOAD_START,function(){u("tarnhelm","preloadStart")}),t.on(s.ASSET_PRELOAD_FINISH,function(){u("tarnhelm","preloadFinish")}),t.on(s.ASSET_PRELOAD_TIMEOUT,function(){u("tarnhelm","preloadTimeout")}),t.on(s.DISPLAYED,function(){u("tarnhelm","creativeDisplayed")}),d("tarnhelm","videoFailure"),t.on(s.VIDEO_FAILURE,function(){l("tarnhelm","videoFailure")}),t.on(o.RECORD_LATENCY,function(e){var t,i,n;t="tarnhelm",i=e.metricName,n=e.milliseconds,window.premiumAdMetrics&&window.premiumAdMetrics.recordLatency?(window.Tarnhelm.log("logging pre-calculated latency for "+t+"_"+i,Date.now()),window.premiumAdMetrics.recordLatency(t,i,n)):(window.Tarnhelm.log("deferring pre-calculated latency for "+t+"_"+i,Date.now()),a(function(){window.premiumAdMetrics.recordLatency(t,i,n)}))})},fireDeferredMetrics:function(){r.forEach(function(e){e.fired||(e.fn(),e.fired=!0)})}},t.exports=n},{"./adEvent.js":12,"./tarnhelmEvent.js":14}],14:[function(e,t,i){t.exports={READY:"tarnhelm:system-init",ERROR:"tarnhelm:error",INIT_FAILURE:"tarnhelm:init-failure",MPTP_ABORT:"tarnhelm:mptp-abort",MPTP_TRANSITION:"tarnhelm:mptp-transition",MPTP_TRANSITION_FAILURE:"tarnhelm:mptp-transition-failure",RECORD_LATENCY:"tarnhelm:record-latency"}},{}],15:[function(e,t,i){t.exports={listen:function(e,t){var i=this,n=t.contentWindow;e.on("call-external-function",function(e){i.callExternalFunction(n,e)})},callExternalFunction:function(e,t){var i,n=t.data.functionName,o=t.data.arguments||[],e=this.getFunctionContext(e,t),e=this.isNested(n)?(i=this.getFunctionThisArg(t,e),this.getNestedFunction(n,e)):(i=e)[n];"function"!=typeof e?this.logErrorMessage(e,t):"object"!=typeof i?this.logThisArgErrorMessage(i,t):e.apply(i,o)},getFunctionThisArg:function(e,t){var i=e.data.functionName,e=(e=e.data.thisArgName)||i.substr(0,i.lastIndexOf("."));return this.nestReduce(e.split("."),t)},getFunctionContext:function(e,t){return"top"===t.data.context?window.top:e},isNested:function(e){return-1!==e.indexOf(".")},getNestedFunction:function(e,t){return this.nestReduce(e.split("."),t)},nestReduce:function(e,t){return e.reduce(function(e,t,i,n){if(e)return e[t]},t)},logErrorMessage:function(e,t){var i="";i+=null==e?"Function does not exist":t.data.functionName+" is not a function",this.logError(i,t)},logThisArgErrorMessage:function(e,t){var i="";i+=null==e?"Provided thisArg does not exist":t.data.thisArgName+" is not an object",this.logError(i,t)},logError:function(e,t){e+=' in "'+t.data.context+'" context. ',window.Tarnhelm.log('Failed to call external function "'+t.data.functionName+'".',e)}}},{}],16:[function(e,t,i){t.exports=function(e,t){var i=this;i.actionMap=e,t.on("handle-external-trigger",function(e){e.data.triggerName&&i.actionMap[e.data.triggerName]&&t.triggerMany(i.actionMap[e.data.triggerName])})}},{}],17:[function(e,t,i){t.exports={throttle:function(i,n){function o(){a=Date.now(),d=null,i.apply(s,r)}var s,r,a=0,d=null;return function(){var e=Date.now(),t=n-(e-a);s=this,r=arguments,t<=0||n<t?(d&&(clearTimeout(d),d=null),a=e,i.apply(s,r)):d=d||setTimeout(o,t)}},debounce:function(t,i){var n,o,s,r=0,a=null;function d(){var e=Date.now()-r;e<i?a=setTimeout(d,i-e):(a=null,s=t.apply(n,o))}return function(){return n=this,o=arguments,r=Date.now(),a=a||setTimeout(d,i),s}}}},{}],18:[function(e,t,i){t.exports={beforeNode:function(e,t){var i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t.parentNode.insertBefore(i,t)}}},{}],19:[function(e,t,i){function n(e,t){var i=this;this.defaultLink=e,(this.actionHandler=t).on("open-link",function(e){i.handleLinkAction(e)}),t.on("open-default-link",function(e){i.defaultLink?i.handleLinkAction(e):window.Tarnhelm.log('No defaultLink for the "open-default-link" action.')})}n.prototype={pauseVideos:function(){this.actionHandler.trigger({actionName:"video:pause-all"})},handleLinkAction:function(e){var t=this.defaultLink,i=!1;e.data&&(t=e.data.url||t,i=!!e.data.sameWindow),i?window.top.location.href=t:window.open(t)}},t.exports=n},{}],20:[function(e,t,i){t.exports={listen:function(e){e.on("log",function(e){window.Tarnhelm.log(e.message)})}}},{}],21:[function(e,t,i){function n(e){this.injectEl=e,this.init(),this.minimize()}n.prototype={dimensions:{minimize:40,logHeight:150},init:function(){this.containerEl=this.getContainerEl(),this.logEl=this.getLogEl(),this.containerEl.appendChild(this.logEl),this.minimizeButton=this.getMinimizeButton(),this.containerEl.appendChild(this.minimizeButton),this.injectEl.appendChild(this.containerEl),this.log(" = Tarnhelm - Mobile Debug Mode = ")},log:function(e){Array.isArray(e)||(e=[e]);e=this.makeLine(e);this.logEl.appendChild(e),this.logEl.scrollTop=this.logEl.scrollHeight},makeLine:function(e){var t=document.createElement("p");t.style.cssText="margin:0 0 0.25em 0; border-bottom: thin solid rgba(255,255,255,0.25);",t.textContent="";for(var i=0;i<e.length;i++){var n=e[i],o="";n?"string"==typeof n?o=n:"function"==typeof n.toString&&(o=n.toString()):o="undefined",i<e.length-1&&(o+=", "),t.textContent+=o}return t},getContainerEl:function(){return this._makeEl("mobile-log-container",["position: fixed","bottom:0","left:0","display: block","width: 100%","overflow: visible","height: 80%","max-height: "+this.dimensions.logHeight+"px","z-index: 1986",""].join(";"))},getLogEl:function(){return this._makeEl("mobile-log",["position: absolute","top:0","display: block","width: 100%","height: 100%","z-index: 1986","color: rgb(0, 255, 0)","font-family: courier","background-color: rgba(0,0,0,0.8)","overflow: scroll",""].join(";"))},getMinimizeButton:function(){var e=this.dimensions.minimize+"px",e=this._makeEl("mobile-log-minimize-button",["position:absolute","right: 0","top: -"+e,"display: block","background: rgba(0,0,0,0.8)","color: rgb(0, 255, 0)","width:"+e,"height:"+e,"font-size: 24px","line-height: 20px","cursor:pointer","text-align:center"].join(";"));return e.textContent="_",e.onclick=this.minimizeButtonClick.bind(this),e},_makeEl:function(e,t){var i=document.createElement("div");return i.id=e,i.style.cssText=t,i},minimizeButtonClick:function(){this.isMinimized?this.unminimize():this.minimize()},minimize:function(){this.isMinimized=!0,this.containerEl.style.height=0,this.minimizeButton.textContent="^"},unminimize:function(){this.isMinimized=!1,this.containerEl.style.height="80%",this.minimizeButton.textContent="_"}},t.exports=n},{}],22:[function(e,t,i){t.exports={sameSign:function(e,t){return 0<=e&&0<=t||e<=0&&t<=0},avg:function(e){return 0===e.length?0:e.reduce(function(e,t){return e+t})/e.length},clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},getEllipseFalloff:function(e,t){e=this.clamp(e,0,t),e=Math.sqrt(1-Math.pow(e,2)/Math.pow(t,2));return this.clamp(e,0,1)}}},{}],23:[function(e,t,i){t.exports={clone:function(e){return JSON.parse(JSON.stringify(e))},shallowMerge:function(e,t){this._doMerge(e,t,!0)},shallowMergeMany:function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++){var o=i[n];e[o]||(e[o]={}),this.shallowMerge(e[o],t[o])}},_doMerge:function(e,t,i){if(this.isObject(e)&&this.isObject(t))for(var n=Object.keys(t),o=0;o<n.length;o++){var s,r=n[o];(i||null==e[r])&&(s="object"===t[r]?this.clone(t[r]):t[r],e[r]=s)}else window.Tarnhelm.log("Object merge operation failed, both params must be objects:"),window.Tarnhelm.log(e),window.Tarnhelm.log(t)},mergeDefaults:function(e,t){t=this.clone(t);this._doMerge(e,t,!1)},isObject:function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e},getProperty:function(e,t){if(e&&t){for(var i=t.split("."),n=e,o=0;o<i.length;o++){if(void 0===n[i[o]])return;n=n[i[o]]}return n}}}},{}],24:[function(e,t,i){var n=e("../renderer/stores/retrievers/scale.js");t.exports={defaults:{position:"absolute",anchorX:"left",offsetX:0,anchorY:"top",offsetY:0,width:"auto",height:"auto"},setElRectStyle:function(e,t){var i=e.style;["top","right","bottom","left"].forEach(function(e){i.removeProperty(e)}),i.position=t.position,i[t.anchorX]=t.offsetX,i[t.anchorY]=t.offsetY,i.height=t.height,i.width=t.width},process:function(e){e=e||{};return{position:this.determinePositioning(e.position),anchorX:this.determineAnchorX(e.anchorX),offsetX:this.getDimensionWithUnit(e.offsetX,this.defaults.offsetX),anchorY:this.determineAnchorY(e.anchorY),offsetY:this.getDimensionWithUnit(e.offsetY,this.defaults.offsetY),width:this.getDimensionWithUnit(e.width,this.defaults.width),height:this.getDimensionWithUnit(e.height,this.defaults.height)}},determinePositioning:function(e){return null!=e&&e.match(/absolute|relative|fixed|static|inherit/)?e:this.defaults.position},determineAnchorX:function(e){switch(e){case"right":return"right";case"left":return"left";default:return null!=e&&window.Tarnhelm.log("Bad anchorX position configured."),this.defaults.anchorX}},determineAnchorY:function(e){switch(e){case"bottom":return"bottom";case"top":return"top";default:return null!=e&&window.Tarnhelm.log("Bad anchorY position configured."),this.defaults.anchorY}},getDimensionWithUnit:function(e,t){return null==e?t:n.getDimensionWithUnit(e)}}},{"../renderer/stores/retrievers/scale.js":80}],25:[function(e,t,i){function n(e){this.requirementFlags=this.buildFlags(e)}var o={canAutoplay:1,hasTouch:1,canFullscreen:1};n.prototype={areMet:function(e){var t=e.requirements||{},i=Object.keys(t);return 0===i.length||(this.areValidRequirements(i)?this.testRequirements(t):(window.Tarnhelm.log("Invalid requirement(s) found on an item ::",e.requirements," :: Full item :: ",e),!1))},testRequirements:function(e){for(var t=Object.keys(e),i=0;i<t.length;i++){var n=t[i],o=e[n];if(this.requirementFlags[n]!==o)return!1}return!0},buildFlags:function(e){return{canAutoplay:e.canAutoplay,hasTouch:e.hasTouch,canFullscreen:e.canFullscreen}},areValidRequirements:function(e){for(var t=0;t<e.length;t++)if(!this.isValidRequirement(e[t]))return!1;return!0},isValidRequirement:function(e){return!!o[e]}},t.exports=n},{}],26:[function(e,t,i){t.exports=function(e){var t,i;function n(){t=0===window.scrollY?(window.cancelAnimationFrame(t),null):(window.scrollBy(0,i),window.requestAnimationFrame(n))}e.on("jump-to-top",function(e){0<window.scrollY&&(window.scroll(0,0),window.Tarnhelm.log("window jump-to-top requested."))}),e.on("scroll-to-top",function(e){0<window.scrollY&&(window.Tarnhelm.log("window scroll-to-top requested."),e=e.duration||100,i=-window.scrollY/(e/17),t=window.requestAnimationFrame(n))})}},{}],27:[function(e,t,i){function n(e){this.firstPos=this.getPosFromEvent(e),this.handledFirstMove=!1,this.currPos=this.getPosFromEvent(e),this.prevPos=this.getPosFromEvent(e),this.velocity={x:0,y:0},this.totalDistance={x:0,y:0},this.currMoveDistance={x:0,y:0},this.debouncedVelocityDecay=s.debounce(this.velocityDecay.bind(this),50),this.transitionLengthFactor=1,this.touchEnded=!1,this.isTouchTypeDetermined=!1,this.isHorizontalMove=!1,this.isVerticalMove=!1,this.isSwipe=!1}var o=e("./numberUtils.js"),s=(e("./objectUtils.js"),e("./functionUtils.js"));n.prototype={addTouchMoveData:function(e){this.prevPos=this.currPos,this.currPos=this.getPosFromEvent(e),this.currMoveDistance=this.getTouchMoveDifference(this.prevPos,this.currPos),this.totalDistance=this.getNewTotalDistance(this.totalDistance,this.currMoveDistance),this.velocity=this.getNewVelocity(this.velocity,this.currMoveDistance),this.debouncedVelocityDecay(),this.determineTouchType(this.totalDistance,this.velocity)},finalizeTouchDataOnEnd:function(e){this.touchEnded=!0,this.isSwipe=this.touchTestSwipe(this.velocity),this.transitionLengthFactor=this.getTransitionLengthFactor(this.velocity.x)},getPosFromEvent:function(e){return{x:e.touches[0].clientX,y:e.touches[0].clientY}},getTouchMoveDifference:function(e,t){return{x:t.x-e.x,y:t.y-e.y}},getNewTotalDistance:function(e,t){return{x:e.x+t.x,y:e.y+t.y}},getNewVelocity:function(e,t){return{x:this._adjustVelocity(e.x,t.x),y:this._adjustVelocity(e.y,t.y)}},getTransitionLengthFactor:function(e){e=o.getEllipseFalloff(Math.abs(e),100);return o.clamp(e,.2,1)},velocityDecay:function(){this.touchEnded||(this.velocity.x=0,this.velocity.y=0,this.currMoveDistance.x=0,this.currMoveDistance.y=0,this.isSwipe=!1)},_adjustVelocity:function(e,t){e=o.sameSign(e,t)?e:0;return o.avg([e,t])},determineTouchType:function(e,t){this.isSwipe||(this.isSwipe=this.touchTestSwipe(t)),!this.isVerticalMove&&!this.isHorizontalMove&&(this.isVerticalMove=this.touchTestVertical(e),this.isVerticalMove||(this.isHorizontalMove=this.touchTestHorizontal(e),this.isHorizontalMove))&&(this.isTouchTypeDetermined=!0)},touchTestHorizontal:function(e){return 10<=Math.abs(e.x)},touchTestVertical:function(e){return 7.5<=Math.abs(e.y)},touchTestSwipe:function(e){return 5<Math.abs(e.x)}},t.exports=n},{"./functionUtils.js":17,"./numberUtils.js":22,"./objectUtils.js":23}],28:[function(e,t,i){var u={opacity:"opacity",translate:"transform",translateX:"transform",translateY:"transform",rotate:"transform",scale:"transform",scaleX:"transform",scaleY:"transform",blur:"filter",brightness:"filter",contrast:"filter",grayscale:"filter",saturate:"filter"},o={filter:["-webkit-filter","-moz-filter","-o-filter"]};t.exports={isValidTransitionType:function(e){return"string"==typeof e&&!!u[e]},getTransitionSegment:function(e){return this.getTransitionSegmentForProperty(e,u[e.type])},getPrefixedTransitionSegments:function(e){for(var t=[],i=(t.push(this.getTransitionSegment(e)),o[u[e.type]]),n=0;n<i.length;n++)t.push(this.getTransitionSegmentForProperty(e,i[n]));return t},getTransitionSegmentForProperty:function(e,t){var i=[];return t&&i.push(t),e.duration&&i.push(e.duration),e.easing&&i.push(e.easing),e.delay&&i.push(e.delay),i.join(" ")},getCSSFunctionSegment:function(e,t){return e+"("+t+")"},calculateTransitionStyles:function(e){for(var t={start:{},end:{}},i=[],n=[],o=[],s=[],r=[],a=0;a<e.length;a++){var d,l=e[a];if(this.isValidTransitionType(l.type))switch(u[l.type]){case"transform":n.length||i.push(this.getTransitionSegment(l)),n.push(this.getCSSFunctionSegment(l.type,l.startValue)),o.push(this.getCSSFunctionSegment(l.type,l.endValue));break;case"opacity":t.start[l.type]=l.startValue,t.end[l.type]=l.endValue,i.push(this.getTransitionSegment(l));break;case"filter":s.length||(d=this.getPrefixedTransitionSegments(l),i=i.concat(d)),s.push(this.getCSSFunctionSegment(l.type,l.startValue)),r.push(this.getCSSFunctionSegment(l.type,l.endValue))}}return i.length&&(t.start.transition=i.join(",")),n.length&&(t.start.transform=n.join(" ")),o.length&&(t.end.transform=o.join(" ")),s.length&&(t.start.filter=s.join(" ")),r.length&&(t.end.filter=r.join(" ")),t},getTransitionTime:function(e){var t=parseFloat(e.duration)||0,e=parseFloat(e.delay)||0;return Math.floor(1e3*(t+e))},getMaxTransitionTime:function(e){for(var t=0,i=0;i<e.length;i++){var n=this.getTransitionTime(e[i]);t<n&&(t=n)}return t}}},{}],29:[function(e,t,i){t.exports={getQueryParam:function(e,t){e=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return e?e[1]:""},preloadUrl:function(e,t){var i=new Image;"function"==typeof t&&(i.onload=t),i.src=e},preloadUrls:function(e){if(e&&e.length)for(var t=0;t<e.length;t++)this.preloadUrl(e[t])},preloadUrlsWithCallback:function(e,t){var i=0,n=!1;if(e&&e.length)for(var o=window.setTimeout(function(){window.Tarnhelm.log("Only "+i+" of "+e.length+" preloaded before timeout. Preload assets failed to load before the timeout, triggering callback."),r(!0)},3e3),s=0;s<e.length;s++)this.preloadUrl(e[s],a);else t(!1);function r(e){n||(n=!0,t(e))}function a(){++i===e.length&&(window.Tarnhelm.log(i+" of "+e.length+" images have preloaded"),window.clearTimeout(o),r(!1))}}}},{}],30:[function(e,t,i){var d=e("../renderer/stores/retrievers/component.js");t.exports={videoActions:["video:play","video:pause","video:reset","video:mute","video:unmute","video:fullscreen","video:normalscreen"],listen:function(i,e){var n=this,o=(i.on(this.videoActions.join(" "),function(e,t){n.triggerVideoAction(i,t.actionName,t.componentName,t.userInitiated)}),e.getComponentLibrary()),s=e.getComponentNamesByCategory("video"),e=this.videoActions.map(function(e){return e+"-all:under-ancestor"});i.on(e.join(" "),function(e,t){e=e.split(":")[1].split("-")[0];n.triggerVideoActionUnderAncestor(i,"video:"+e,t.ancestorName,o,s,t.userInitiated)})},triggerVideoAction:function(e,t,i,n){e.trigger({actionName:t+":"+i,userInitiated:void 0===n||n})},triggerVideoActionUnderAncestor:function(e,t,i,n,o,s){if(i)for(var r=0;r<o.length;r++){var a=o[r];d.hasAncestorOfName(a,i,n)&&this.triggerVideoAction(e,t,a,s)}else window.Tarnhelm.log(t+"-all:under-ancestor actions require ancestorName property.")}}},{"../renderer/stores/retrievers/component.js":76}],31:[function(e,t,i){t.exports=function(i,e){var n,t=this;this.setWrap=function(e){n||((t=document.getElementById(i))||window.Tarnhelm.log("Invalid element id set on wrapSwapper."),n=t),t="",(e=e).source&&(t=(t=(t=(t+="url("+e.source+") ")+(e.position?e.position+" ":"center top "))+(e.repeat?e.repeat+" ":"no-repeat "))+(e.attachment?e.attachment+" ":"scroll "));var t,e=t+=e.color;n.style.background=e},e.on("set-wrap-background",function(e){t.setWrap(e.data)})}},{}],32:[function(t,e,i){var n,o;n=this,o=function(e){t("./mixins/action.js"),t("./mixins/action-user.js"),t("./mixins/action-touch.js"),t("./mixins/action-swipe.js"),t("./mixins/action-transitions.js"),t("./mixins/action-cuepoint.js"),t("./mixins/background.js"),t("./mixins/base.js"),t("./mixins/media-interop.js"),t("./mixins/rect.js"),t("./mixins/resize.js"),t("./mixins/rotator.js"),t("./mixins/styles.js"),t("./mixins/teardown.js"),t("./mixins/transitions.js"),t("./mixins/video.js"),t("./mixins/weblab.js"),t("./mixins/zoolander.js"),t("./components/ad.tag"),e.tag("app",'<ad data="{adData}"></ad>','class="app"',function(e){this._adInstance=this.opts.adInstance,this.adData=this._adInstance.getAdStore().getState();var t=this;this._adInstance.getActionHandler().on("ad-state-updated",function(){t.adData=t._adInstance.getAdStore().getState(),t.update()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{"./components/ad.tag":33,"./mixins/action-cuepoint.js":51,"./mixins/action-swipe.js":52,"./mixins/action-touch.js":53,"./mixins/action-transitions.js":54,"./mixins/action-user.js":55,"./mixins/action.js":56,"./mixins/background.js":57,"./mixins/base.js":58,"./mixins/media-interop.js":59,"./mixins/rect.js":60,"./mixins/resize.js":61,"./mixins/rotator.js":62,"./mixins/styles.js":63,"./mixins/teardown.js":64,"./mixins/transitions.js":65,"./mixins/video.js":66,"./mixins/weblab.js":67,"./mixins/zoolander.js":68,riot:120}],33:[function(t,e,i){var n,o;n=this,o=function(e){t("./child.tag"),e.tag("ad",'<div riot-style="{getTagStyleString()}"><child each="{name, i in opts.data.childNames}" name="{name}"></child></div>','class="ad"',function(e){this.mixin("base"),this.mixin("styles"),this.mixin("background")})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{"./child.tag":36,riot:120}],34:[function(e,t,i){var n,o;n=this,o=function(e){e.tag("alphalfa",'<div class="alphalfa" riot-style="{getTagStyleString()}"><video __autoplay="{this.shouldAutoplay}" webkit-playsinline playsinline style="display:none;" muted="true"><source riot-src="{this.opts.data.video.url}"></video><canvas class="alphalfa-buffer" style="display:none;" height="{this.opts.data.rect.height * 2}px" width="{this.opts.data.rect.width}px"></canvas><canvas class="alphalfa-output" height="{this.opts.data.rect.height}px" width="{this.opts.data.rect.width}px"></canvas></div>',function(e){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("teardown"),this.mixin("video"),this.mixin("action"),this.mixin("action-cuepoint"),this.mixin("action-transitions");var t=this;this.addLoopConfig=function(e){var t=this.opts.data.video,i=t.loop;return!0===i&&(e.loop=i,null!=t.maxLoops)&&(e.maxLoops=t.maxLoops),e},this.addStillFrame=function(e){var t=this.opts.data.video;return null!=t.stillFrameMS?e.stillFrameMS=t.stillFrameMS:!0===t.loop&&0!==t.maxLoops&&window.Tarnhelm.log("Warning: No stillFrameMS set on a non-infinitely looping Alphalfa. It will disappear after its last loop."),e},this.addMaskUrl=function(e){var t=this.opts.data.video;return null!=t.maskUrl&&(e.maskUrl=t.maskUrl),e},this.initAlphalfa=function(){var e,t=this.getVideoEl();t&&"function"==typeof t.play&&(this.opts.data.isInvisible&&(t.autoplay=""),this.bufferEl=this.root.getElementsByTagName("canvas")[0],this.outputEl=this.root.getElementsByTagName("canvas")[1],e={video:t,buffer:this.bufferEl,output:this.outputEl,colorCorrect:!!this.opts.data.video.colorCorrect,forceCanvas:!!this.opts.data.video.forceCanvas,horizontalStack:!!this.opts.data.video.horizontalStack},e=this.addLoopConfig(e),e=this.addStillFrame(e),e=this.addMaskUrl(e),this.alphalfaPlayer=new ad_design.AlphalfaPlayer(e),this.alphalfaPlayer.listen(),this.shouldAutoplay)&&this.doAutoplay(t)},this.initCuepointEngine=function(){var e=this.getVideoEl();e&&(this.cuepointEngine=new ad_design.CuepointEngine({media:e,cuepoints:this.getCuePoints(),observer:this}))},this.play=function(e){e&&e.userInitiated&&(t.isPausedByUser=!1);e=t.getVideoEl();e&&"function"==typeof e.play&&e.play()},this.pause=function(e){e&&e.userInitiated&&(t.isPausedByUser=!0);e=t.getVideoEl();e&&"function"==typeof e.pause&&e.pause()},this.mute=function(){window.Tarnhelm.log("Alphalfa does not support mute and unmute actions.")},this.unmute=this.mute,this.reset=function(){var e=t.getVideoEl();e&&"number"==typeof e.currentTime&&(e.currentTime=0)},this.fullscreen=function(){window.Tarnhelm.log("Alphalfa does not support fullscreen and normalscreen actions.")},this.normalscreen=this.fullscreen,this.on("mount",function(){this.setVideoEl(this.root.getElementsByTagName("video")[0]),this.initAlphalfa(),this.initCuepointEngine()}),this.on("unmount",function(){this.fireSyntheticMediaPlaybackEvent("pause","alphalfa"),this.alphalfaPlayer.teardown(),this.cuepointEngine.destroy()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{riot:120}],35:[function(i,e,t){var n,o;n=this,o=function(e){e.tag("animaniac",'<div class="animaniac" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"></div>',function(e){var t=i("../../modules/objectUtils.js");this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions"),this.initted=!1,this.createAnimation=function(){var e=t.clone(this.opts.data.animaniacOptions);e.injectEl=this.root.getElementsByClassName("animaniac")[0],e.url=this.opts.data.source,e.spriteHeight=this.opts.data.rect.height,e.spriteWidth=this.opts.data.rect.width,e.sheetHeight=this.opts.data.spriteSheetDimensions.height,e.sheetWidth=this.opts.data.spriteSheetDimensions.width,this.animaniac=new ad_design.Animaniac(e),this.initted=!0},this.addActionListeners=function(){var t=this,e=this.getAdInstance().getActionHandler();e.on("animaniac:play",function(e){t.canTriggerAction(e.componentName)&&t.animaniac.play()}),e.on("animaniac:pause",function(e){t.canTriggerAction(e.componentName)&&t.animaniac.pause()}),e.on("animaniac:play-animation",function(e){t.canTriggerAction(e.componentName)&&t.animaniac.playAnimation(e.data.animationName)})},this.destroyAnimation=function(){this.animaniac.pause(),this.initted=!1,this.animaniac=null},this.canTriggerAction=function(e){return this.initted&&e===this.opts.data.name},this.on("mount",function(){this.createAnimation(),this.addActionListeners()}),this.on("unmount",function(){this.destroyAnimation()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==e&&void 0!==e.exports?(e=i("riot"),o(e)):o(n.riot)},{"../../modules/objectUtils.js":23,riot:120}],36:[function(t,e,i){var n,o;n=this,o=function(e){t("./alphalfa.tag"),t("./animaniac.tag"),t("./countdown.tag"),t("./countdown-number-text.tag"),t("./countdown-number-custom.tag"),t("./countdowner.tag"),t("./gallery.tag"),t("./graphic.tag"),t("./panel.tag"),t("./minimal-video.tag"),t("./reely.tag"),t("./rotator.tag"),t("./rotatorbutton.tag"),t("./slider-rotator.tag"),t("./youtube.tag"),e.tag("child",'<alphalfa each="{this.getType(\'alphalfa\')}" data="{data}"></alphalfa><animaniac each="{this.getType(\'animaniac\')}" data="{data}"></animaniac><countdown each="{this.getType(\'countdown\')}" data="{data}"></countdown><countdown-number-text each="{this.getType(\'countdown-number-text\')}" data="{data}"></countdown-number-text><countdown-number-custom each="{this.getType(\'countdown-number-custom\')}" data="{data}"></countdown-number-custom><countdowner each="{this.getType(\'countdowner\')}" data="{data}"></countdowner><gallery each="{this.getType(\'gallery\')}" data="{data}"></gallery><graphic each="{this.getType(\'graphic\')}" data="{data}"></graphic><panel each="{this.getType(\'panel\')}" data="{data}"></panel><reely each="{this.getType(\'reely\')}" data="{data}"></reely><minimal-video each="{this.getType(\'minimal-video\')}" data="{data}"></minimal-video><rotator each="{this.getType(\'rotator\')}" data="{data}"></rotator><rotatorbutton each="{this.getType(\'rotatorbutton\')}" data="{data}"></rotatorbutton><slider-rotator each="{this.getType(\'slider-rotator\')}" data="{data}"></slider-rotator><youtube each="{this.getType(\'youtube\')}" data="{data}"></youtube>','data-comp-name="{ this.opts.name }"',function(e){this.mixin("base");var t,i=this,o=(this.opts.name&&(t=this.getAdInstance().getAdStore(),this.componentData=t.getComponentState(this.opts.name),this.on("update",function(){this.componentData=t.getComponentState(i.opts.name)})),this.getType=function(e){var t=[];return this.componentData&&this.componentData.type===e&&!this.componentData.isHidden&&t.push({data:this.componentData}),t},["mount","unmount","premount","update","updated","init"]);this.on("all",function(e){if(e&&-1===o.indexOf(e))for(var t in this.tags)for(var i=0,n=this.tags[t].length;i<n;i++)this.tags[t][i].trigger.apply(this.tags[t][i],arguments)})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{"./alphalfa.tag":34,"./animaniac.tag":35,"./countdown-number-custom.tag":37,"./countdown-number-text.tag":38,"./countdown.tag":39,"./countdowner.tag":40,"./gallery.tag":41,"./graphic.tag":42,"./minimal-video.tag":43,"./panel.tag":44,"./reely.tag":45,"./rotator.tag":46,"./rotatorbutton.tag":47,"./slider-rotator.tag":48,"./youtube.tag":49,riot:120}],37:[function(e,t,i){var n,o;n=this,o=function(e){e.tag("countdown-number-custom",'<div class="countdown-number-custom countdown-number-custom-{this.opts.data.timeUnit}" riot-style="{getTagStyleString()}"></div>',function(e){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.frames=[],this.options={},this.createFrames=function(){for(var e=0;e<this.options.sheetHeight;e+=this.options.frameHeight)for(var t=0;t<this.options.sheetWidth;t+=this.options.frameWidth)this.frames.push(-t+"px "+-e+"px ")},this.createOptions=function(){this.options.frameHeight=this.opts.data.rect.height,this.options.frameWidth=this.opts.data.rect.width,this.options.sheetHeight=11*this.options.frameHeight,this.options.sheetWidth=10*this.options.frameWidth,this.options.source=this.opts.data.spritesheet.url||"https://m.media-amazon.com/images/G/01/IMDb/design/tarnhelm/countdown-number-custom/countdown.png",this.options.date=this.opts.data.targetDate||"Thu, 01 Jan 1970 00:00:00 +0000"},this.getDisplayIndex=function(){var e=this.opts.data.remaining[this.opts.data.timeUnit]+10;return e=!this.opts.data.padZeros&&this.opts.data.remaining[this.opts.data.timeUnit]<=9?this.opts.data.remaining[this.opts.data.timeUnit]:e},this.setFrame=function(e,t){e=e||t?"-"+(e||0)+"px -"+(t||0)+"px":this.frames[this.getDisplayIndex()];this.addStyleRule("background","url("+this.options.source+") "+e+" / 1000% 1100% no-repeat")},this.on("mount",function(){this.createOptions(),this.setFrame(0,this.options.frameHeight),this.createFrames()}),this.on("update",function(){this.setFrame()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{riot:120}],38:[function(e,t,i){var n,o;n=this,o=function(e){e.tag("countdown-number-text",'<div class="countdown-number-text countdown-number-text-{this.opts.data.timeUnit}" riot-style="{getTagStyleString()}"> {getDisplayValue()} </div>',function(e){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.updateTextStyle=function(){this.addStyleRule("font-size",this.determinedRect.height)},this.pad=function(e){return 9<e?e:"0"+e},this.getDisplayValue=function(){var e=this.opts.data.remaining[this.opts.data.timeUnit];return e=this.opts.data.padZeros?this.pad(e):e},this.on("update",this.updateTextStyle)})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{riot:120}],39:[function(e,t,i){var n,o;n=this,o=function(e){e.tag("countdown",'<div class="countdown" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><div if="{this.opts.data.remaining.totalMs || this.opts.data.showAfterEnd}"><child each="{name, i in opts.data.childNames}" name="{name}"></child></div></div>',function(e){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.triggerBackgroundState=function(){this.opts.data.remaining.totalMs||this.opts.data.useAlternateBackground||!this.opts.data.alternateBackground||this.getAdInstance().getActionHandler().trigger({actionName:"set-alternate-background",componentName:this.opts.data.name})},this.on("update",function(){this.triggerBackgroundState(),this.setBackground()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{riot:120}],40:[function(e,t,i){var n,o;n=this,o=function(e){e.tag("countdowner",'<div id="{this.opts.data.name}" class="countdowner th-countdown" riot-style="{getTagStyleString()}"><div class="th-countdown-inject" id="{\'th-countdown-\' + this.opts.data.name}"></div></div>',function(e){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("zoolander"),this.initCountdowner=function(){for(var e=this.root.getElementsByClassName("th-countdown-inject")[0],t=this.getAdIframeZoolander(),i={el:e,targetDate:new Date(this.opts.data.targetDate),zoolander:t},n=["splitChar","hideAfterRelease","periodContainerCss","periodCountCss","doPad","printLabels","labelsBelow","labels","labelsCss"],o=0;o<n.length;o++)null!=this.opts.data[n[o]]&&(i[n[o]]=this.opts.data[n[o]]);new window.ad_design.Countdowner(i)},this.on("mount",function(){this.initCountdowner(),window.Tarnhelm.log('Warning: The "countdowner" component is deprecated and does not support scaling for MobilePTP, please migrate to the "countdown" component.')})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{riot:120}],41:[function(t,e,i){var n,o;n=this,o=function(e){t("./graphic.tag"),e.tag("gallery",'<div class="gallery th-gallery-parent" riot-style="{getTagStyleString()}"><graphic each="{name, i in this.opts.data.imageUrls}" data="{parent.getPhotoData(i)}" class="th-gallery-image {currentIndex === i ? \'active\' : \'\'}"></graphic><graphic class="th-gallery-arrow prev" data="{this.opts.data.arrowGraphics.previous}"></graphic><graphic class="th-gallery-arrow next" data="{this.opts.data.arrowGraphics.next}"></graphic></div>',function(e){this.mixin("base"),this.mixin("styles"),this.mixin("background"),this.mixin("rect"),this.mixin("action"),this.mixin("action-swipe"),this.mixin("action-transitions");var t=this;this.currentIndex=0,this.maxIndex=this.opts.data.imageUrls.length-1,this.prevButton=null,this.nextButton=null,this.getPhotoData=function(e){return{name:this.opts.data.name+e,source:this.opts.data.imageUrls[e],rect:{anchorX:"right",anchorY:"top",offsetX:0,offsetY:0,height:this.opts.data.rect.height,width:this.opts.data.rect.width}}},this.on("swipeleft",function(){this.incrementIndex(),this.emitTrackingObject("intent","swipeLeft")}),this.on("swiperight",function(){this.decrementIndex(),this.emitTrackingObject("intent","swipeRight")}),this.incrementIndex=function(){t.currentIndex++,t.currentIndex>t.maxIndex&&(t.currentIndex=0),t.update()},this.decrementIndex=function(){t.currentIndex--,t.currentIndex<0&&(t.currentIndex=t.maxIndex),t.update()},this.onPrevClick=function(){this.emitTrackingObject("click","clickPrev"),this.decrementIndex()},this.onNextClick=function(){this.emitTrackingObject("click","clickNext"),this.incrementIndex()},this.on("mount",function(){this.attachTouchActions(),this.prevButton=t.root.getElementsByClassName("prev")[0],this.nextButton=t.root.getElementsByClassName("next")[0],this.prevButton.addEventListener("click",t.onPrevClick),this.nextButton.addEventListener("click",t.onNextClick)}),this.on("unmount",function(){this.detachTouchActions(),this.prevButton.removeEventListener("click",t.onPrevClick),this.nextButton.removeEventListener("click",t.onNextClick)})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{"./graphic.tag":42,riot:120}],42:[function(e,t,i){var n,o;n=this,o=function(e){e.tag("graphic",'<div if="{!this.isDisabledNavigationComponent()}" class="graphic" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><img if="{this.opts.data.source}" riot-src="{this.opts.data.source}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}"><img if="{this.opts.data.fullAdHoverSource}" riot-src="{this.opts.data.fullAdHoverSource}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}" class="ad-hover"><img if="{this.opts.data.hoverSource}" riot-src="{this.opts.data.hoverSource}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}" class="hover"></div><div if="{this.isDisabledNavigationComponent()}" class="graphic disabled" riot-style="{getTagStyleString()}"><img if="{this.opts.data.disabledSource}" riot-src="{this.opts.data.disabledSource}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}"></div>',function(e){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions")})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{riot:120}],43:[function(e,t,i){var n,o;n=this,o=function(e){e.tag("minimal-video",'<div riot-style="{getTagStyleString()}" class="minimal-video"><video webkit-playsinline playsinline muted="true" __autoplay="{this.shouldAutoplay}"><source riot-src="{this.opts.data.video.url}"></video></div>',function(e){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("teardown"),this.mixin("video"),this.mixin("action"),this.mixin("action-cuepoint"),this.mixin("action-transitions"),this.log=function(e){window.Tarnhelm.log("[minimal-video]: "+e)},this.mixin("weblab"),this.mixin("media-interop");var i=this;this.setupVideoAttributes=function(){var e=this.opts.data.video,t=this.getVideoEl();t&&"function"==typeof t.play&&(!1===e.autoplay||e.canplaythroughRequired||(this.shouldObeyMediaInteroperability()||(t.autoplay=!0),this.doAutoplay(t)),e.canplaythroughRequired&&t.addEventListener("canplaythrough",function(){i.requestPlayback({userInitiated:!1})}),e.loop)&&(t.loop=!0)},this.play=function(e){var e=!(!e||!e.userInitiated),t=(e&&(i.isPausedByUser=!1),i.getVideoEl());t&&"function"==typeof t.play&&i.requestPlayback({userInitiated:e})},this.pause=function(e){e&&e.userInitiated&&(i.isPausedByUser=!0);e=i.getVideoEl();e&&"function"==typeof e.pause&&(e.pause(),i.setMediaPaused())},this.mute=function(){var e=i.getVideoEl();e&&"boolean"==typeof e.muted&&(e.muted=!0)},this.unmute=function(){var e=i.getVideoEl();e&&"boolean"==typeof e.muted&&(e.muted=!1)},this.reset=function(){var e=i.getVideoEl();e&&"number"==typeof e.currentTime&&(e.currentTime=0)},this.fullscreen=function(){window.Tarnhelm.log("Minimal video does not support fullscreen and normalscreen actions.")},this.normalscreen=this.fullscreen,this.minimalVideoListen=function(){var e=this.getVideoEl();e&&"function"==typeof e.addEventListener&&e.addEventListener("play",this.makeVisible)},this.minimalVideoTeardown=function(){var e=this.getVideoEl();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("play",this.makeVisible)},this.initCuepointEngine=function(){var e=i.getVideoEl();e&&(this.cuepointEngine=new ad_design.CuepointEngine({media:e,cuepoints:this.getCuePoints(),observer:this}))},this.on("mount",function(){this.makeInvisible(),this.setVideoEl(this.root.getElementsByTagName("video")[0]),this.setupVideoAttributes(),this.minimalVideoListen(),this.initCuepointEngine()}),this.on("unmount",function(){this.fireSyntheticMediaPlaybackEvent("pause","minimal-video"),this.setMediaEnded(),this.minimalVideoTeardown(),this.cuepointEngine.destroy()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{riot:120}],44:[function(e,t,i){var n,o;n=this,o=function(e){e.tag("panel",'<div class="panel" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><child each="{name, i in opts.data.childNames}" name="{name}"></child></div>',function(e){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions")})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{riot:120}],45:[function(e,t,i){var n,o;n=this,o=function(e){e.tag("reely",'<div id="{this.opts.data.name}" riot-style="{getTagStyleString()}" class="reely-inject-el"></div>',function(e){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("teardown"),this.mixin("video"),this.mixin("zoolander"),this.mixin("action"),this.mixin("action-cuepoint"),this.mixin("action-transitions");var t=this,i=window.Tarnhelm.getDeviceInfo().isMobileDevice?40:20;this.determineControlBarConfig=function(e){if(!e)return{};for(var t=Object.keys(e),i={},n=0;n<t.length;n++){var o=t[n];i[o]=e[o]}return i},this.getButtonSize=function(e){return e&&e.buttonSize?e.buttonSize:i},this.determineSpritesheetsConfig=function(e){var t={buttonSize:this.getButtonSize(e)};return e&&e.png&&(t.png=e.png),t},this.initReely=function(){var e=this.opts.data,t=this.root.getElementsByClassName("reely-inject-el")[0],i=this.getAdIframeZoolander(),n=this.determineControlBarConfig(e.controls),o=this.determineSpritesheetsConfig(e.spritesheets),e=this.determineSpritesheetsConfig(e.overlaySpritesheets),s=this.getAdInstance()&&this.getAdInstance().getContainerFrame();this.reelyPlayer=new ad_design.Reely({injectEl:t,src:this.opts.data.video.url,zoolander:i,slate:this.opts.data.video.slate||"",autoplay:this.opts.data.video.autoplay||!1,autosound:this.opts.data.video.autosound||!1,controlBar:n,spritesheets:o,overlaySpritesheets:e,iframeId:s?s.id:"",playsInline:void 0===this.opts.data.video.playsInline||this.opts.data.video.playsInline,fullscreen:this.opts.data.video.fullscreen||!1})},this.initCuepointEngine=function(){this.cuepointEngine=new ad_design.CuepointEngine({media:this.reelyPlayer.videoEl,cuepoints:this.getCuePoints(),observer:this})},this.play=function(e){e&&e.userInitiated&&(t.isPausedByUser=!1,t.reelyPlayer.isPausedByUser=!1),t.reelyPlayer.play()},this.pause=function(e){e&&e.userInitiated&&(t.isPausedByUser=!0,t.reelyPlayer.isPausedByUser=!0),t.reelyPlayer.pause()},this.mute=function(){t.reelyPlayer.mute()},this.unmute=function(){t.reelyPlayer.unmute()},this.reset=function(){t.reelyPlayer.reset()},this.fullscreen=function(){t.reelyPlayer.fullscreenMode()},this.normalscreen=function(){t.reelyPlayer.normalScreenMode()},this.on("mount",function(){this.initReely(),this.setVideoEl(this.reelyPlayer.videoEl),this.initCuepointEngine()}),this.on("unmount",function(){this.fireSyntheticMediaPlaybackEvent("pause","reely"),this.reelyPlayer.teardown(),this.cuepointEngine.destroy()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{riot:120}],46:[function(o,e,t){var i,n;i=this,n=function(e){e.tag("rotator",'<div class="rotator" riot-style="{getTagStyleString()}"><child name="{activeChildName}"></child></div>',function(e){var t=o("../stores/delegators/wrap.js"),i=o("../stores/retrievers/rotator.js"),n=(this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("rotator"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-transitions"),this.getAdInstance().getAdStore());this.activeChildName=this.opts.data.childNames[this.opts.data.activeIndex],this.setActiveChildName=function(){var e,t=this.opts.data.childNames[this.opts.data.activeIndex];t!==this.activeChildName&&((e=this).activeChildName=void 0,window.setTimeout(function(){e.activeChildName=t,e.update()},1))},this.on("update",this.setActiveChildName),this.hasWrapConfig=function(){return!(!this.opts.data.wrapConfig||!this.opts.data.wrapConfig.enabled)},this.updateWrap=function(){this.hasWrapConfig()&&t.triggerRotatorWrapSwap(this.opts.data,n.getState())},this.resizeAdContainer=function(){var e,t;"expander"===this.opts.data.name&&(e=window.Tarnhelm.getAd(n.getAdId()),t=i.getActiveChildComponent(this.opts.data,n.getComponentLibrary()),e.resizeAdContainer(t.rect))},this.on("update",this.updateWrap),this.on("update",this.resizeAdContainer)})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){n(e)}):void 0!==e&&void 0!==e.exports?(e=o("riot"),n(e)):n(i.riot)},{"../stores/delegators/wrap.js":73,"../stores/retrievers/rotator.js":79,riot:120}],47:[function(t,e,i){var n,o;n=this,o=function(e){t("./graphic.tag"),e.tag("rotatorbutton",'<div class="rotatorbutton" riot-style="{getTagStyleString()}" onclick="{handleClickAndRotatorbuttonClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><graphic data="{graphicData}"></graphic></div>',function(e){var n=this;this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions"),this.handleRotatorbuttonClick=function(e){var t,i;this.isActive()||(t=n.opts.data).rotatorName&&(i={actionName:"route",data:{rotatorConfigs:[{name:t.rotatorName,index:t.rotatorIndex}]}},t.rotatorConfigs&&t.rotatorConfigs.length&&(i.data.rotatorConfigs=i.data.rotatorConfigs.concat(t.rotatorConfigs)),i.data.showComponents=t.showComponents,i.data.hideComponents=t.hideComponents,this.getAdInstance().getActionHandler().trigger(i))},this.handleClickAndRotatorbuttonClick=function(e){this.handleClick(e),this.handleRotatorbuttonClick(e),this.hasAction("click")||this.emitTrackingObject("click","click")},this.getGraphicData=function(){var e=this.opts.data,t={description:e.description,source:e.source,hoverSource:e.hoverSource,fullAdHoverSource:e.fullAdHoverSource,disabledSource:e.disabledSource,rect:{anchorX:"left",anchorY:"top",offsetX:0,offsetY:0,height:e.rect.height,width:e.rect.width}};return this.isActive()&&(t.source=e.activeSource),t},this.isActive=function(){var e=this.getAdInstance().getAdStore().getComponentState(this.opts.data.rotatorName);return e&&this.opts.data.rotatorIndex===e.activeIndex},this.setCursor=function(){this.isActive()?this.removeStyleRule("cursor"):this.addStyleRule("cursor","pointer")},this.setState=function(){this.graphicData=this.getGraphicData(),this.setCursor()},this.setState(),this.on("update",function(){this.setState()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{"./graphic.tag":42,riot:120}],48:[function(l,e,t){var i,n;i=this,n=function(e){e.tag("slider-rotator",'<div class="slider-rotator" riot-style="{getTagStyleString()}"><div class="slide-offset js-offset" riot-style="{getSlideOffsetInitialStyle()}"><div each="{name, i in opts.data.childNames}" class="slide"><child name="{name}"></child></div></div><graphic class="th-slider-arrow prev" if="{this.shouldShowArrowPrev()}" data="{this.opts.data.arrowGraphics.previous}" onclick="{this.onPrevClick}"></graphic><graphic class="th-slider-arrow next" if="{this.shouldShowArrowNext()}" data="{this.opts.data.arrowGraphics.next}" onclick="{this.onNextClick}"></graphic></div>',function(e){var t,o,s,r,i,a,n=l("../../modules/numberUtils.js"),d=(this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("rotator"),this.mixin("action"),this.mixin("action-transitions"),this.mixin("action-touch"),this.resting=!0,this.on("indexChanged",function(){this.startVisibleLoop(),this.handleIndexChanged()}),this.handleIndexChanged=function(){var e={actionName:"video:pause-all:under-ancestor",ancestorName:this.opts.data.name};this.triggerActions([e])},window.Tarnhelm.getDeviceInfo().canTransitionTransforms);d||window.Tarnhelm.log("Slider NOT supporting touch actions; We've determined that we cannot transition transforms."),this.addStyleRule("overflow","hidden"),this.addStyleRule("white-space","nowrap");this.getRestingStateOffset=function(){return this.opts.data.activeIndex*this.opts.data.rect.width*-1},this.getSliderStateData=function(){return{activeIndex:this.opts.data.activeIndex,slideWidth:this.opts.data.rect.width,restingOffset:this.getRestingStateOffset()}},this.getTransitionString=function(e){return"transform "+e+"s cubic-bezier(0.215, 0.610, 0.355, 1.000)"},this.getOffsetString=function(e){return"translate3d("+(e+"px")+",0,0)"},this.getMaxOffset=function(e,t){return this.isAtBeginning()?e+.35*t:e+t},this.getMinOffset=function(e,t){return this.isAtEnd()?e-.35*t:e-t},this.isAtBeginning=function(){return 0===this.opts.data.activeIndex},this.isAtEnd=function(){var e=this.opts.data.childNames.length-1;return this.opts.data.activeIndex===e},this.setOffsetDivStyle=function(e,t){var i=this.root.getElementsByClassName("js-offset")[0];this.setOffsetDivTransition(t,i),i.style.transform=this.getOffsetString(e)},this.setOffsetDivTransition=function(e,t){t=t||this.root.getElementsByClassName("js-offset")[0];t.style.transition=null==e?"none":this.getTransitionString(e)},this.currAnimProps=null,this.sliderHandleTouchStart=function(e){clearTimeout(this.slideCompleteTimeout),this.setOffsetDivTransition(null);var t=this.getSliderStateData();this.currAnimProps={hasMovedOffset:!1,currTouchStartOffset:this.parseCurrentOffset(),maxPan:this.getMaxOffset(t.restingOffset,t.slideWidth),minPan:this.getMinOffset(t.restingOffset,t.slideWidth)},this.startVisibleLoop(),this.emitTrackingObject("intent","touchStart")},this.sliderHandleTouchMove=function(e){var t=this.currAnimProps;!e||e.isVerticalMove?t&&t.hasMovedOffset&&(this.returnToResting(),this.currAnimProps=null):(t.hasMovedOffset=!0,this.getSliderStateData(),e=e.totalDistance.x,e=t.currTouchStartOffset+e,e=n.clamp(e,t.minPan,t.maxPan),this.setOffsetDivStyle(e,null))},this.sliderHandleTouchEnd=function(e){var t,i,n,o;this.currAnimProps=null,e&&!e.isVerticalMove&&(this.emitTrackingObject("intent","touchEnd"),t=this.getSliderStateData(),o=this.parseCurrentOffset(),o=this.getOffsetFromResting(t,o),i=0!==e.velocity.x,o=o<0,n=e.velocity.x<0,!(i&&o!=n)&&(i=o,n=this.testNeedsIndexChange(t,e),o=i&&this.isAtEnd()||!i&&this.isAtBeginning(),n)&&!o?(this.doSlideChange(e,t,i),this.emitTrackingObject("intent","swipe"+(i?"Left":"Right"))):this.returnToResting())},this.doSlideChange=function(e,t,i){var n=i?-1*t.slideWidth:t.slideWidth,t=t.restingOffset+n,n=.85*e.transitionLengthFactor,e=this.determineTransitionLength(t,n),n=(this.setOffsetDivStyle(t,e),i?this.incrementIndex:this.decrementIndex);this.callIndexChangeAfterTransition(n.bind(this),e)},this.callIndexChangeAfterTransition=function(e,t){clearTimeout(this.slideCompleteTimeout),t?this.slideCompleteTimeout=setTimeout(e,1e3*t):(e(),this.stopVisibleLoop())},this.testNeedsIndexChange=function(e,t){var i=!1;return(i=15<Math.abs(t.velocity.x))||(t=this.parseCurrentOffset(),i=.4*e.slideWidth<Math.abs(this.getOffsetFromResting(e,t))),i},this.getOffsetFromResting=function(e,t){return t-e.restingOffset},this.returnToResting=function(){var e=this.getRestingStateOffset(),t=this.determineTransitionLength(e,1.5);this.setOffsetDivStyle(e,t),this.startVisibleLoop()},this.parseCurrentOffset=function(){var e=this.root.getElementsByClassName("js-offset")[0];return e&&e.style&&e.style.transform?(e=e.style.transform.split("translate3d(")[1].split(",")[0],parseInt(e,10)):this.getRestingStateOffset()},this.determineTransitionLength=function(e,t){var i=this.getSliderStateData(),n=this.parseCurrentOffset(),t=t||.85,n=Math.abs(n-e)/i.slideWidth;return n<1&&(t*=n),t},this.getSlideOffsetInitialStyle=function(){var e=this.getSliderStateData().restingOffset,t=this.determineTransitionLength(e),i={height:this.opts.data.rect.height+"px"};return d?(i.transition=this.getTransitionString(t),i.transform=this.getOffsetString(e)):(i.transition=this.getNonTranslateTransitionString(.85),i.left=this.getNonTranslateOffsetString(e)),this.cssStringFromCSSObject(i)},d&&(this.addTouchStartHandler(this.sliderHandleTouchStart),this.addTouchMoveHandler(this.sliderHandleTouchMove),this.addTouchEndHandler(this.sliderHandleTouchEnd)),this.shouldShowArrowPrev=function(){return this.opts.data.arrowGraphics&&this.opts.data.arrowGraphics.previous&&!this.isAtBeginning()},this.shouldShowArrowNext=function(){return this.opts.data.arrowGraphics&&this.opts.data.arrowGraphics.next&&!this.isAtEnd()},this.manualUpdateNonTranslateOffsetDiv=function(e,t){t.style.left=this.getNonTranslateOffsetString(e)},this.getNonTranslateTransitionString=function(e){return"left "+e+"s cubic-bezier(0.215, 0.610, 0.355, 1.000)"},this.getNonTranslateOffsetString=function(e){return e+"px"},this.on("update",function(){var e;d||(e=this.root.getElementsByClassName("js-offset")[0])&&this.manualUpdateNonTranslateOffsetDiv(this.getRestingStateOffset(),e)}),this.onPrevClick=function(){this.decrementIndex(),this.emitTrackingObject("click","clickPrev")},this.onNextClick=function(){this.incrementIndex(),this.emitTrackingObject("click","clickNext")},this.on("mount",function(){this.root.getElementsByClassName("js-offset")[0].addEventListener("transitionend",function(e){this.stopVisibleLoop()}.bind(this)),t=this.opts.data.activeIndex,o=[t],s=this.root.getElementsByClassName("slide"),r=this.root.children[0],this.tags.child&&this.tags.child[t]?(this.tags.child[t].trigger("slideMoveIn"),this.tags.child[t].trigger("slideActivated")):this.tags.child&&this.tags.child.trigger("slideActivated")}),this.on("unmount",function(){this.stopVisibleLoop()}),this.determineVisibleSlides=function(){for(var e=[],t=r.getBoundingClientRect(),i=s.length,n=0;n<i;n++){var o=s[n].getBoundingClientRect();if(o.left<t.right&&o.right>t.left)e.push(n);else if(o.left>t.right)break}return e},this.startVisibleLoop=function(){this.resting&&(this.resting=!1,a())},this.stopVisibleLoop=function(){this.resting||(this.resting=!0,i())},i=function(){isNaN(t)||t===this.opts.data.activeIndex||(this.tags.child[t].trigger("slideDeactivated"),this.tags.child[this.opts.data.activeIndex].trigger("slideActivated"),t=this.opts.data.activeIndex)}.bind(this),a=function(){for(var e=this.determineVisibleSlides(),t=Math.min(e[0],o[0]),i=Math.max(e[e.length-1],o[o.length-1]),n=t;n<=i;n++)-1===e.indexOf(n)&&-1!==o.indexOf(n)?this.tags.child[n].trigger("slideMoveOut"):-1!==e.indexOf(n)&&-1===o.indexOf(n)&&this.tags.child[n].trigger("slideMoveIn");o=e,this.resting||requestAnimationFrame(a)}.bind(this)})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){n(e)}):void 0!==e&&void 0!==e.exports?(e=l("riot"),n(e)):n(i.riot)},{"../../modules/numberUtils.js":22,riot:120}],49:[function(e,t,i){var n,o;n=this,o=function(e){e.tag("youtube",'<div class="youtube" riot-style="{getTagStyleString()}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><div class="youtube_injection"></div></div>',function(e){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("video"),this.mixin("resize"),this.firstStart=!0,this.actionHandler=this.getAdInstance().getActionHandler();var t=this;this.loadYoutubeAPI=function(){window.onYouTubeIframeAPIReady=function(){window.Tarnhelm.triggerGlobalAction({actionName:"api-ready:youtube"})};var e="tarnhelm_yt_script",t=document.getElementById(e);t||((t=document.createElement("script")).id=e,t.src="https://www.youtube.com/iframe_api",(e=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,e))},this.getAutoplayValue=function(){return t.opts.data.video.autoplay?1:0},this.initYoutubePlayer=function(){t.player=new YT.Player(t.root.firstChild.firstChild,{height:t.opts.data.rect.height,width:t.opts.data.rect.width,videoId:t.opts.data.video.id,playerVars:{autohide:1,autoplay:t.getAutoplayValue(),rel:0,showinfo:0,wmode:"transparent"},events:{onStateChange:function(e){e.data===YT.PlayerState.PLAYING&&t.firstStart&&(t.firstStart=!1,t.handleEvent(e,"videoStart")),e.data===YT.PlayerState.ENDED&&t.handleEvent(e,"videoComplete")}}})},this.play=function(){t.player.playVideo()},this.pause=function(){t.player.pauseVideo()},this.mute=function(){t.player.mute()},this.unmute=function(){t.player.unMute()},this.reset=function(){t.player.stopVideo()},this.on("mount",function(){this.initVideoActionReceivers(),this.registerTeardownFunction(this.teardownVideoActionReceivers),window.YT?this.initYoutubePlayer():(this.actionHandler.one("api-ready:youtube",this.initYoutubePlayer),"function"!=typeof window.onYouTubeIframeAPIReady&&this.loadYoutubeAPI())}),this.on("unmount",function(){t.player.destroy()}),this.on("resize",function(){t.player.getIframe().style.width=t.determinedRect.width,t.player.getIframe().style.height=t.determinedRect.height})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(e){o(e)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{riot:120}],50:[function(e,t,i){t.exports={MINIMAL_VIDEO_NAME:"minimal-video",INLINE20_SLOT_NAME:"inline20",GRANTED:"granted",DENIED:"denied",PENDING:"pending"}},{}],51:[function(e,t,i){var e=e("riot"),n={start:"10ms",firstQuartile:"25%",midpoint:"50%",thirdQuartile:"75%",complete:"90%"};e.mixin("action-cuepoint",{init:function(){if(this.cuePoints=[],this.hasCuePointActions()){var e,t=this.getCuePointActions(),i=t.length,n=0;for(this.opts.data.video.viconst;n<i;n++)e={time:t[n].timeString,data:t[n]},this.cuePoints.push(e)}this.addCuePointTracking()},onCuepoint:function(e){this.triggerActions(e.data.actions)},getCuePoints:function(){return this.cuePoints},getCuePointActions:function(){var e=this.opts.data.actions||{};return e&&e.cuePoints?e.cuePoints:[]},hasCuePointActions:function(){return 0<this.getCuePointActions().length},getCuePointAt:function(e){for(var t=0,i=this.cuePoints.length;t<i;t++)if(this.cuePoints[t].time===e)return this.cuePoints[t];return null},addCuePointTracking:function(){var e,t;if(this.opts&&this.opts.data&&this.opts.data.name)for(e in n)(t=this.getCuePointAt(n[e]))||this.cuePoints.push(t={time:n[e],data:{actions:[]}}),t.data.actions=t.data.actions.concat([{actionName:"track:"+this.opts.data.name,eventType:"media",eventSubType:e}]);else console.log("this.opts.data.name is undefined",this)}})},{riot:120}],52:[function(e,t,i){e("riot").mixin("action-swipe",{init:function(){this.attachTouchActions||this.mixin("action-touch"),this.hasTouch&&this.addTouchEndHandler(this.handleSwipeEnd)},handleSwipeEnd:function(e){!e.isMoveY&&e.isSwipe&&(e.totalDistance.x<0?this.handleSwipeActions("swipeleft"):this.handleSwipeActions("swiperight"))},handleSwipeActions:function(e){this.trigger("swipe"),this.trigger(e),this.hasAction("swipe")&&this.triggerActions(this.opts.data.actions.swipe),this.hasAction(e)&&this.triggerActions(this.opts.data.actions[e])}})},{riot:120}],53:[function(e,t,i){var n=e("riot"),o=(e("../../modules/functionUtils.js"),e("../../modules/touchData.js"));n.mixin("action-touch",{init:function(){this.touchStartHandlers=[],this.touchMoveHandlers=[],this.touchEndHandlers=[],this.touchMoveRAF=null,this.hasTouch=window.Tarnhelm.getDeviceInfo().hasTouch,this.hasTouch&&(this.registerTeardownFunction||this.mixin("teardown"),this.registerTeardownFunction(this.detachTouchActions),this.resetTouchData(),this.on("mount",function(){this.attachTouchActions()}),window.Tarnhelm.getIsDebug())&&null!=this.setupTouchDebugVisual&&this.setupTouchDebugVisual()},setupTouchDebugVisual:null,attachTouchActions:function(){this.boundTouchMoveAnimationFrame=this.handleTouchMoveAnimationFrame.bind(this),this.root.addEventListener("touchstart",this.handleTouchStart),this.root.addEventListener("touchmove",this.handleTouchMove),this.root.addEventListener("touchend",this.handleTouchEnd)},detachTouchActions:function(){this.root.removeEventListener("touchstart",this.handleTouchStart),this.root.removeEventListener("touchmove",this.handleTouchMove),this.root.removeEventListener("touchend",this.handleTouchEnd),this.boundTouchMoveAnimationFrame=null,this.throttledHandleTouchMove=null},resetTouchData:function(){this.touchData=null,this.isTouched=!1},stopEvent:function(e){var t=!!this.touchData,i=t&&!!this.touchData.isTouchTypeDetermined,n=t&&!!this.touchData.isVerticalMove;t&&i&&!n&&e&&(e.stopPropagation(),e.preventDefault())},addTouchStartHandler:function(e,t){this._addTouchEventHandler(this.touchStartHandlers,e,t)},addTouchEndHandler:function(e,t){this._addTouchEventHandler(this.touchEndHandlers,e,t)},addTouchMoveHandler:function(e,t){this._addTouchEventHandler(this.touchMoveHandlers,e,t)},_addTouchEventHandler:function(e,t,i){e.push({callback:t,thisArg:i||this})},handleTouchStart:function(e){this.isTouched=!0,this.touchData=new o(e),this.callHandlers(this.touchStartHandlers,this.touchData,e),this.touchMoveRAF=window.requestAnimationFrame(this.handleTouchMoveAnimationFrame)},handleTouchMove:function(e){this.stopEvent(e),this.touchData&&this.touchData.addTouchMoveData(e)},handleTouchMoveAnimationFrame:function(){this.touchData&&(this.callHandlers(this.touchMoveHandlers,this.touchData),this.touchMoveRAF=window.requestAnimationFrame(this.handleTouchMoveAnimationFrame))},handleTouchEnd:function(e){window.cancelAnimationFrame(this.touchMoveRAF),this.touchData&&(this.touchData.finalizeTouchDataOnEnd(e),this.callHandlers(this.touchEndHandlers,this.touchData)),this.resetTouchData()},callHandlers:function(e,t,i){if(e.length){var n=[t,i];if(e.length)for(var o=0;o<e.length;o++)this.callHandler(e[o],n)}},callHandler:function(e,t){e.callback.apply(e.thisArg,t)}})},{"../../modules/functionUtils.js":17,"../../modules/touchData.js":27,riot:120}],54:[function(e,t,i){e("riot").mixin("action-transitions",{init:function(){var e=this,t=this.getAdInstance().getActionHandler();this.hasAction("transitionsOutStart")&&t.on("transition-component-out:"+e.opts.data.name,function(){t.triggerMany(e.opts.data.actions.transitionsOutStart)}),this.hasAction("transitionsOutComplete")&&t.on("transition-component-out:"+e.opts.data.name+":complete",function(){t.triggerMany(e.opts.data.actions.transitionsOutComplete)})}})},{riot:120}],55:[function(e,t,i){e("riot").mixin("action-user",{init:function(){this.hasAction("click")&&this.addStyleRule("cursor","pointer")},handleClick:function(e){this.handleEvent(e,"click")},handleHoverIn:function(e){this.handleEvent(e,"hoverIn")},handleHoverOut:function(e){this.handleEvent(e,"hoverOut")}})},{riot:120}],56:[function(e,t,i){var e=e("riot"),n=["update","updated"];e.mixin("action",{init:function(){var e;this.hasAction("init")&&(e=this.opts.data.actions.init,this.triggerActions(e)),this.on("all",function(e){e&&this.hasAction(e)&&-1===n.indexOf(e)&&(e=this.opts.data.actions[e],this.triggerActions(e))})},handleEvent:function(e,t){return e.preventUpdate=!0,this.hasAction(t)&&(e=this.opts.data.actions[t],this.triggerActions(e),"click"===t?this.emitTrackingObject(t,t):/^video/i.test(t)?this.emitTrackingObject("video",t):this.emitTrackingObject("intent",t)),!0},triggerActions:function(e){this.isDisabledNavigationComponent()?window.Tarnhelm.log('Suppressing actions for navigation component "'+this.opts.data.name+'", navigation is currently disabled.'):this.getAdInstance().getActionHandler().triggerMany(e)},hasAction:function(e){return this.opts.data.actions&&this.opts.data.actions[e]&&this.opts.data.actions[e].length}})},{riot:120}],57:[function(e,t,i){var e=e("riot"),n=["background-attachment","background-image","background-position","background-repeat","background-size"];e.mixin("background",{init:function(){this.setBackground(),this.on("update",this.setBackground)},setBackground:function(){var e=this.opts.data||{},e=e.useAlternateBackground?e.alternateBackground||{}:e.background||{};e.color?this.addStyleRule("background-color",e.color):this.removeStyleRule("background-color"),e.source?(this.addStyleRule("background-image","url("+e.source+")"),e.attachment?this.addStyleRule("background-attachment",e.attachment):this.removeStyleRule("background-attachment"),e.position?this.addStyleRule("background-position",e.position):this.removeStyleRule("background-position"),e.repeat?this.addStyleRule("background-repeat",e.repeat):this.addStyleRule("background-repeat","no-repeat"),e.size?this.addStyleRule("background-size",e.size):this.addStyleRule("background-size",this.getBackgroundSize())):this.removeStyleRules(n)},getBackgroundSize:function(){return this.determinedRect.width+" "+this.determinedRect.height}})},{riot:120}],58:[function(e,t,i){e("riot").mixin("base",{getAdInstance:function(){if(this._adInstance)return this._adInstance;for(var e,t=this;!e;)e=(t=t.parent)._adInstance;return this._adInstance=e},getAdStore:function(){return this.getAdInstance().getAdStore()},getComponentLibrary:function(){return this.getAdStore().getComponentLibrary()},isDisabledNavigationComponent:function(){return!!this.opts.data.isNavigationComponent&&this.getAdInstance().getAdStore().getNavigationComponentsDisabledFlag()},init:function(){var t,e,i="";(i=this.data&&this.data.name?this.data.name:i)&&((e=(t=this).getAdInstance().getActionHandler()).on("track:"+i,function(e){e&&e.eventType?t.emitTrackingObject(e.eventType,e.eventSubType):window.Tarnhelm.log("Tracking event called as an action, track:"+i+", but no eventType was passed. Ignoring.")}),this.on("unmount",function(){e.off("track:"+i)}))},emitTrackingObject:function(e,t,i){var n=this.getAdInstance(),o=n.getTrackingConsumer();if(o){var s,r=n.getContainerFrame().contentDocument,a=(r.hasOwnProperty("ad")&&r.ad.hasOwnProperty("cid")&&r.ad.cid,{unitName:n.getName(),eventType:e,componentName:this.componentData.name,componentPath:this.getComponentPath(),componentType:this.componentData.type,timeElapsed:n.timeSinceInit(),data:{label:this.componentData.description||this.componentData.name,eventSubType:t}});if(i)for(s in i)a.data[s]=i[s];o(a)}},getComponentPath:function(){for(var e=this.getAdInstance().getName(),t=this.componentData.name,i=this.parent,n=this.componentData.name;i.componentData&&i.componentData.name!==e;)n!==i.componentData.name&&(t=i.componentData.name+"."+t,n=i.componentData.name),i=i.parent;return this.getComponentPath=function(){return t},t}})},{riot:120}],59:[function(e,t,i){var n=e("riot"),o=e("../constants").MINIMAL_VIDEO_NAME,s=e("../constants").INLINE20_SLOT_NAME,r=e("../constants").GRANTED,a=e("../constants").DENIED,d=e("../constants").PENDING,e={init:function(){this.setMediaKey=null,this.lastPermission="",this.hasSubscribed=!1,this.shouldObeyMediaInteroperability()&&this.subscribeToMediaNotifications()},getSlotId:function(){var e=this.getAdInstance(),e=e?e.getContainerFrame():null;return e?e.id:""},getAssetName:function(){return this.getSlotId()?this.getSlotId():o},requestPlayback:function(e){if(this.shouldObeyMediaInteroperability()){var t,i=this,e=e||{};if(!this.hasSubscribed)return this.subscribeToMediaNotifications({shouldRequestPlayback:!0});this.lastPermission.toLowerCase()===r&&(t=this.getVideoEl())&&(t.play(),this.setMediaPlay()),this.getBridge().requestPlayback({name:this.getAssetName(),userInitiated:!!e.userInitiated,videoFrame:this.getVideoFrame()}).then(function(e){i.log("requestPlayback success"),i.onMediaPermissionsChanged(e)},function(e){i.log("requestPlayback error: "+JSON.stringify(e))})}else this.getVideoEl().play()},setMediaPlay:function(){this.setStatus("setMediaPlay")},setMediaPaused:function(){this.setStatus("setMediaPaused")},setMediaEnded:function(){this.getBridge()&&this.getBridge().isMediaOrchestratorBridge?this.setStatus("setMediaEnded",{isMinimalVideo:!0}):this.setStatus("setMediaEnded")},setStatus:function(t,e){var i,n,o;this.shouldObeyMediaInteroperability()&&(this.log(t),n=(i=this).getBridge()[t],o={key:this.setMediaKey,permission:this.lastPermission},(e?n(o,e):n(o)).then(function(e){i.log(t+" success")},function(e){i.log(t+" error: "+JSON.stringify(e))}))},subscribeToMediaNotifications:function(e){var t,i,e=!!(e||{}).shouldRequestPlayback;this.hasSubscribed||(t=this.getBridge(),i={onMediaPermissionsChanged:this.onMediaPermissionsChanged.bind(this)},t.isMediaOrchestratorBridge&&(i.name=this.getAssetName()),this.hasSubscribed=t.subscribe(i),this.log("subscribeToMediaNotifications: "+this.hasSubscribed),e&&this.requestPlayback({userInitiated:!1}))},onMediaPermissionsChanged:function(e){if(e&&e.permission&&this.shouldObeyMediaInteroperability()){var t=e.permission.toLowerCase();switch(this.setMediaKey=e.key,this.lastPermission=e.permission,t){case r:this.log("onMediaPermissionsChanged: "+r);var i=this.getVideoEl();i&&!this.isPausedByUser?(i.play(),this.setMediaPlay()):this.log("isPausedByUser: "+this.isPausedByUser+", ignoring "+r+" permission");break;case a:this.log("onMediaPermissionsChanged: "+a),this.pause();break;case d:this.log("onMediaPermissionsChanged: "+d);break;default:this.log("onMediaPermissionsChanged unexpected permission: "+t)}}},getVideoFrame:function(){var e=this.getVideoEl(),t=e?e.getBoundingClientRect():{},i=0,n=(e&&e.ownerDocument&&e.ownerDocument.defaultView&&(i=e.ownerDocument.defaultView.innerWidth),window.top.innerWidth),i=(i-n)/2,n={x:0<i&&this.getSlotId()===s?t.x-i:t.x,y:t.y,width:t.width,height:t.height},i=window.top.Tarnhelm.getDeviceInfo();return this.getBridge().isMediaOrchestratorBridge&&i.isMobileSite&&(e=(i=(t=e.ownerDocument.defaultView)?t.frameElement||t.iframe:null)?i.getBoundingClientRect():{x:0,y:0},n.x+=e.x+window.scrollX,n.y+=e.y+window.scrollY),n}};n.mixin("media-interop",e),t.exports=e},{"../constants":50,riot:120}],60:[function(e,t,i){var n=e("riot"),o=e("../../modules/rectProcessor.js");n.mixin("rect",{init:function(){this.setRect(),this.on("update",this.setRect)},setRect:function(){var e=(this.opts.data||{}).rect||{};this.removeStyleRules(["top","right","bottom","left"]),this.determinedRect=o.process(e),this.addStyleRule("position",this.determinedRect.position),this.addStyleRule(this.determinedRect.anchorX,this.determinedRect.offsetX),this.addStyleRule(this.determinedRect.anchorY,this.determinedRect.offsetY),this.addStyleRule("height",this.determinedRect.height),this.addStyleRule("width",this.determinedRect.width)}})},{"../../modules/rectProcessor.js":24,riot:120}],61:[function(e,t,i){e("riot").mixin("resize",{init:function(){this._isMounted=!1,this._currentWidth=this.opts.data.rect.width,this.on("mount",function(){this._isMounted=!0}),this.on("update",this._checkForResize)},_checkForResize:function(){this._isMounted&&this.opts.data.rect.width!==this._currentWidth&&(this._currentWidth=this.opts.data.rect.width,this.trigger("resize"))}})},{riot:120}],62:[function(e,t,i){e("riot").mixin("rotator",{init:function(){this.registerTeardownFunction||this.mixin("teardown"),this.initRotatorEventHandlers(),this.registerTeardownFunction(this.teardownRotatorEventHandlers)},initRotatorEventHandlers:function(){this.prevActiveIndex=this.activeIndex,this.on("update",this.handleRotatorUpdate)},teardownRotatorEventHandlers:function(){this.off("update",this.handleRotatorUpdate)},incrementIndex:function(){var e={actionName:"rotator:increment-index",componentName:this.opts.data.name};this.triggerActions([e])},decrementIndex:function(){var e={actionName:"rotator:decrement-index",componentName:this.opts.data.name};this.triggerActions([e])},handleRotatorUpdate:function(){var e=this.opts.data.activeIndex,t=this.prevActiveIndex;null!=t&&t!==e&&(this.trigger("indexChanged"),this.emitTrackingObject("intent","navigateRotator",{index:e}),this.hasAction("indexChanged"))&&this.triggerActions(this.opts.data.actions.indexChanged),this.prevActiveIndex=e}})},{riot:120}],63:[function(e,t,i){var e=e("riot"),o={transform:["-webkit-transform","-ms-transform"],"transform-origin":["-webkit-transform-origin","-moz-transform-origin","-ms-transform-origin","-o-transform-origin"],transition:["-webkit-transition","-moz-transition","-o-transition"],filter:["-webkit-filter","-moz-filter","-o-filter"]};e.mixin("styles",{init:function(){this.initTagStyles(),this.addCustomCSSTagStyles(),this.on("update",this.setTagStyleString)},initTagStyles:function(){this.tagStyles={},this.tagStyleString=""},addCustomCSSTagStyles:function(){var e=this.opts.data.css;e&&this.addStyleRules(e)},addStyleRule:function(e,t){this.tagStyles[e]=t;var i=o[e];if(i)for(var n=0;n<i.length;n++)this.tagStyles[i[n]]=t},addStyleRules:function(e){for(var t in e)e.hasOwnProperty(t)&&this.addStyleRule(t,e[t])},removeStyleRule:function(e){delete this.tagStyles[e]},removeStyleRules:function(e){if(e&&e.length)for(var t=0;t<e.length;t++)this.removeStyleRule(e[t])},setVisibilityStyle:function(){null!=this.opts.data.isInvisible&&(this.opts.data.isInvisible?this.addStyleRule("visibility","hidden"):this.addStyleRule("visibility","visible"))},makeInvisible:function(){var e=this.tagStyles.visibility;!e&&"hidden"===e||(this.addStyleRule("visibility","hidden"),this.update())},makeVisible:function(){var e=this.tagStyles.visibility;e&&"visible"!==e&&(this.addStyleRule("visibility","visible"),this.update())},getTagStyleString:function(){var e="";return this.setVisibilityStyle(),e+=this.cssStringFromCSSObject(this.tagStyles)},cssStringFromCSSObject:function(e){var t,i="";for(t in e)e.hasOwnProperty(t)&&(i+=t+":"+e[t]+";");return i},setTagStyleString:function(){this.tagStyleString=this.getTagStyleString()}})},{riot:120}],64:[function(e,t,i){e("riot").mixin("teardown",{init:function(){var e=this;this.teardownQueue=[],this.on("unmount",function(){e.unmountTeardown()})},registerTeardownFunction:function(e,t){this.teardownQueue.push({callback:e,thisArg:t||this})},unmountTeardown:function(){for(var e=0;e<this.teardownQueue.length;e++){var t=this.teardownQueue[e];t.callback.call(t.thisArg)}}})},{riot:120}],65:[function(e,t,i){var n=e("riot"),o=e("../../modules/transitionStyleGenerator.js");n.mixin("transitions",{init:function(){var e,t,i;this.transitionStyles=this.getAllTransitionStyles(),this.hasTransitionsIn()&&this.hasTransitionsIn()&&(this.setTransitionsStartState(this.transitionStyles.in),this.on("mount",function(){this.setTransitionsEndState(this.transitionStyles.in)})),this.hasTransitionsOut()&&(t=(e=this).getAdInstance().getActionHandler(),i="transition-component-out:"+this.opts.data.name,t.on(i,function(){e.setTransitionsStartState(e.transitionStyles.out),e.setTransitionsEndState(e.transitionStyles.out)}))},getAllTransitionStyles:function(){var e=this.opts.data,t={in:{},out:{}};return this.hasTransitionsIn()&&(t.in=o.calculateTransitionStyles(e.transitionsIn)),this.hasTransitionsOut()&&(t.out=o.calculateTransitionStyles(e.transitionsOut)),t},setTransitionsStartState:function(e){this.addStyleRules(e.start)},setTransitionsEndState:function(e){var t;window.requestAnimationFrame?(t=this,window.requestAnimationFrame(function(){window.setTimeout(function(){t.addStyleRules(e.end),t.update()},1)})):(this.addStyleRules(e.end),this.update())},hasTransitionsIn:function(){return this.opts.data.transitionsIn&&this.opts.data.transitionsIn.length},hasTransitionsOut:function(){return this.opts.data.transitionsOut&&this.opts.data.transitionsOut.length}})},{"../../modules/transitionStyleGenerator.js":28,riot:120}],66:[function(e,t,i){var e=e("riot"),r=["play","pause","mute","unmute","reset","fullscreen","normalscreen"];e.mixin("video",{init:function(){this.registerTeardownFunction||this.mixin("teardown")},enforceVideoInterface:function(){for(var e=0;e<r.length;e++)"function"!=typeof this[r[e]]&&window.Tarnhelm.log(this.root.tagName+" failed to implement "+r[e]+"()")},setVideoEl:function(e){this.videoEl=e,this.shouldAutoplay=this.shouldItAutoplay();e="reely"!==this.data.type;this.isPausedByUser=void 0!==this.opts.data.video.autoplay?!this.opts.data.video.autoplay:!e,this.enforceVideoInterface(),this.initVideoElEventHandlers(),this.registerTeardownFunction(this.teardownVideoElEventHandlers),this.initVideoActionReceivers(),this.registerTeardownFunction(this.teardownVideoActionReceivers)},getVideoEl:function(){if(this.videoEl)return this.videoEl;window.Tarnhelm.log(this.root.tagName+" failed to call `setVideoEl` or passed a bad reference.")},initVideoActionReceivers:function(){this._setActionReceivers("on")},teardownVideoActionReceivers:function(){this._setActionReceivers("off")},_setActionReceivers:function(e){for(var t=this.getAdInstance().getActionHandler(),i=t[e].bind(t),n=(i("video:pause-all",this.pause),i("video:mute-all",this.mute),i("video:unmute-all",this.unmute),i("video:reset-all",this.reset),this.data.name),o=0;o<r.length;o++){var s=r[o];i("video:"+s+":"+n,this[s])}},initVideoElEventHandlers:function(){this.boundHandleVideoComplete=this.handleVideoComplete.bind(this),this.boundHandleLoadedMetadata=this.handleLoadedMetadata.bind(this);var e=this.getVideoEl();e&&"function"==typeof e.addEventListener&&(e.addEventListener("ended",this.boundHandleVideoComplete),e.addEventListener("loadedmetadata",this.boundHandleLoadedMetadata)),this.registerTeardownFunction(this.teardownVideoElEventHandlers)},teardownVideoElEventHandlers:function(){var e=this.getVideoEl();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("ended",this.boundHandleVideoComplete)},handleVideoComplete:function(e){this.handleEvent(e,"videoComplete"),this.shouldObeyMediaInteroperability&&this.shouldObeyMediaInteroperability()&&this.setMediaEnded()},handleLoadedMetadata:function(){this.isNonQualifyingVideoForMediaInterop&&this.isNonQualifyingVideoForMediaInterop()&&this.overrideMediaInteroperabilityObedienceForSlot()},shouldItAutoplay:function(){var e=!0;return null!=this.opts.data.video.autoplay&&(e=this.opts.data.video.autoplay),this.opts.data.video.canplaythroughRequired&&(e=!1),this.shouldObeyMediaInteroperability&&this.shouldObeyMediaInteroperability()?(e&&this.requestPlayback({userInitiated:!1}),!1):e},handleCanPlay:function(e,t){return function(){this.initialAutoplay?e.removeEventListener("canplay",this.boundHandleCanPlay):this.shouldObeyMediaInteroperability&&this.shouldObeyMediaInteroperability()?this.requestPlayback({userInitiated:!1}):(this.initialAutoplay=!0,e.play())}},doAutoplay:function(e){this.boundHandleCanPlay=this.handleCanPlay(e,void 0).bind(this),this.initialAutoplay=this.initialAutoplay||!1,e.readyState>=e.HAVE_FUTURE_DATA?this.shouldObeyMediaInteroperability&&this.shouldObeyMediaInteroperability()?this.requestPlayback({userInitiated:!1}):(e.play(),this.initialAutoplay=!0):e.addEventListener("canplay",this.boundHandleCanPlay)},fireSyntheticMediaPlaybackEvent:function(e,t){var i="";try{i=this.getAdInstance().getDomNode().ownerDocument.defaultView.name}catch(e){i="unknown"}window.top.mediaOrchestrator&&window.top.mediaOrchestrator.publish("mediaPlaybackEvent",{type:e,slotName:i,timestamp:Date.now(),dispatcher:t,targetElementId:this.getVideoEl()?this.getVideoEl().id:"unknown"})}})},{riot:120}],67:[function(e,t,i){var n=e("riot"),o=e("../constants").MINIMAL_VIDEO_NAME,e={getBridge:function(){return window.NativeWebBridge||(window.top.ad_utils&&window.top.ad_utils.mediaOrchestratorBridge?window.top.ad_utils.mediaOrchestratorBridge:void 0)},shouldObeyMediaInteroperability:function(){var e;return window.mediaInteroperabilitySlotObeyOverrides&&window.mediaInteroperabilitySlotObeyOverrides[this.getSlotId()]?(this.unsubscribeSlotFromMediaOrchestrator(),!1):(e=window.top.Tarnhelm.getDeviceInfo(),void 0===this.getBridge()||!e||this.isNonQualifyingVideoForMediaInterop()?(this.overrideMediaInteroperabilityObedienceForSlot(),!1):!!e.isIMDbApp||window.top.ad_utils&&window.top.ad_utils.isResponsive())},overrideMediaInteroperabilityObedienceForSlot:function(){window.mediaInteroperabilitySlotObeyOverrides||(window.mediaInteroperabilitySlotObeyOverrides={}),window.mediaInteroperabilitySlotObeyOverrides[this.getSlotId()]=!0,this.unsubscribeSlotFromMediaOrchestrator()},unsubscribeSlotFromMediaOrchestrator:function(){var e;this.hasSubscribed&&(this.hasSubscribed=!1,this.setMediaEnded(),e=this.getBridge())&&e.updateAssetFrameLocation&&e.updateAssetFrameLocation(this.getSlotId(),{x:0,y:0,width:0,height:0})},isNonQualifyingVideoForMediaInterop:function(){return void 0!==this.data.video.useMediaInterop?!this.data.video.useMediaInterop:this.data.type===o&&this.videoEl&&this.videoEl.duration<=10}};n.mixin("weblab",e),t.exports={WeblabMixin:e}},{"../constants":50,riot:120}],68:[function(e,t,i){e("riot").mixin("zoolander",{getAdIframeZoolander:function(){var e=this.getAdInstance().getContainerFrame().contentWindow.document;return new ad_design.Zoolander({document:e,id:this.opts.data.name,prefixId:"#"+this.opts.data.name})}})},{riot:120}],69:[function(i,e,t){var o=i("riot"),s=i("../modules/events/adEvent.js"),n=i("../modules/injectCSS.js"),r=i("../modules/url.js");function a(e,t,i){var n=e.getActionHandler(),t=(i?n.trigger({actionName:s.ASSET_PRELOAD_TIMEOUT}):t&&n.trigger({actionName:s.ASSET_PRELOAD_FINISH}),i=e,o.mount(i.getDomNode(),{adInstance:i}),i.initAfterMount(),n.trigger({actionName:s.AD_DISPLAYED}),e.getAdStore().getSecondaryAssetUrls());r.preloadUrls(t)}i("./app.tag"),e.exports={injectStyles:function(e){var t=i("../../css/ad.min.css.js");n.beforeNode(t,e)},mountAd:function(e){var t,i=e.getAdStore().getPrimaryAssetUrls();i&&i.length?(e.getActionHandler().trigger({actionName:s.ASSET_PRELOAD_START}),t=a.bind(null,e,!0),r.preloadUrlsWithCallback(i,t)):a(e)}}},{"../../css/ad.min.css.js":3,"../modules/events/adEvent.js":12,"../modules/injectCSS.js":18,"../modules/url.js":29,"./app.tag":32,riot:120}],70:[function(e,t,i){e("riot");var n=e("../../modules/countdownTimer.js"),r=e("../../modules/objectUtils.js"),o=e("./retrievers/asset.js"),s=e("./retrievers/background.js"),a=e("./retrievers/component.js"),d=e("./retrievers/dateRange.js"),l=e("./retrievers/rect.js"),u=(e("./retrievers/scale.js"),e("./retrievers/wrap.js")),c=e("./delegators/router.js"),h=(e("./delegators/transition.js"),e("./delegators/wrap.js")),p=["route","rotator:show-index","rotator:show-named-child","rotator:increment-index","rotator:decrement-index","minimize-ad","maximize-ad","hide-component","show-component"],m=["actions","background","css","defaultLink","frameProperties","frequencyCappedInit","id","isScalable","name","trackingConfigs"],f=["rect","frameProperties","spriteSheetDimensions"],g=["background","alternateBackground"],v="_orig",e="video",_="rotator",y="graphic",b="countdown",A={countdown:b,"countdown-number-text":b,"countdown-number-custom":b,rotator:_,"slider-rotator":_,graphic:y,rotatorbutton:y,reely:e,alphalfa:e,"minimal-video":e};function w(e,i,t){var n=this;this._adJson=e,this._options=t,this.actionHandler=i,this.componentNameIterator=0,this.setInitialState(e),this.initComponentTree(this._adJson),this.scaleAdToWidth(t.adWidth),this.initCountdownTimers(),i.on(p.join(" "),function(e,t){n.handleRoutingAction(t)}),i.on("set-wrap-background",function(e){e=n.state.wrapLibrary[e.wrapName];h.triggerWrapSwap(e)}),i.on("make-invisible",function(e){e=n.state.componentLibrary[e.componentName];e.isInvisible||(e.isInvisible=!0,i.trigger({actionName:"ad-state-updated"}))}),i.on("make-visible",function(e){e=n.state.componentLibrary[e.componentName];null!=e.isInvisible&&e.isInvisible&&(e.isInvisible=!1,i.trigger({actionName:"ad-state-updated"}))}),i.on("set-alternate-background",function(e){n.state.componentLibrary[e.componentName].useAlternateBackground=!0,i.trigger({actionName:"ad-state-updated"})}),i.on("unset-alternate-background",function(e){n.state.componentLibrary[e.componentName].useAlternateBackground=!1,i.trigger({actionName:"ad-state-updated"})}),i.on("scale-ad-to-width",function(e){e&&e.data&&e.data.width?n.scaleAdToWidth(e.data.width):window.Tarnhelm.log('Cannot scale ad, action "scale-ad-to-width" did not provide a valid width. Action:',e)}),i.on("enable-navigation-components",function(e){n.state.navigationComponentsDisabled&&(n.state.navigationComponentsDisabled=!1,i.trigger({actionName:"ad-state-updated"}))}),i.on("disable-navigation-components",function(e){n.state.navigationComponentsDisabled||(n.state.navigationComponentsDisabled=!0,i.trigger({actionName:"ad-state-updated"}))}),i.on("trigger-action-collection",function(e){var t;e.collectionName?(t=n.state.actions.collections[e.collectionName])&&t.length?i.triggerMany(t):window.Tarnhelm.log('Collection "'+e.collectionName+'" was not found in ad "'+n.state.name+'"'):window.Tarnhelm.log("Unable to trigger a collection of actions, missing collectionName")})}w.prototype={setInitialState:function(e){this.state=this.getStaticAdData(e),this.state.actions=this.state.actions||{},this.state.actions.collections=this.state.actions.collections||{},this.state.navigationComponentsDisabled=!1,this.state.scaleData={currentScale:1,currentWidth:this.state.frameProperties.width,pixelDensity:window.devicePixelRatio||1},this.state.countdownTimers={},this.state.componentLibrary={},this.state.componentNamesByType={},this.state.componentNamesByCategory={},this.state.activeSortedDateRanges=d.getActiveSortedDateRanges(window.Tarnhelm.getNowTime(),e.dateRanges),this.state.assetLibrary=this.buildAssetLibrary(),this.state.wrapLibrary=u.generateWrapLibrary(e.wraps,this.state.assetLibrary)},getStaticAdData:function(e){for(var t={},i=0;i<m.length;i++){var n=m[i];t[n]=e[n]}return r.clone(t)},buildAssetLibrary:function(){return o.generateAssetLibrary(this._adJson.assets,this.state.activeSortedDateRanges,this.state.scaleData.currentScale,this.state.scaleData.pixelDensity)},initComponentTree:function(e,t){var i,n,o=[];if(t&&t.length?n=t[t.length-1]:t=[],e.children&&e.children.length){t.push(e);for(var s=0;s<e.children.length;s++)o.push(e.children[s].name),this.initComponentTree(e.children[s],t);t.pop()}n?(i=r.clone(e)).parentName=n.name:i=this.state,delete i.children,i.childNames=o,this.initComponent(i,t),n&&this.addToComponentLibrary(i)},initComponent:function(e,t){e.isHidden=!!e.isHidden,this.storeOriginalValues(e,f),this.storeOriginalValues(e,g),e.arrowGraphics&&(this.inheritDefaultArrowValues(e.arrowGraphics),this.storeOriginalValues(e.arrowGraphics.previous,f),this.storeOriginalValues(e.arrowGraphics.next,f));var i=this.componentTypeInitters[e.type];"function"==typeof i&&i.call(this,e,t);i=this.componentCategoryInitters[A[e.type]];"function"==typeof i&&i.call(this,e,t),this.setComponentAssets(e)},storeOriginalValues:function(e,t){for(var i=0;i<t.length;i++){var n=t[i],o=e[n];o&&(e[n+v]=l.cloneRect(o))}},componentTypeInitters:{"countdown-number-text":function(e,t){var i={};t&&t.length&&(i=t[t.length-1]),void 0===e.targetDate&&(e.targetDate=i.targetDate),void 0===e.padZeros&&(e.padZeros=i.padZeros)},"countdown-number-custom":function(e,t){var i={};t&&t.length&&(i=t[t.length-1]),void 0===e.targetDate&&(e.targetDate=i.targetDate),void 0===e.padZeros&&(e.padZeros=i.padZeros),void 0===e.spritesheet&&(e.spritesheet=i.spritesheet),void 0===e.showAfterEnd&&(e.showAfterEnd=i.showAfterEnd)},reely:function(e,t){var i;e.controls&&(i=l.cloneRectAsPercentageValues(e.controls,e.rect),r.shallowMerge(e.controls,i))},"slider-rotator":function(e,t){this.componentTypeInitters._initArrowGraphics(e,t)},gallery:function(e,t){this.componentTypeInitters._initArrowGraphics(e,t)},_initArrowGraphics:function(e,t){e.arrowGraphics&&e.arrowGraphics.next&&e.arrowGraphics.previous||(window.Tarnhelm.log("Requirements not met! "+e.type+" requires arrowGraphics properties!"),e.arrowGraphics={},e.arrowGraphics.previous={css:{background:"red"},rect:{anchorX:"left",offsetX:5,offsetY:5,width:40,height:40}},e.arrowGraphics.next={css:{background:"red"},rect:{anchorX:"right",offsetX:5,offsetY:5,width:40,height:40}})}},componentCategoryInitters:{countdown:function(e,t){this.addCountdownTimer(e.targetDate,e.name)},rotator:function(e,t){e.activeIndex=parseInt(e.activeIndex,10)||0},video:function(e,t){a.hasAncestorOfType(e,"slider-rotator",t)&&(e.video.autoplay=!1)}},inheritDefaultArrowValues:function(e){var t,i,n;e&&e.previous&&e.next&&(t=e.previous,i=e.next,e.defaultArrow)&&(n=e.defaultArrow,r.mergeDefaults(t.rect,n.rect),r.mergeDefaults(i.rect,n.rect),r.mergeDefaults(t,n),r.mergeDefaults(i,n),e.flippable)&&(i.css=i.css||{},i.css.transform=i.css.transform||"",i.css.transform+=" scaleX(-1)")},addCountdownTimer:function(e,t){this.state.countdownTimers[e]||(this.state.countdownTimers[e]={countdownTimer:new n(e),listenerComponents:[]}),this.state.countdownTimers[e].listenerComponents.push(t)},initCountdownTimers:function(){for(var e=Object.keys(this.state.countdownTimers),t=0;t<e.length;t++){var i=this.state.countdownTimers[e[t]];this.initCountdownTimer(i)}},initCountdownTimer:function(t){var i=this,e=t.countdownTimer;e.on("tick",function(e){i.setComponentsTimerState(t.listenerComponents,e),i.actionHandler.trigger({actionName:"ad-state-updated"})});for(var n=0;n<t.listenerComponents.length;n++)this.state.componentLibrary[t.listenerComponents[n]].remaining=e.getRemainingValues(e.getMillisecondsRemaining())},setComponentsTimerState:function(e,t){for(var i=0;i<e.length;i++)this.state.componentLibrary[e[i]].remaining=t},setComponentAssets:function(e){switch(e.background&&e.background.asset&&r.shallowMerge(e.background,o.getGraphicAssetSources(e.background,this.state.assetLibrary)),e.alternateBackground&&e.alternateBackground.asset&&r.shallowMerge(e.alternateBackground,o.getGraphicAssetSources(e.alternateBackground,this.state.assetLibrary)),e.type){case"animaniac":case"graphic":case"rotatorbutton":r.shallowMerge(e,o.getGraphicAssetSources(e,this.state.assetLibrary));break;case"gallery":case"slider-rotator":e.arrowGraphics&&e.arrowGraphics.previous&&e.arrowGraphics.next&&(r.shallowMerge(e.arrowGraphics.previous,o.getGraphicAssetSources(e.arrowGraphics.previous,this.state.assetLibrary)),r.shallowMerge(e.arrowGraphics.next,o.getGraphicAssetSources(e.arrowGraphics.next,this.state.assetLibrary)));break;case"alphalfa":case"reely":case"minimal-video":r.shallowMerge(e.video,o.getVideoAssetSources(e.video,this.state.assetLibrary))}},addToComponentLibrary:function(e){var t=e.name;this.state.componentLibrary[t]&&(t+="__"+ ++this.componentNameIterator,window.Tarnhelm.log('More than one component exists with name"'+e.name+'", renaming to "'+t+'"')),e.name=t,this.state.componentLibrary[t]=e,this.addToNamesByType(e.type,e.name),this.addToNamesByCategory(e.type,e.name)},addToNamesByType:function(e,t){this._addToNames(this.state.componentNamesByType,e,t)},addToNamesByCategory:function(e,t){e=A[e];e&&this._addToNames(this.state.componentNamesByCategory,e,t)},_addToNames:function(e,t,i){return e[t]||(e[t]=[]),e[t].push(i),e},handleRoutingAction:function(e){if(this.state.isTransitioning)window.Tarnhelm.log('Transition in progress, ignoring action "'+e.actionName+'"');else switch(e.actionName){case"route":c.route(e.data,this.state.componentLibrary,this.state);break;case"rotator:show-index":c.routeRotatorToIndex(e.componentName,e.data.index,this.state.componentLibrary,this.state);break;case"rotator:show-named-child":c.routeRotatorToNamedChild(e.componentName,e.data.childName,this.state.componentLibrary,this.state);break;case"rotator:increment-index":c.routeRotatorToIncrementedIndex(e.componentName,this.state.componentLibrary,this.state);break;case"rotator:decrement-index":c.routeRotatorToDecrementedIndex(e.componentName,this.state.componentLibrary,this.state);break;case"minimize-ad":c.routeRotatorToNamedChild("expander","minimized",this.state.componentLibrary,this.state);break;case"maximize-ad":c.routeRotatorToNamedChild("expander","maximized",this.state.componentLibrary,this.state);break;case"hide-component":c.route({hideComponents:[e.componentName]},this.state.componentLibrary,this.state);break;case"show-component":c.route({showComponents:[e.componentName]},this.state.componentLibrary,this.state)}},scaleAdToWidth:function(e){if(this.state.isScalable&&e)if(e===this.state.frameProperties.width)window.Tarnhelm.log('Ad "'+this.state.name+'" is already '+e+"px wide, not rescaling");else{this.updateScaleData(e),this.state.assetLibrary=this.buildAssetLibrary(),r.shallowMerge(this.state.frameProperties,l.getScaledRect(this.state.frameProperties_orig,this.state.scaleData.currentScale));for(var t=Object.keys(this.state.componentLibrary),i=0;i<t.length;i++){var n=t[i],n=this.state.componentLibrary[n];this.scaleBasedOnOriginalValues(n,f,l.getScaledRect),this.scaleBasedOnOriginalValues(n,g,s.getScaledBackground),n.arrowGraphics&&(this.scaleBasedOnOriginalValues(n.arrowGraphics.previous,f,l.getScaledRect),this.scaleBasedOnOriginalValues(n.arrowGraphics.next,f,l.getScaledRect)),this.setComponentAssets(n)}this.actionHandler.trigger({actionName:"resize-ad-container",data:{rect:this.state.frameProperties}}),this.actionHandler.trigger({actionName:"ad-state-updated"})}},scaleBasedOnOriginalValues:function(e,t,i){for(var n=0;n<t.length;n++){var o=t[n];e[o]&&r.shallowMerge(e[o],i(e[o+v],this.state.scaleData.currentScale))}},updateScaleData:function(e){this.state.scaleData.currentScale=e/this.state.frameProperties_orig.width,this.state.scaleData.currentWidth=e},getState:function(){return this.state},getComponentState:function(e){return this.state.componentLibrary[e]},getComponentLibrary:function(){return this.state.componentLibrary},getComponentNamesByType:function(e){var t=this.state.componentNamesByType[e];return t||window.Tarnhelm.log("Requested names for a component type with nothing indexed: ",e),t||[]},getComponentNamesByCategory:function(e){var t=this.state.componentNamesByCategory[e];return t||window.Tarnhelm.log("Requested names for a component category with nothing indexed: ",e),t||[]},getAdId:function(){return this.state.id},getAdName:function(){return this.state.name},requiresAutoplay:function(){return this.state.frequencyCappedInit&&this.state.frequencyCappedInit.actions&&this.state.frequencyCappedInit.actions.length},getFrequencyCappedInitActions:function(){return this.state.frequencyCappedInit&&this.state.frequencyCappedInit.actions?this.state.frequencyCappedInit.actions:[]},getPrimaryAssetUrls:function(){return o.getPreloadAssetUrls("primary",this.state.assetLibrary)},getSecondaryAssetUrls:function(){return o.getPreloadAssetUrls("secondary",this.state.assetLibrary)},getNavigationComponentsDisabledFlag:function(){return this.state.navigationComponentsDisabled}},t.exports=w},{"../../modules/countdownTimer.js":9,"../../modules/objectUtils.js":23,"./delegators/router.js":71,"./delegators/transition.js":72,"./delegators/wrap.js":73,"./retrievers/asset.js":74,"./retrievers/background.js":75,"./retrievers/component.js":76,"./retrievers/dateRange.js":77,"./retrievers/rect.js":78,"./retrievers/scale.js":80,"./retrievers/wrap.js":82,riot:120}],71:[function(e,t,i){var g=e("../retrievers/component.js"),v=e("./transition.js"),_=e("../retrievers/rect.js"),y=e("../retrievers/rotator.js"),b=e("../../../modules/objectUtils.js");t.exports={route:function(e,i,n){for(var t=e.rotatorConfigs||[],o=e.hideComponents||[],e=e.showComponents||[],s=window.Tarnhelm.getAd(n.id).getActionHandler(),r=[],a=!1,d=[],l=0;l<t.length;l++){var u=t[l],c=i[u.name];c&&u.childName&&null!=u.index&&(u.index=y.findNamedChildIndex(u.name,u.childName,i)),c&&c.activeIndex!==u.index&&(d.push(u),"expander"===c.name&&(a=!0),c.isHidden||r.push(y.getActiveChildName(c)))}var h=g.getHiddenComponentNames(e,i),p=g.getUnhiddenComponentNames(o,i),r=r.concat(p);if(d.length||p.length||h.length){for(var m,f=[],l=0;l<r.length;l++)f=f.concat(g.buildTransitionsOutComponentList(r[l],i));f.length?(m=this,n.isTransitioning=!0,v.triggerTransitionsOut(f,i,s,function(){var e,t=y.mapRotatorConfigsToComponentName(d);b.shallowMergeMany(i,t),a&&(t=n.componentLibrary.expander,e=y.getActiveChildComponent(t,n.componentLibrary),e=_.getDimensions(e.rect),b.shallowMerge(n.frameProperties,e),b.shallowMerge(t.rect,e)),m.setComponentHiddenStates(p,i,!0),m.setComponentHiddenStates(h,i,!1),n.isTransitioning=!1,s.trigger({actionName:"ad-state-updated"})})):(e=y.mapRotatorConfigsToComponentName(d),b.shallowMergeMany(i,e),a&&(o=n.componentLibrary.expander,e=y.getActiveChildComponent(o,n.componentLibrary),e=_.getDimensions(e.rect),b.shallowMerge(n.frameProperties,e),b.shallowMerge(o.rect,e)),this.setComponentHiddenStates(p,i,!0),this.setComponentHiddenStates(h,i,!1),s.trigger({actionName:"ad-state-updated"}))}},routeRotatorToIndex:function(e,t,i,n){this.route({rotatorConfigs:[{name:e,index:t}]},i,n)},routeRotatorToIncrementedIndex:function(e,t,i){var n=y.getIncrementedIndex(t[e]);this.routeRotatorToIndex(e,n,t,i)},routeRotatorToDecrementedIndex:function(e,t,i){var n=y.getDecrementedIndex(t[e]);this.routeRotatorToIndex(e,n,t,i)},routeRotatorToNamedChild:function(e,t,i,n){t=y.findNamedChildIndex(e,t,i);this.routeRotatorToIndex(e,t,i,n)},setComponentHiddenStates:function(e,t,i){for(var n=0;n<e.length;n++)t[e[n]].isHidden=!!i}}},{"../../../modules/objectUtils.js":23,"../retrievers/component.js":76,"../retrievers/rect.js":78,"../retrievers/rotator.js":79,"./transition.js":72}],72:[function(e,t,i){e("../../../modules/transitionStyleGenerator.js");var s=e("../retrievers/transition.js");t.exports={triggerTransitionsOut:function(t,e,i,n){for(var e=s.getMaxTransitionOutTime(t,e),o=0;o<t.length;o++)i.trigger({actionName:"transition-component-out:"+t[o]});window.setTimeout(function(){"function"==typeof n&&n();for(var e=0;e<t.length;e++)i.trigger({actionName:"transition-component-out:"+t[e]+":complete"})},e)}}},{"../../../modules/transitionStyleGenerator.js":28,"../retrievers/transition.js":81}],73:[function(e,t,i){var n=e("../retrievers/wrap.js");e("../retrievers/rotator.js");t.exports={triggerRotatorWrapSwap:function(e,t){var i=n.getWrapNameFromRotator(e,t.componentLibrary);i?(t=n.getWrapData(i,t.wrapLibrary))?this.triggerWrapSwap(t):window.Tarnhelm.log('Cannot trigger a wrap swap for rotator "'+e.name+'" and wrapName "'+i+'", could not find a matching wrap config'):window.Tarnhelm.log('Cannot trigger a wrap swap for rotator "'+e.name+'", could not get the wrap name')},triggerWrapSwap:function(e){e=n.generateWrapAction(e);window.Tarnhelm.triggerTopAction(e)}}},{"../retrievers/rotator.js":79,"../retrievers/wrap.js":82}],74:[function(e,t,i){var n={image:!0,video:!0},d={image:"url",video:"url"},l={video:"source",image:"source"},u={graphic:[{src:"asset",dest:"source"},{src:"activeAsset",dest:"activeSource"},{src:"hoverAsset",dest:"hoverSource"},{src:"fullAdHoverAsset",dest:"fullAdHoverSource"},{src:"disabledAsset",dest:"disabledSource"}],video:[{src:"asset",dest:"url"}]},a={video:!0},c={primary:!0,secondary:!0};t.exports={generateAsset:function(e,t,i){t=this.getCurrentDatedAsset(e,t),t=this.generateScaledAsset(t,e.type,i);return t?t.preload=e.preload:window.Tarnhelm.log('Asset "'+e.name+'" is not configured correctly'),t},generateAssetLibrary:function(e,t,i,n){for(var o={},s=Object.keys(e),r=this.getAssetScale(i,n),a=0;a<s.length;a++){var d=s[a],l=e[d],l=this.updateDeprecatedAssetSyntax(l),l=this.generateAsset(l,t,r);l?o[d]=l:window.Tarnhelm.log('There was a problem with asset "'+d+'", Tarnhelm was unable to initialize it')}return o},generateScaledAsset:function(e,t,i){for(var n={},o=this.getValidatedAssetType(t),s=d[o],r=i;0<r;r--){var a=this.getScaledAssetUrlKey(s,r);if(e[a])return n[l[o]]=e[a],n.type=o,n}},getCurrentDatedAsset:function(e,t){if(t&&t.length&&e.dateOverrides)for(var i=t.length-1;-1<i;i--){var n=t[i].name;if(e.dateOverrides[n])return e.dateOverrides[n]}return e},getValidatedAssetType:function(e){return n[e]?e:"image"},getScaledAssetUrlKey:function(e,t){return"number"==typeof t&&1<t?e+parseInt(t,10)+"x":e},getAssetScale:function(e,t){return Math.ceil(Math.abs(e*t))},getAssetSource:function(e,t){t=t[e];if(t){var e=this.getAssetSourceKey(t.type),i=t[e];if(i)return i;window.Tarnhelm.log('Error, asset "'+t+'" is missing its source, prop "'+e+'"')}else window.Tarnhelm.log('Error, asset named "'+t+'" does not exist')},getAssetSourceKey:function(e){e=this.getValidatedAssetType(e);return l[e]},getMappedAssetSources:function(e,t,i){var n={};if(e)if(t)if(i&&u[i])for(var o=u[i],s=0;s<o.length;s++){var r,a=o[s];e[a.src]&&(r=this.getAssetSource(e[a.src],t))&&(n[a.dest]=r)}else window.Tarnhelm.log('Cannot get assets, componentType "'+i+'" is not supported');else window.Tarnhelm.log("Cannot get assets, assetLibrary was not provided");else window.Tarnhelm.log("Cannot get assets, component was not provided");return n},getGraphicAssetSources:function(e,t){return this.getMappedAssetSources(e,t,"graphic")},getVideoAssetSources:function(e,t){return this.getMappedAssetSources(e,t,"video")},getPreloadAssetUrls:function(e,t){var i=[];if("string"==typeof e&&c[e])for(var n=Object.keys(t),o=0;o<n.length;o++){var s=n[o],r=t[s];r.preload!==e||a[r.type]||this.getAssetSource(s,t)&&i.push(r.source)}else window.Tarnhelm.log('Problem preloading assets, "'+e+'" should be "primary" or "secondary"');return i},updateDeprecatedAssetSyntax:function(e){var t,i,n={};for(t in e)if("fileName"===t)n.url=e[t]+".mp4";else if("dateOverrides"===t){var o=e[t];for(i in o)o[i]=this.updateDeprecatedAssetSyntax(o[i]);n.dateOverrides=o}else n[t]=e[t];return n}}},{}],75:[function(e,t,i){var l=e("./scale.js"),u=["position","size"],c=/\s+/;t.exports={getScaledBackground:function(e,t){if("object"==typeof e){for(var i={},n=0;n<u.length;n++){var o=u[n],s=e[o];if(s){for(var r=s.split(c),a=0;a<r.length;a++){var d=r[a];"number"==typeof l.getRawDimension(d)&&(r[a]=l.getDimensionWithUnit(l.getScaledDimension(l.getRawDimension(d),t)))}i[o]=r.join(" ")}}return i}window.Tarnhelm.log('Cannot scale, "background" is not an object:',e)},cloneBackground:function(e){for(var t={},i=0;i<u.length;i++){var n=u[i];e[n]&&(t[n]=e[n])}return t}}},{"./scale.js":80}],76:[function(e,t,i){var r=e("./rotator.js");t.exports={buildTransitionsOutComponentList:function(e,t){var i=[],n=t[e];if(n&&!n.isHidden&&(n.transitionsOut&&n.transitionsOut.length&&i.push(n.name),n.childNames)&&n.childNames.length)if("rotator"===n.type)e=r.getActiveChildComponent(n,t),i=i.concat(this.buildTransitionsOutComponentList(e.name,t));else for(var o=0;o<n.childNames.length;o++){var s=t[n.childNames[o]];s.isHidden||(i=i.concat(this.buildTransitionsOutComponentList(s.name,t)))}return i},filterComponentsByPropertyValue:function(e,t,i,n){for(var o=[],s=0;s<e.length;s++){var r=e[s],a=t[r];a&&a[i]===n&&o.push(r)}return o},filterComponentsByParentNode:function(e,t){for(var i={},n=0;n<e.length;n++)i[e[n]]=1;for(var o=[],n=0;n<e.length;n++){var s=!1,r=t[e[n]];if(r){for(;r.parentName&&!s;)i[(r=t[r.parentName]).name]&&(s=!0);s||o.push(e[n])}}return o},isDescendantOfType:function(e,t,i){for(var n=i[e];n&&n.parentName;)if((n=i[n.parentName])&&n.type===t)return!0;return!1},hasAncestorOfType:function(e,t,i){if(i&&i.length)for(var n=i.length-1;0<=n;n--)if(i[n].type===t)return!0;return!1},hasAncestorOfName:function(e,t,i){e=i[e].parentName;return this._hasAncestorOfNameRecursive(t,e,i)},_hasAncestorOfNameRecursive:function(e,t,i){t=i[t];return!!t&&(t.name===e||this._hasAncestorOfNameRecursive(e,t.parentName,i))},getHiddenComponentNames:function(e,t){return this.filterComponentsByPropertyValue(e,t,"isHidden",!0)},getUnhiddenComponentNames:function(e,t){return this.filterComponentsByPropertyValue(e,t,"isHidden",!1)}}},{"./rotator.js":79}],77:[function(e,t,i){t.exports={compareDateRanges:function(e,t){e=new Date(e.start),t=new Date(t.start),e=e.getTime(),t=t.getTime();return e<t?-1:t<e?1:0},getActiveSortedDateRanges:function(e,t){var i=[];if(!t||!t.length)return i;for(var n=0;n<t.length;n++)e>=new Date(t[n].start).getTime()&&i.push(t[n]);return i.sort(this.compareDateRanges)}}},{}],78:[function(e,t,i){var l=e("./scale.js"),r=["offsetX","offsetY","width","height"],u={offsetX:"width",offsetY:"height",width:"width",height:"height"};t.exports={getDimensions:function(e){return{height:e.height,width:e.width}},getScaledRect:function(e,t){if("object"==typeof e){for(var i={},n=0;n<r.length;n++){var o=r[n],s=e[o];s&&"number"==typeof l.getRawDimension(s)&&(i[o]=l.getScaledDimension(l.getRawDimension(s),t))}return i}window.Tarnhelm.log('Cannot scale, "rect" is not an object:',e)},cloneRect:function(e){for(var t={},i=0;i<r.length;i++){var n=r[i];e[n]&&(t[n]=e[n])}return t},cloneRectAsPercentageValues:function(e,t){t.width;for(var i={},n=Object.keys(u),o=0;o<n.length;o++){var s,r=n[o],a=u[r],d=l.getRawDimension(e[r]);d&&((s=l.getRawDimension(t[a]))||window.Tarnhelm.log('Could not scale rect value for "'+r+'", parent rect value for "'+a+'" is missing'),"number"==typeof d&&("number"==typeof s?d=Math.round(d/s*100)+"%":window.Tarnhelm.log('Could not scale rect value for "'+r+'", parent rect value for "'+a+'" is not a pixel value')),i[r]=d)}return i}}},{"./scale.js":80}],79:[function(e,t,i){t.exports={isValidRotator:function(e){return e&&(t=e).childNames&&0<t.childNames.length&&0<=(t=e).activeIndex&&t.activeIndex<t.childNames.length;var t},getActiveChildName:function(e){var t;return(t=this.isValidRotator(e)?e.childNames[e.activeIndex]:t)||window.Tarnhelm.log('Unable to find active child name for rotator "'+e.name+'"'),t},getActiveChildComponent:function(e,t){var i,e=this.getActiveChildName(e);return i=e?t[e]:i},mapRotatorConfigsToComponentName:function(e){for(var t={},i=0;i<e.length;i++){var n=e[i];t[n.name]={activeIndex:n.index}}return t},findNamedChildIndex:function(e,t,i){var n=i[e];if(n){if(n&&n.childNames&&n.childNames.length)for(var o=0;o<n.childNames.length;o++)if(n.childNames[o]===t)return o;return window.Tarnhelm.log("Requested rotator:show-named-child for a non existent childName. rotatorName:",e," childName: ",t),n.activeIndex}window.Tarnhelm.log("Requested rotator:show-named-child for a non existent rotator . rotator:",e)},getIncrementedIndex:function(e){if(this.isValidRotator(e)){var t=e.activeIndex;if(t+1<=e.childNames.length-1)return t+1}return 0},getDecrementedIndex:function(e){var t;return this.isValidRotator(e)?(t=e.activeIndex,e=e.childNames.length-1,0<=t-1?t-1:e):0}}},{}],80:[function(e,t,i){var n=new RegExp(/^\-?\d*(\.\d*)?(px)?$/);t.exports={getScaledDimension:function(e,t){if("number"==typeof e&&"number"==typeof t)return Math.ceil(e*t);window.Tarnhelm.log("getScaledDimension() failed, both args were not numbers:",e,t)},getRawDimension:function(e){return"string"!=typeof e&&"number"!=typeof e?(window.Tarnhelm.log("Cannot get raw dimension from invalid value: ",e),e):(e=e.toString(),n.test(e)?parseFloat(e):e)},getDimensionWithUnit:function(e){e=this.getRawDimension(e);return 0===e?"0":"number"==typeof e?e+"px":e}}},{}],81:[function(e,t,i){var s=e("../../../modules/transitionStyleGenerator.js");t.exports={getMaxTransitionOutTime:function(e,t){for(var i=[],n=0;n<e.length;n++){var o=t[e[n]];i.push(s.getMaxTransitionTime(o.transitionsOut))}return Math.max.apply(null,i)}}},{"../../../modules/transitionStyleGenerator.js":28}],82:[function(e,t,i){var d=e("./asset.js"),n=e("./rotator.js"),l=e("../../../modules/objectUtils.js");t.exports={generateWrapLibrary:function(e,t){e=e||{};for(var i={},n=Object.keys(e),o=0;o<n.length;o++){var s=n[o],r=(e[s].asset,l.clone(e[s])),a=d.getGraphicAssetSources(r,t);l.shallowMerge(r,a),i[s]=r}return i},getWrapNameFromRotator:function(e,t){t=n.getActiveChildComponent(e,t);return t&&t.wrap?t.wrap:e&&e.wrapConfig&&e.wrapConfig.default?e.wrapConfig.default:void window.Tarnhelm.log('Cannot find wrap for rotator "'+e.name+'"')},getWrapData:function(e,t){return t[e]},generateWrapAction:function(e){return{actionName:"set-wrap-background",data:l.clone(e)}}}},{"../../../modules/objectUtils.js":23,"./asset.js":74,"./rotator.js":79}],83:[function(e,t,i){var o=e("./modules/adInstance.js"),n=e("./modules/wrapSwapper.js"),s=e("./modules/actionHandler.js"),r=e("./modules/eventEmitter.js"),a=e("./modules/requirementsTester.js"),d=e("./modules/objectUtils.js"),l=e("./modules/url.js"),u=e("./renderer/renderer.js"),c=e("./modules/deviceInfo.js"),h=e("./modules/events/metricEventSink.js"),p=e("./modules/mobileLog.js"),m=e("./modules/events/tarnhelmEvent.js"),f=e("./legacyTracking.js"),g=(e("IMDbAdvertisingJsModules"),{}),v=!1,_=!1,y=0,b=new c(window.location.href,window.navigator.userAgent),A=new a(b.getInfo());function w(e){e=d.clone(e);return delete e.adName,delete e.isGlobal,e}var E,S,e="wrapper";t.exports=window.Tarnhelm={getAd:function(e){return g[e]},getAdByName:function(e){for(var t,i=Object.keys(g),n=0;n<i.length;n++)if(g[i[n]].getName()===e){t=g[i[n]];break}return t},initAdInstance:function(e,t,i,n){this.getAd(i.id)&&this.log('Ad with id "'+i.id+'" already exists. OVERWRITING!'),i.name&&this.getAdByName(i.name)&&this.log('Ad with name "'+i.name+'" already exists. OVERWRITING!'),u.injectStyles(e);e=new o({domNode:e,containerFrame:t,eventSinks:[S],adData:i,trackingConsumer:n||f(i)});return g[i.id]=e,u.mountAd(e),e},triggerTopAction:function(e){E.trigger(e)},triggerGlobalAction:function(e){for(var t=Object.keys(g),i=w(e),n=0;n<t.length;n++)this.getAd(t[n]).getActionHandler().trigger(i)},triggerTandemAction:function(e){var t,i;e.adName?(t=this.getAdByName(e.adName))?(i=w(e),t.getActionHandler().trigger(i)):this.log('Tarnhelm.triggerTandemAction failed, adInstance for "'+e.adName+'" was not found'):this.log("Tarnhelm.triggerTandemAction failed, adName was not provided")},getNowTime:function(){return Date.now()+y},getIsDebug:function(){return v},setIsDebug:function(e){v=!!e},getIsMobileDebug:function(){return _},setIsMobileDebug:function(e){_=!!e},log:function(){var e;v&&window.console&&window.console.log&&(e=Array.prototype.slice.call(arguments),console.log.apply(console,e),_)&&this.getDeviceInfo().isMobileDevice&&window.top.document.body&&(window.top.document.body.style.position="relative",window.top.mobileLog=window.top.mobileLog||new p(window.top.document.body),window.top.mobileLog.log(e))},getVersion:function(){return"1.0.1"},getDeviceInfo:function(){return b.getInfo()},getRequirementsTester:function(){return A}},E=new s(new r,A),"1"!==(c=l.getQueryParam("tarnhelmDebug",window.location.href))&&"true"!==c||(v=!0,window.Tarnhelm.log("Tarnhelm is in DEBUG mode.")),"1"!==(c=l.getQueryParam("tarnhelmMobileDebug",window.location.href))&&"true"!==c||(v=_=!0,window.Tarnhelm.log("Tarnhelm is in MOBILE DEBUG mode.")),c=l.getQueryParam("simulatedDate",window.location.href),a=new Date(c),c&&"Invalid Date"!==a.toString()&&(y=a.getTime()-Date.now()),new n(e,E),S=new h(E),E.trigger({actionName:m.READY})},{"./legacyTracking.js":4,"./modules/actionHandler.js":5,"./modules/adInstance.js":6,"./modules/deviceInfo.js":10,"./modules/eventEmitter.js":11,"./modules/events/metricEventSink.js":13,"./modules/events/tarnhelmEvent.js":14,"./modules/mobileLog.js":21,"./modules/objectUtils.js":23,"./modules/requirementsTester.js":25,"./modules/url.js":29,"./modules/wrapSwapper.js":31,"./renderer/renderer.js":69,IMDbAdvertisingJsModules:99}],84:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.isResponsiveDisabled=i.getLastBreakPoint=i.constructCurrentSlotSizeMap=i.constructClientSideUrl=void 0;function a(e,o,s,r){var e=e.split(","),t=new Map;return e.filter(function(e){return e in o}).map(function(e){if(e in o){var t=o[e],i=l(s,t);if(r){var n=l(r,t);if(n===i||t[""+i]===t[""+n])return null}return[e,0<i?t[i.toString()]:0]}}).filter(function(e){return null!==e}).forEach(function(e){return t.set(e[0],e[1])}),t}var d=e("./helper-functions");i.constructCurrentSlotSizeMap=a;function l(t,e){e=Object.keys(e).map(function(e){return parseInt(e,10)}).filter(function(e){return t<e}).sort(function(e,t){return e-t});return 0<e.length?e[0]:0}i.constructClientSideUrl=function(e,t,i,n,o){var s,r;return d.isDefined(e)&&""!==e&&d.isDefined(t)&&""!==t&&d.isDefined(i)&&0!==Object.keys(i).length&&(s=d.isDefined(window)?window.innerWidth:375,t=a(t,i,s,n),r="",t.forEach(function(e,t){u(t,o,s)||(r+=t+"="+e+",")}),r=r.replace(new RegExp(",$"),""),0<(r=0<(r=encodeURIComponent(r)).length?"&slotSizeMap="+r:"").length)?""+e+r:""},i.getLastBreakPoint=l;var u=function(t,i,e){var n,o;return!!(i&&t&&t in i&&e)&&(o=Object.keys(i[t]).map(function(e){return parseInt(e,10)}).sort(),n=d.find(o,function(e){return!i[t][e]})||0,o=d.find(o,function(e){return i[t][e]})||0,n<e)&&e<=o};i.isResponsiveDisabled=u},{"./helper-functions":85}],85:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.isDefined=i.find=void 0,i.find=function(e,t){for(var i=0,n=e;i<n.length;i++){var o=n[i];if(t(o))return o}},i.isDefined=function(e){return void 0!==e}},{}],86:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.constructCurrentSlotSizeMap=i.constructClientSideUrl=i.isDefined=void 0;var n=e("./client-url-constructor"),o=(Object.defineProperty(i,"constructClientSideUrl",{enumerable:!0,get:function(){return n.constructClientSideUrl}}),Object.defineProperty(i,"constructCurrentSlotSizeMap",{enumerable:!0,get:function(){return n.constructCurrentSlotSizeMap}}),e("./helper-functions"));Object.defineProperty(i,"isDefined",{enumerable:!0,get:function(){return o.isDefined}})},{"./client-url-constructor":84,"./helper-functions":85}],87:[function(e,t,i){t.exports={makeBufferCanvas:function(){var e=document.createElement("canvas");return e.width=this.output.width,e.height=2*this.output.height,e},isIE:function(){return/msie|trident/.test(navigator.userAgent.toLowerCase())},clear2DCanvas:function(e,t,i){e.clearRect(0,0,t,i)}}},{}],88:[function(e,t,i){function n(e){this.doDebug=!1,this.video=e.video,this.output=e.output,this.buffer=e.buffer||void 0,this.dismissalTimeout=e.dismissalTimeout,this.originalOutputDisplay=this.output.style.display||"inline-block",this.outputHeight=this.output.height,this.outputWidth=this.output.width,e.loop&&(this.loop=e.loop,this.setLoopConfig(e)),null!=e.stillFrameMS&&(this.stillFrameInS=e.stillFrameMS/1e3),this.isSupported=!0,this.renderMode=this.determineRenderMode({colorCorrect:e.colorCorrect,maskUrl:e.maskUrl,forceCanvas:e.forceCanvas,horizontalStack:e.horizontalStack}),this.renderMode!==this.RENDER_MODES.CANVAS&&this.renderMode!==this.RENDER_MODES.GL||this.runTaintedContentCheck(this.video),this.setupRenderer()}var o=e("./renderers/alphalfa-renderer-webgl.js"),s=e("./renderers/alphalfa-renderer-horizontal-gl.js"),r=e("./renderers/alphalfa-renderer-canvas.js"),a=e("./renderers/alphalfa-renderer-mask.js"),d=e("./renderers/alphalfa-renderer-color-correct.js"),l=e("./alphalfa-utils.js");e("../polyfills/request-animation-frame.js");n.prototype={listen:function(){this.isSupported&&(this.boundFrameHandler=this.boundFrameHandler||this.frameHandler.bind(this),this.video.addEventListener("play",this.boundFrameHandler,!1),this.boundEndHandler=this.boundEndHandler||this.videoEndedHandler.bind(this),this.video.addEventListener("ended",this.boundEndHandler,!1),this.video.loop=this.loop)},teardown:function(){this.video.removeEventListener("play",this.boundFrameHandler),this.video.removeEventListener("ended",this.boundEndHandler),this.video.removeEventListener("seeked",this.boundLoopCountOnSeeked),this.video.removeEventListener("seeked",this.boundFreezeFrameOnSeeked),this.video=void 0,this.renderer.teardown(),this.output.width=1,this.output.height=1,this.output.parentNode.removeChild(this.output),this.output=void 0},RENDER_MODES:{GL:"gl",CANVAS:"canvas",MASK:"mask",COLOR_CORRECT:"color-correct",HORIZONTAL_GL:"horizontal-gl"},determineRenderMode:function(e){e=e.colorCorrect?this.RENDER_MODES.COLOR_CORRECT:e.maskUrl?(this.maskUrl=e.maskUrl,this.RENDER_MODES.MASK):e.forceCanvas?this.RENDER_MODES.CANVAS:e.horizontalStack?(this.gl=this.output.getContext("webgl")||this.output.getContext("experimental-webgl"),this.RENDER_MODES.HORIZONTAL_GL):this._determineRenderMode();return this.doDebug&&console.log("Alphalfa determined renderMode :: ",e),e},_determineRenderMode:function(){var t=!0;this.gl=void 0;try{this.gl=this.output.getContext("webgl")||this.output.getContext("experimental-webgl")}catch(e){t=!1}return(t=this.gl?t:!1)?this.RENDER_MODES.GL:this.RENDER_MODES.CANVAS},setupRenderer:function(){var e={doDebug:this.doDebug,video:this.video,buffer:this.buffer,output:this.output,dieBecauseUnsupported:this.dieBecauseUnsupported};switch(this.renderMode){case this.RENDER_MODES.CANVAS:case this.RENDER_MODES.MASK:case this.RENDER_MODES.COLOR_CORRECT:try{e.outputCtx=this.output.getContext("2d")}catch(e){return this.doDebug&&console.log("Error executing `getContext`, canvas not supported."),void this.dieBecauseUnsupported()}e.outputHeight=this.outputHeight,e.outputWidth=this.outputWidth}switch(this.renderMode){case this.RENDER_MODES.GL:e.gl=this.gl,this.renderer=new o(e);break;case this.RENDER_MODES.CANVAS:this.renderer=new r(e);break;case this.RENDER_MODES.MASK:e.maskUrl=this.maskUrl,this.renderer=new a(e);break;case this.RENDER_MODES.COLOR_CORRECT:this.renderer=new d(e);break;case this.RENDER_MODES.HORIZONTAL_GL:e.gl=this.gl,this.renderer=new s(e)}this.setupRendererContext()},setupRendererContext:function(){this.renderer.setupRendererContext(),this.doDebug||(this.video.style.display="none",this.buffer&&(this.buffer.style.display="none")),this.processFrame=this.determineProcessFrame()},determineProcessFrame:function(){if(this.renderMode!==this.RENDER_MODES.CANVAS||!l.isIE()||this.hasBindSupport())return this.renderer.getProcessFrameFunc();this.doDebug&&console.log("Error: IE <9 does not support Function.bind. Aborting."),this.dieBecauseUnsupported()},hasBindSupport:function(){return"bind"in Function},runTaintedContentCheck:function(e){var t=document.createElement("canvas");t.width=t.height=1,this.boundTestTainted=this.testTainted.bind(this,e,t),e.addEventListener("canplay",this.boundTestTainted)},testTainted:function(e,t){t=t.getContext("2d");t.drawImage(e,0,0,1,1);try{t.getImageData(0,0,1,1)}catch(e){this.dieBecauseTainted()}e.removeEventListener("canplay",this.boundTestTainted),t=null},frameHandler:function(){return!!this.video&&(this.video.paused||this.video.ended?(this.video.paused&&this.freezeOrClear(),!1):(this.processFrame(),void(this.requestAnimationFrameRequest=window.requestAnimationFrame(this.boundFrameHandler))))},videoEndedHandler:function(){this.freezeOrClear(),void 0!==this.dismissalTimeout&&(this.boundHideOutputCanvas=this.boundHideOutputCanvas||this.hideOutputCanvas.bind(this),setTimeout(this.boundHideOutputCanvas,this.dismissalTimeout))},setLoopConfig:function(e){this.loopedNum=0;e=null!=e.maxLoops?e.maxLoops:5;0!==e&&this.setMaxLoops(e)},setMaxLoops:function(e){this.maxLoops=e,this.boundLoopCountOnSeeked=this.loopCountOnSeeked.bind(this),this.video.addEventListener("seeked",this.boundLoopCountOnSeeked)},loopCountOnSeeked:function(e){this.video.paused?this.loopedNum=0:(this.video.currentTime<.1&&this.loopedNum++,this.loopedNum>=this.maxLoops&&(this.video.pause(),this.loopedNum=0))},freezeOrClear:function(){this.stillFrameInS?this.freezeOnStill(this.stillFrameInS):this.clearOnEnd()},freezeOnStill:function(e){this.video.pause(),this.boundFreezeFrameOnSeeked=this._freezeFrameOnSeeked.bind(this),this.video.addEventListener("seeked",this.boundFreezeFrameOnSeeked);var t=this.video.duration-.05;this.video.currentTime=t<e?t:e},_freezeFrameOnSeeked:function(){this.video.removeEventListener("seeked",this.boundFreezeFrameOnSeeked),this.processFrame()},clearOnEnd:function(){this.video.pause(),this._clearCanvas()},showOutputCanvas:function(){this.output.style.display=this.originalOutputDisplay},hideOutputCanvas:function(){this.output.style.display="none"},dieBecauseTainted:function(){this.doDebug&&window.console&&window.console.log&&console.log("Tainted canvas content. Killing Alphalfa playback."),this.dieBecauseUnsupported(!0)},dieBecauseUnsupported:function(e){this.doDebug&&!e&&window.console&&window.console.log&&console.log("Alphalfa has seen things. Attack ships on fire off the shoulder of Orion... Time. to die."),window.cancelAnimationFrame(this.requestAnimationFrameRequest),this.isSupported=!1,this.boundFrameHandler&&this.boundEndHandler&&(this.video.removeEventListener("play",this.boundFrameHandler,!1),this.video.removeEventListener("ended",this.boundEndHandler,!1)),this.video.pause(),this.video.style.display="none",this.output.style.display="none",this.buffer&&(this.buffer.style.display="none")},_clearCanvas:function(){this.renderer.clearCanvas()}},t.exports=n},{"../polyfills/request-animation-frame.js":100,"./alphalfa-utils.js":87,"./renderers/alphalfa-renderer-canvas.js":89,"./renderers/alphalfa-renderer-color-correct.js":90,"./renderers/alphalfa-renderer-horizontal-gl.js":91,"./renderers/alphalfa-renderer-mask.js":92,"./renderers/alphalfa-renderer-webgl.js":93}],89:[function(e,t,i){function n(e){this.doDebug=e.doDebug,this.output=e.output,this.outputCtx=e.outputCtx,this.outputHeight=e.outputHeight,this.outputWidth=e.outputWidth,this.buffer=e.buffer,this.video=e.video,this.dieBecauseUnsupported=e.dieBecauseUnsupported}var o=e("../alphalfa-utils.js");n.prototype={PIXEL_DATA_SIZE:4,setupRendererContext:function(){this._setupCanvasContext()},getProcessFrameFunc:function(){return this.processCanvasFrame.bind(this,this.buffer,this.bufferCtx,this.output,this.outputCtx,this.outputWidth,this.outputHeight)},clearCanvas:function(){o.clear2DCanvas(this.outputCtx,this.outputWidth,this.outputHeight)},teardown:function(){this.outputCtx=void 0,this.bufferCtx=void 0,this.buffer.width=1,this.buffer.height=1,this.buffer.parentNode.removeChild(this.buffer),this.buffer=void 0},processCanvasFrame:function(e,t,i,n,o,s){t.drawImage(this.video,0,0);for(var t=this.bufferCtx.getImageData(0,s,o,s),r=t.data,a=3,d=r.length;a<d;a+=this.PIXEL_DATA_SIZE)r[a]=r[a-2];n.putImageData(t,0,0,0,0,o,s),n.drawImage(e,0,0,o,2*s)},_setupCanvasContext:function(){this.buffer=this.buffer||o.makeBufferCanvas(),this.bufferCtx=this.buffer.getContext("2d"),this.outputCtx.globalCompositeOperation="source-in"}},t.exports=n},{"../alphalfa-utils.js":87}],90:[function(e,t,i){function n(e){this.doDebug=e.doDebug,this.output=e.output,this.outputCtx=e.outputCtx,this.outputWidth=e.outputWidth,this.outputHeight=e.outputHeight,this.video=e.video,this.dieBecauseUnsupported=e.dieBecauseUnsupported}var o=e("../alphalfa-utils.js");n.prototype={setupRendererContext:function(){},getProcessFrameFunc:function(){return this.processColorCorrectFrame.bind(this,this.video,this.outputCtx,this.outputWidth,this.outputHeight)},clearCanvas:function(){o.clear2DCanvas(this.outputCtx,this.outputWidth,this.outputHeight)},teardown:function(){this.outputCtx=void 0},processColorCorrectFrame:function(e,t,i,n){t.drawImage(e,0,0,i,n)}},t.exports=n},{"../alphalfa-utils.js":87}],91:[function(e,t,i){function n(e){this.doDebug=e.doDebug,this.gl=e.gl,this.output=e.output,this.buffer=e.buffer,this.video=e.video,this.dieBecauseUnsupported=e.dieBecauseUnsupported}var o=e("../alphalfa-utils.js");n.prototype={setupRendererContext:function(){this._setupGlContext(this.gl)},getProcessFrameFunc:function(){return this.determineGlRenderFunc()},clearCanvas:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},teardown:function(){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.vbuffer),e.bufferData(e.ARRAY_BUFFER,1,e.STATIC_DRAW),e.deleteBuffer(this.vbuffer),e.bindBuffer(e.ARRAY_BUFFER,this.texCoordBuffer),e.bufferData(e.ARRAY_BUFFER,1,e.STATIC_DRAW),e.deleteBuffer(this.texCoordBuffer),e.bindTexture(e.TEXTURE_2D,null),e.deleteTexture(this.stackTexture),this.gl=void 0,this.buffer&&(this.bufferCtx=void 0,this.buffer.width=1,this.buffer.height=1,this.buffer.parentNode.removeChild(this.buffer),this.buffer=void 0)},determineGlRenderFunc:function(){return o.isIE()?this.ieProcessGlFrame.bind(this,this.gl,this.output,this.output.width,this.output.height):this.processGlFrame.bind(this,this.gl,this.output)},processGlFrame:function(e,t){this._updateTextureFromVideo(e),e.drawArrays(e.TRIANGLE_STRIP,0,4)},_updateTextureFromVideo:function(e){e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.video)},ieProcessGlFrame:function(e,t,i,n){this._ieUpdateTextureFromVideo(e,i,n),e.drawArrays(e.TRIANGLE_STRIP,0,4)},_ieUpdateTextureFromVideo:function(e,t,i){this.bufferCtx.drawImage(this.video,0,0,t,2*i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.buffer)},_setupGlContext:function(e){o.isIE()&&(this.doDebug&&console.log("Using alternate IE render mode."),this._ieGlSetup()),e.enableVertexAttribArray(0),e.viewport(0,0,this.output.width,this.output.height),this.doDebug?e.clearColor(0,0,0,.1):e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),this.program=this._compileProgram(e,this.SHADER_VERTEX,this.SHADER_FRAGMENT),e.useProgram(this.program),this._getGlDataLocations(e),this._createAndBindTexCoordData(e),this._createAndBindTexture(e),this._createAndBindVertexData(e)},_ieGlSetup:function(){this.buffer=this.buffer||o.makeBufferCanvas(),this.bufferCtx=this.buffer.getContext("2d")},_getGlDataLocations:function(e){this.aTexCoord_loc=e.getAttribLocation(this.program,"aTexCoord"),this.aPosition_loc=e.getAttribLocation(this.program,"aPosition"),this.uImage_loc=e.getUniformLocation(this.program,"uImage")},_createAndBindVertexData:function(e){this.vbuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vbuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,1,1,1,-1,-1,1,-1]),e.STATIC_DRAW),e.enableVertexAttribArray(this.aPosition_loc),e.vertexAttribPointer(this.aPosition_loc,2,e.FLOAT,!1,0,0)},_createAndBindTexCoordData:function(e){this.texCoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texCoordBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,.5,0,0,1,.5,1]),e.STATIC_DRAW),e.enableVertexAttribArray(this.aTexCoord_loc),e.vertexAttribPointer(this.aTexCoord_loc,2,e.FLOAT,!1,0,0),e.uniform2f(e.getUniformLocation(this.program,"uHalfTexOffset"),.5,0)},_createAndBindTexture:function(e){this.stackTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.stackTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)},_compileProgram:function(e,t,i){var n=e.createShader(e.VERTEX_SHADER);return e.shaderSource(n,t),e.compileShader(n),t=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(t,i),e.compileShader(t),i=e.createProgram(),e.attachShader(i,n),e.attachShader(i,t),e.linkProgram(i),e.getShaderParameter(n,e.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(vs) :: ",e.getShaderInfoLog(n)),e.getShaderParameter(t,e.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(fs) :: ",e.getShaderInfoLog(t)),e.getProgramParameter(i,e.LINK_STATUS)||console.log("gl.getProgramInfoLog(program) :: ",e.getProgramInfoLog(i)),i},SHADER_VERTEX:["","  attribute vec2 aPosition;","  attribute vec2 aTexCoord;","  varying vec2 vTexCoord;","  void main() {","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vTexCoord = aTexCoord;","  }",""].join("\n"),SHADER_FRAGMENT:["","  precision highp float;","  uniform sampler2D uImage;","  uniform vec2 uHalfTexOffset;","  varying vec2 vTexCoord;","  void main() {","    vec4 color = texture2D( uImage, vTexCoord );","    vec4 alpha = texture2D( uImage, vTexCoord + uHalfTexOffset );","    color[3] = alpha[0]; // avg alpha","    gl_FragColor = color;","  }",""].join("\n")},t.exports=n},{"../alphalfa-utils.js":87}],92:[function(e,t,i){function n(e){this.doDebug=e.doDebug,this.output=e.output,this.outputCtx=e.outputCtx,this.outputHeight=e.outputHeight,this.outputWidth=e.outputWidth,this.video=e.video,this.maskUrl=e.maskUrl,this.dieBecauseUnsupported=e.dieBecauseUnsupported}var o=e("../alphalfa-utils.js");n.prototype={setupRendererContext:function(){this._setupMaskContext()},getProcessFrameFunc:function(){return this.processMaskFrame.bind(this,this.video,this.outputCtx,this.outputWidth,this.outputHeight)},clearCanvas:function(){o.clear2DCanvas(this.outputCtx,this.outputWidth,this.outputHeight)},teardown:function(){this.outputCtx=void 0},processMaskFrame:function(e,t,i,n){t.drawImage(e,0,0,i,n)},_setupMaskContext:function(){this.loadMask(this.maskUrl)},loadMask:function(e){var t=this,i=this.mask=new Image;i.addEventListener("load",function(e){t.putImageMask.call(t,i)}),i.src=e},putImageMask:function(e){this.outputCtx.globalCompositeOperation="source-over",this.outputCtx.drawImage(e,0,0,this.outputWidth,this.outputHeight),this.outputCtx.globalCompositeOperation="source-in"}},t.exports=n},{"../alphalfa-utils.js":87}],93:[function(e,t,i){function n(e){this.doDebug=e.doDebug,this.gl=e.gl,this.output=e.output,this.buffer=e.buffer,this.video=e.video,this.dieBecauseUnsupported=e.dieBecauseUnsupported}var o=e("../alphalfa-utils.js");n.prototype={setupRendererContext:function(){this._setupGlContext(this.gl)},getProcessFrameFunc:function(){return this.determineGlRenderFunc()},clearCanvas:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},teardown:function(){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.vbuffer),e.bufferData(e.ARRAY_BUFFER,1,e.STATIC_DRAW),e.deleteBuffer(this.vbuffer),e.bindBuffer(e.ARRAY_BUFFER,this.texCoordBuffer),e.bufferData(e.ARRAY_BUFFER,1,e.STATIC_DRAW),e.deleteBuffer(this.texCoordBuffer),e.bindTexture(e.TEXTURE_2D,null),e.deleteTexture(this.stackTexture),this.gl=void 0,this.buffer&&(this.bufferCtx=void 0,this.buffer.width=1,this.buffer.height=1,this.buffer.parentNode.removeChild(this.buffer),this.buffer=void 0)},determineGlRenderFunc:function(){return o.isIE()?this.ieProcessGlFrame.bind(this,this.gl,this.output,this.output.width,this.output.height):this.processGlFrame.bind(this,this.gl,this.output)},processGlFrame:function(e,t){this._updateTextureFromVideo(e),e.drawArrays(e.TRIANGLE_STRIP,0,4)},_updateTextureFromVideo:function(e){e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.video)},ieProcessGlFrame:function(e,t,i,n){this._ieUpdateTextureFromVideo(e,i,n),e.drawArrays(e.TRIANGLE_STRIP,0,4)},_ieUpdateTextureFromVideo:function(e,t,i){this.bufferCtx.drawImage(this.video,0,0,t,2*i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.buffer)},_setupGlContext:function(e){o.isIE()&&(this.doDebug&&console.log("Using alternate IE render mode."),this._ieGlSetup()),e.enableVertexAttribArray(0),e.viewport(0,0,this.output.width,this.output.height),this.doDebug?e.clearColor(0,0,0,.1):e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),this.program=this._compileProgram(e,this.SHADER_VERTEX,this.SHADER_FRAGMENT),e.useProgram(this.program),this._getGlDataLocations(e),this._createAndBindTexCoordData(e),this._createAndBindTexture(e),this._createAndBindVertexData(e)},_ieGlSetup:function(){this.buffer=this.buffer||o.makeBufferCanvas(),this.bufferCtx=this.buffer.getContext("2d")},_getGlDataLocations:function(e){this.aTexCoord_loc=e.getAttribLocation(this.program,"aTexCoord"),this.aPosition_loc=e.getAttribLocation(this.program,"aPosition"),this.uImage_loc=e.getUniformLocation(this.program,"uImage")},_createAndBindVertexData:function(e){this.vbuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vbuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,1,1,1,-1,-1,1,-1]),e.STATIC_DRAW),e.enableVertexAttribArray(this.aPosition_loc),e.vertexAttribPointer(this.aPosition_loc,2,e.FLOAT,!1,0,0)},_createAndBindTexCoordData:function(e){this.texCoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texCoordBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,.5,1,.5]),e.STATIC_DRAW),e.enableVertexAttribArray(this.aTexCoord_loc),e.vertexAttribPointer(this.aTexCoord_loc,2,e.FLOAT,!1,0,0),e.uniform2f(e.getUniformLocation(this.program,"uHalfTexOffset"),0,.5)},_createAndBindTexture:function(e){this.stackTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.stackTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)},_compileProgram:function(e,t,i){var n=e.createShader(e.VERTEX_SHADER);return e.shaderSource(n,t),e.compileShader(n),t=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(t,i),e.compileShader(t),i=e.createProgram(),e.attachShader(i,n),e.attachShader(i,t),e.linkProgram(i),e.getShaderParameter(n,e.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(vs) :: ",e.getShaderInfoLog(n)),e.getShaderParameter(t,e.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(fs) :: ",e.getShaderInfoLog(t)),e.getProgramParameter(i,e.LINK_STATUS)||console.log("gl.getProgramInfoLog(program) :: ",e.getProgramInfoLog(i)),i},SHADER_VERTEX:["","  attribute vec2 aPosition;","  attribute vec2 aTexCoord;","  varying vec2 vTexCoord;","  void main() {","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vTexCoord = aTexCoord;","  }",""].join("\n"),SHADER_FRAGMENT:["","  precision highp float;","  uniform sampler2D uImage;","  uniform vec2 uHalfTexOffset;","  varying vec2 vTexCoord;","  void main() {","    vec4 color = texture2D( uImage, vTexCoord );","    vec4 alpha = texture2D( uImage, vTexCoord + uHalfTexOffset );","    color[3] = alpha[0]; // avg alpha","    gl_FragColor = color;","  }",""].join("\n")},t.exports=n},{"../alphalfa-utils.js":87}],94:[function(e,t,i){function n(e){this.name=e.name,this.frames=e.frames,this.frameSpeed=e.frameSpeed,this.loop=!!e.loop,this.maxLoops=null!=e.maxLoops?e.maxLoops:0,this.onComplete=e.onComplete,this.onCompleteCallback=e.onCompleteCallback,this.currentFrame=0,this.loopCount=0}n.prototype={getClone:function(){return new n({name:this.name,frames:this.frames,frameSpeed:this.frameSpeed,loop:this.loop,maxLoops:this.maxLoops,onComplete:this.onComplete,onCompleteCallback:this.onCompleteCallback})},incrementLoopCount:function(){this.loopCount++},overMaxLoops:function(){return 0!==this.maxLoops&&this.loopCount>=this.maxLoops}},t.exports=n},{}],95:[function(e,t,i){function n(e){this.injectEl=e.injectEl,this.animations={},this.animationConfigs=e.animations,this.autoplayAnimationName=e.autoplay,this.pauseFrame=e.pauseFrame||0,this.sprites={width:e.spriteWidth,height:e.spriteHeight},this.sheet={width:e.sheetWidth,height:e.sheetHeight},this.url=e.url,this.ready=!1,this.init()}var l=e("./animaniac-animation.js");e("../polyfills/request-animation-frame.js");n.prototype={doDebug:!1,log:function(){var e;this.doDebug&&(e=["Animaniac: "].concat(arguments),window.console.log.apply(window.console,e))},init:function(){this.el=document.createElement("div"),this.el.className="animaniac",this.setInitialStyle(),this.prepareCoords()},setInitialStyle:function(){for(var e={display:"block",width:this.sprites.width+"px",height:this.sprites.height+"px",backgroundColor:"transparent",backgroundPosition:"0 0",backgroundRepeat:"no-repeat",backgroundSize:this.sheet.width+"px "+this.sheet.height+"px"},t=Object.keys(e),i=0;i<t.length;i++)this.el.style[t[i]]=e[t[i]]},prepareCoords:function(){this.cellCoords=this.determineCellCoords(),this.pauseCell=this.cellCoords[this.pauseFrame],this.animations=this.processAnimationConfigs(this.animationConfigs),this.applySpritesheet(),this.autoplayAnimationName?this.playAnimation(this.autoplayAnimationName):this.showCoords(this.pauseCell)},determineCellCoords:function(){for(var e=[],t=(this.sheet.cols=Math.round(this.sheet.width/this.sprites.width),this.sheet.rows=Math.round(this.sheet.height/this.sprites.height),1),i=1,n=(this.sprites.width,this.sprites.height,this.sheet.width,this.sheet.height,this.sheet.cols<=1?0:100/(this.sheet.cols-1)),o=this.sheet.rows<=1?0:100/(this.sheet.rows-1);t<=this.sheet.cols&&i<=this.sheet.rows;)if(e.push({x:((t-1)*n).toFixed(5),y:((i-1)*o).toFixed(5)}),t<this.sheet.cols)t++;else{if(!(i<this.sheet.rows))break;t=1,i++}return e},applySpritesheet:function(){this.el.style.backgroundImage="url("+this.url+")",this.injectEl.appendChild(this.el),this.ready=!0},play:function(){this.unpause(),this.playAnimation(this.currentAnimation.name)},pause:function(){this.paused=!0},unpause:function(){this.paused=!1},isPaused:function(){return this.paused},playAnimation:function(e){this.ready||this.log("Not ready! TODO, add Queuer."),this.currentAnimation=this.animations[e].getClone(),this.currentAnimation?(this.unpause(),this.startAnimation()):this.log("Non-existent animation name passed to Animaniac.play()")},startAnimation:function(){this.boundHandleRequestAnimationFrame=this.handleRequestAnimationFrame.bind(this),this.timeSince=0,this.lastTS=Date.now(),this.nextFrame(),window.requestAnimationFrame(this.boundHandleRequestAnimationFrame)},handleRequestAnimationFrame:function(){var e=Date.now();this.timeSince>this.currentAnimation.frameSpeed?(this.nextFrame(),this.timeSince=0):(this.timeSince+=e-this.lastTS,this.lastTS=e),this.isPaused()?this.showCoords(this.pauseCell):window.requestAnimationFrame(this.boundHandleRequestAnimationFrame)},nextFrame:function(){var e=this.currentAnimation,t=e.currentFrame,i=e.frames[t];this.showCoords(i),this.hasNextFrame(e,t)?e.currentFrame++:e.loop&&!e.overMaxLoops()?(e.incrementLoopCount(),e.currentFrame=0):(i=e.onCompleteCallback,this.isValidCallback(i)&&(t=i.args||[],i.callback.apply(i.thisArg,t)),"string"==typeof e.onComplete?this.playAnimation(e.onComplete):this.pause())},isValidCallback:function(e){return!!e&&e.callback&&e.thisArg},hasNextFrame:function(e,t){return!!e.frames[t+1]},showCoords:function(e){var t=e;void 0!==e&&null!=e.x&&null!=e.y||(this.log('Bad coords object passed to "showCoords".'),t=this.pauseCell),this.el.style.backgroundPosition=t.x+"% "+t.y+"%"},setAnimationCoords:function(e){for(var t=0;t<this.animations.length;t++)for(var i=this.animations[t],n=0;n<i.frames.length;n++)i.frames[n]=e[i.frames[n]]},processAnimationConfigs:function(e){null==e&&this.log("Must configure animations!");for(var t={},i=0;i<e.length;i++){for(var n=e[i],o=n.name,s=this.processFrameSeq(n.frames),r=[],a=0;a<s.length;a++){var d=s[a];r.push(this.cellCoords[d])}t[o]=new l({name:o,frames:r,frameSpeed:this.getFrameSpeed(n.fps||24),loop:!!n.loop,maxLoops:n.maxLoops,onComplete:n.onComplete,onCompleteCallback:n.onCompleteCallback})}return t},processFrameSeq:function(e){return Array.isArray(e)?this.processFrameSeqArray(e):"string"==typeof e?this.processFrameSeqString(e):(this.log("Warning, unsupported frame sequence format."),[0])},processFrameSeqArray:function(e){for(var t,i,n=e,o=(n.length,0);o<n.length;)"string"==typeof n[o]?(t=this.processFrameSeqString(n[o]),i=[o,1].concat(t),n.splice.apply(n,i),o+=t.length):o++;return n},processFrameSeqString:function(e){var t=[],i=e.split("-");if(2!==i.length)return[parseInt(i[0],10)];for(var n=0;n<i.length-1;n++)var o=i[n],s=i[n+1],t=t.concat(this.framesBetween(o,s));return t},framesBetween:function(e,t){e=parseInt(e,10),t=parseInt(t,10);return e<t?this._framesBetweenIncremental(e,t):this._framesBetweenDecremental(e,t)},_framesBetweenIncremental:function(e,t){var i=[],n=e;for(i.push(n);++n<=t;)i.push(n);return i},_framesBetweenDecremental:function(e,t){var i=[],n=e;for(i.push(n);--n>=t;)i.push(n);return i},getFrameSpeed:function(e){return 1e3/e}},t.exports=n},{"../polyfills/request-animation-frame.js":100,"./animaniac-animation.js":94}],96:[function(e,t,i){function n(e){e.targetDate||console.warn("Countdowner :: Required argument not provided."),this.el=e.el||document.createElement("div"),this.id="countdowner-"+Date.now()+Math.floor(1e4*Math.random()),this.init(e)}var o=e("./zoolander.js");n.prototype={defaults:{splitChar:"",doPad:!1,hideAfterRelease:!1,periods:["days","hours","minutes","seconds"],periodContainerCss:{display:"inline-block"},periodCountCss:{display:"inline-block"},labels:["Days","Hrs","Mins","Secs"],printLabels:!1,labelsBelow:!0,labelsCss:{display:"inline-block"}},classPrefix:"cd-",init:function(e){this.targetDate=this.determineTargetDate(e.targetDate),this.setConfig(e),e.hideAfterRelease&&this.timeRemaining()<=0||(this.zoo=e.zoolander||new o,this.injectCss(),this.initializeHtml(),this.printLabels&&this.initializeLabels(),this._render(),this.renderBind=this._render.bind(this),clearInterval(this.renderInterval),this.renderInterval=setInterval(this.renderBind,1e3))},setConfig:function(e){var t,i=this.addDefaults(e);for(t in delete i.targetDate,i)i.hasOwnProperty(t)&&(this[t]=i[t])},addDefaults:function(e){var t,i=e;for(t in this.defaults)!this.defaults.hasOwnProperty(t)||this.isDefined(e[t])||(i[t]=this.defaults[t]);return i},determineTargetDate:function(e){var t;return"object"==typeof e&&this.isDefined(e.month)?(t=e.date||e.day,t=new Date(e.year,e.month-1,t)):"object"==typeof e&&e instanceof Date?t=e:"string"==typeof e?t=new Date(e):console.warn("No date or invalid date provided. Aborting Countdowner."),t},makeEl:function(e,t){var t=this.isDefined(t)?t:"div",i=document.createElement(t);if("string"==typeof e)i.classList.add(this.classPrefix+e);else for(var n=0;n<e.length;n++)i.classList.add(this.classPrefix+e[n]);return i},initializeHtml:function(){this.container=this.makeEl("container"),this.container.id=this.id;for(var e=this.periods,t=(this.periodEls=[],e[e.length-1]),i=0;i<e.length;i++){var n=this.makePeriodContainer(e[i]);this.container.appendChild(n),this.periodEls[e[i]]=n,this.splitChar&&""!==this.splitChar&&e[i]!==t&&this.container.appendChild(this.makeSplitContainer())}this.el.innerHTML="",this.el.appendChild(this.container)},appendCountChildren:function(e){var t=this.makeEl("count","div");e.appendChild(t)},makePeriodContainer:function(e){e=this.makeEl([e,"period-container"]);return this.appendCountChildren(e),e},makeSplitContainer:function(){var e=this.makeEl("split-el","span");return e.innerHTML=" "+this.splitChar+" ",e},initializeLabels:function(){for(var e=0;e<this.labels.length;e++){var t=this.makeLabel(this.labels[e],this.periods[e]),i=this.periodEls[this.periods[e]];this.labelsBelow?i.appendChild(t):i.insertBefore(t,i.children[0])}},makeLabel:function(e,t){t=this.makeEl(["label","label-"+t],"span");return t.innerHTML=e,t},msSec:1e3,msMin:6e4,msHour:36e5,msDay:864e5,timeRemaining:function(){var e=Date.now(),e=this.targetDate.valueOf()-e;return 0<e?e:0},calcRemaining:function(){var e={days:0,hours:0,minutes:0,seconds:0},t=this.timeRemaining();if(0!==t)if(e.days=Math.floor(t/this.msDay),t-=e.days*this.msDay,e.hours=Math.floor(t/this.msHour),t-=e.hours*this.msHour,e.minutes=Math.floor(t/this.msMin),t-=e.minutes*this.msMin,e.seconds=Math.floor(t/this.msSec),this.doPad)for(var i in e)e.hasOwnProperty(i)&&(e[i]=this.pad(e[i]));return e},pad:function(e){return 10<=e?e:"0"+e},container:function(){return this.el.children[0]},el:function(e){return arguments.length?(this.el=e,this):this.el},_render:function(){var e=this.calcRemaining();this.periodEls.days.children[0].innerHTML=e.days,this.periodEls.hours.children[0].innerHTML=e.hours,this.periodEls.minutes.children[0].innerHTML=e.minutes,this.periodEls.seconds.children[0].innerHTML=e.seconds},injectCss:function(){var e="#"+this.id,t=e+" ."+this.classPrefix,e=[[e,{"box-sizing":"border-box"}],[e+" *",{"box-sizing":"inherit"}],[t+"period-container",this.periodContainerCss],[t+"count",this.periodCountCss],[t+"label",this.labelsCss]];this.zoo.insertRules(e)},isDefined:function(e){return void 0!==e}},t.exports=n},{"./zoolander.js":118}],97:[function(e,t,i){e("../polyfills/request-animation-frame.js");var E=e("./cuepoint.js"),S=e("../utils/notifier.js"),T={onCuepoint:"onCuepoint"};function n(e){var t,i=S(),n=!1,o=null,s=null,r=!1,a=!1,d=[];function l(e){var t,i,n,o;if(!(e&&0<e.length))return null;for(t=[],i=e.length-1;-1!==i;i--)n=e[i],o=E(n),n.error||t.push(o);return t}function u(e){for(var t,i=null,n=d&&0<d.length?d.length:0,o=0;o<n&&null===i;o++)i=(t=d[o]).time>e?t:i;return i}function c(e){null!==t&&b(),void 0===(t=e)||"VIDEO"!==t.tagName&&"AUDIO"!==t.tagName||(y(),0<t.duration&&p())}function h(e,t){return e.time<t.time?-1:e.time>t.time?1:0}function p(){var e;if(d&&0!==d.length){for(e=d.length-1;-1!==e;e--)d[e].adjustToDuration(t.duration);d.sort(h),o=u(t.currentTime)}}function m(){o&&(o.time,1)&&null!==o.time&&t&&(t.currentTime,1)&&null!==t.currentTime&&o.time<=t.currentTime&&(s=o,n||(s.trigger(t),i.notify(T.onCuepoint,[s,t])),o=u(t.currentTime)),r&&window.requestAnimationFrame(m)}function f(){o=u(t.currentTime)}function g(){r=!0,m()}function v(){r=!1}function _(){r&&"hidden"===document.visibilityState&&t.addEventListener("timeupdate",m),"hidden"!==document.visibilityState&&t.removeEventListener("timeupdate",m)}function y(){a||(a=!0,t.addEventListener("durationchange",p),t.addEventListener("seeked",f),t.addEventListener("playing",g),t.addEventListener("pause",v),t.addEventListener("ended",v),t.addEventListener("abort",v),t.addEventListener("emptied",v),t.addEventListener("error",v),t.addEventListener("stalled",v),t.addEventListener("waiting",v),document.addEventListener("visibilitychange",_))}function b(){a&&(a=!1,t.removeEventListener("durationchange",p),t.removeEventListener("seeked",f),t.removeEventListener("playing",g),t.removeEventListener("pause",v),t.removeEventListener("ended",v),t.removeEventListener("abort",v),t.removeEventListener("emptied",v),t.removeEventListener("error",v),t.removeEventListener("stalled",v),t.removeEventListener("waiting",v),t.removeEventListener("timeupdate",m),document.removeEventListener("visibilitychange",_))}function A(e){((e,t)=>{for(var i,n=!1,o=Object.keys(t),s=o.length,r=0;r<s&&!n;r++)i=o[r],n=e.hasOwnProperty(i);return n})(e,T)?i.subscribe(e):console.warn("CuepointEngine.subscribe() :: observer must have valid notification keys!\n\tValid notification keys = '"+Object.keys(T).join("', '")+"'\n\tObserver:",e)}function w(e){var t=e.cuepoints&&0<e.cuepoints.length?e.cuepoints:[];d=l(t),c(e.media),e.observer&&A(e.observer)}return w(e),{init:w,start:y,stop:b,destroy:function(){b(),i.clear(),r=!1,t=d=s=o=null},getCuepoints:function(){return d},setCuepoints:function(e){e=0<e.length?e:[],d=l(e)},addCuepoint:function(e){E(e).error||(d.push(E(e)),p())},removeCuepoint:function(e){-1<(e=d.indexOf(e))&&(d.splice(e,1),p())},getMedia:function(){return t},setMedia:c,getIgnoreCuepoints:function(){return n},setIgnoreCuepoints:function(e){n=e},subscribe:A,unsubscribe:i.unsubscribe,NOTIFICATIONS:T}}Object.defineProperty(n,"NOTIFICATIONS",{value:T,writable:!1,enumerable:!0,configurable:!1}),t.exports=n},{"../polyfills/request-animation-frame.js":100,"../utils/notifier.js":114,"./cuepoint.js":98}],98:[function(e,t,i){function d(e){var i=(e=>{for(var t,i={},n=e.replace(/(\D{1,})([\d])/g,"$1,$2").split(","),o=0,s=n.length;o<s;o++)i[(t=n[o].split(/(\D{1,})/))[1]]=parseInt(t[0],10);return i})(e),n={m:6e4,s:1e3,ms:1};return Object.keys(i).reduce(function(e,t){return e+i[t]*n[t]},0)}t.exports=function(e){if(!e||!e.hasOwnProperty("time"))return{time:-1,error:"Cuepoint Error: cuepointData is invalid",data:e};var i,n={},t=[],o=e.time,s="string"==typeof o,r=s?o.match(/\-?\d+([%msh]+)/):[],a=r&&0<r.length?r[1]:"ms";switch(!0){case s&&"%"===a:i=parseInt(o,10);break;case!s:i=o;break;case s&&0===o.indexOf("-")||o<0:i=-d(o.substring(1)),a="ms";break;default:i=d(o),a="ms"}return n.timestamp=o,n.endOffset=i<0,n.durationDependent="%"===a||n.endOffset,n.time=((e,t)=>{var i;switch(!0){case"s"===t:i=e;break;case"%"===t:i=e/100;break;default:i=e/1e3}return i})(i,a),n.name=e.hasOwnProperty("name")?e.name:"Unnamed Cuepoint",n.type=e.hasOwnProperty("type")?e.type:"cuepoint",n.data=e.hasOwnProperty("data")?e.data:{},e.hasOwnProperty("callback")&&"function"==typeof e.callback&&(n.callback=e.callback),n.trigger=function(e){return n.callback&&n.callback(n,e),t.push(Date.now()),n},n.reset=function(){t=[]},n.getHistory=function(){return t},n.adjustToDuration=function(e){var t;return"%"===a&&(t=e*(i/100),n.time=t),n.endOffset&&(t=e+i/1e3,n.time=t),n},n}},{}],99:[function(e,t,i){e={AlphalfaPlayer:e("./alphalfa/alphalfa.js"),Animaniac:e("./animaniac/animaniac.js"),Countdowner:e("./countdowner.js"),CuepointEngine:e("./cuepoints/cuepoint-engine.js"),Reely:e("./reely/reely.js"),Uatu:e("./uatu.js"),Zoolander:e("./zoolander.js")};window.ad_design=e,t.exports=e},{"./alphalfa/alphalfa.js":88,"./animaniac/animaniac.js":95,"./countdowner.js":96,"./cuepoints/cuepoint-engine.js":97,"./reely/reely.js":111,"./uatu.js":112,"./zoolander.js":118}],100:[function(e,t,i){for(var s=0,n=["webkit","moz"],o=0;o<n.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[n[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[o]+"CancelAnimationFrame"]||window[n[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var i=(new Date).getTime(),n=Math.max(0,16-(i-s)),o=window.setTimeout(function(){e(i+n)},n);return s=i+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})},{}],101:[function(e,t,i){t.exports={DEFAULT_SPRITESHEET:"https://m.media-amazon.com/images/I/21uHhW38EgL.svg",DEFAULT_OVERLAY_SPRITESHEET:"https://m.media-amazon.com/images/G/01/IMDb/design/modules/reely/sprites/reely-overlay._V503633712_.png"}},{}],102:[function(e,t,i){function n(e,t){this.eventBus=e.eventBus,this.spriteDimensions=e.spriteDimensions,this.controlBarConfig=e.controlBarConfig,this.spritesheet=e.spritesheet,this.zoo=e.zoo,this.init(t)}var o=e("./reely-scrubber.js"),s=e("./reely-css-classes.js"),r=e("./reely-el-maker.js"),a=e("./reely-events.js");n.prototype={FADE_DELAY_SECS:2,init:function(e){this.el=r.make("div",s.CONTROL_BAR_CONTAINER),this.el.style.display="none",this.reely=e,this.controlBar=r.make("div",[s.CONTROL_BAR,s.REPEAT_X_SPRITE+"-controlsBG"]),this.appendTableLayoutDivs(this.controlBar),this.injectControlsStyles(),this.populateControls(),this.el.appendChild(this.controlBar),this.controlBarConfig.autohide&&(this.fadeOutBind=this.fadeOut.bind(this),this.resetFadeOutDelay(),this.autohideListen()),this.broadcastInteraction(),this.listen()},populateControls:function(){this.createControlButtons(),this.scrubber=new o({eventBus:this.eventBus,spritesheet:this.spritesheet,spriteDimensions:this.spriteDimensions,zoo:this.zoo}),this.midCell.appendChild(this.scrubber.getEl())},clearFadeOutDelay:function(){clearTimeout(this.fadeOutDelay)},resetFadeOutDelay:function(){this.clearFadeOutDelay(),this.fadeOutDelay=setTimeout(this.fadeOutBind,1e3*this.FADE_DELAY_SECS)},fadeIn:function(){s.remove(this.el,s.TRANSPARENT),this.eventBus.trigger(a.FADE_IN_START)},fadeOut:function(){s.add(this.el,s.TRANSPARENT),this.eventBus.trigger(a.FADE_OUT_START)},broadcastInteraction:function(){this.el.addEventListener("mousemove",this.eventBus.triggers[a.MOUSE_MOVE])},listen:function(){this.eventBus.addEventListener(a.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.addEventListener(a.VID_PLAY,this.togglePlayPause,this,"play"),this.eventBus.addEventListener(a.VID_PAUSE,this.togglePlayPause,this,"pause"),this.eventBus.addEventListener(a.MUTED,this.toggleMuteUnmute,this,"unmuted"),this.eventBus.addEventListener(a.UNMUTED,this.toggleMuteUnmute,this,"muted"),this.eventBus.addEventListener(a.VID_EXITFULLSCREEN,this.toggleNormalFullscreen,this,"normal"),this.eventBus.addEventListener(a.VID_ENTERFULLSCREEN,this.toggleNormalFullscreen,this,"fullscreen")},autohideListen:function(){this.eventBus.addEventListener(a.MOUSE_IN,this.onMouseIn,this),this.eventBus.addEventListener(a.MOUSE_OUT,this.onMouseOut,this),this.eventBus.addEventListener(a.MOUSE_MOVE,this.onMouseMove,this)},teardown:function(){this.clearFadeOutDelay(),this.scrubber.teardown(),this.el.removeEventListener("mousemove",this.eventBus.triggers[a.MOUSE_MOVE]),this.eventBus.removeEventListener(a.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.removeEventListener(a.VID_PLAY,this.togglePlayPause,this,"play"),this.eventBus.removeEventListener(a.VID_PAUSE,this.togglePlayPause,this,"pause"),this.eventBus.removeEventListener(a.MUTED,this.toggleMuteUnmute,this,"unmuted"),this.eventBus.removeEventListener(a.UNMUTED,this.toggleMuteUnmute,this,"muted"),this.eventBus.removeEventListener(a.VID_EXITFULLSCREEN,this.toggleNormalFullscreen,this,"normal"),this.eventBus.removeEventListener(a.VID_ENTERFULLSCREEN,this.toggleNormalFullscreen,this,"fullscreen"),this.eventBus.removeEventListener(a.MOUSE_IN,this.onMouseIn,this),this.eventBus.removeEventListener(a.MOUSE_OUT,this.onMouseOut,this),this.eventBus.removeEventListener(a.MOUSE_MOVE,this.onMouseMove,this)},onLoadedData:function(e){this.el.style.display=""},togglePlayPause:function(e){var t=this.isToggled(this.playPause);(!t&&"play"===e||t&&"pause"===e)&&this.toggleTwoState(this.playPause)},toggleMuteUnmute:function(e){var t=this.isToggled(this.muteUnmute);(!t&&"muted"===e||t&&"unmuted"===e)&&this.toggleTwoState(this.muteUnmute)},toggleNormalFullscreen:function(e){var t=this.isToggled(this.fullscreenNormal);(!t&&"fullscreen"===e||t&&"normal"===e)&&this.toggleTwoState(this.fullscreenNormal)},isToggled:function(e){return s.contains(e,s.TOGGLED)},toggleTwoState:function(e){this.isToggled(e)?s.remove(e,s.TOGGLED):s.add(e,s.TOGGLED)},onMouseIn:function(e){this.fadeIn()},onMouseMove:function(e){this.fadeIn(),this.resetFadeOutDelay()},onMouseOut:function(e){this.resetFadeOutDelay()},appendTableLayoutDivs:function(e){this.midCell=r.make("div",s.CONTROL_BAR_MID),this.leftCell=r.make("div",s.CONTROL_BAR_LEFT),this.rightCell=r.make("div",s.CONTROL_BAR_RIGHT),e.appendChild(this.midCell),e.appendChild(this.leftCell),e.appendChild(this.rightCell)},createControlButtons:function(){this.playPause=r.createTwoStateButton("play-pause",[{defaultIconName:"play",hoverIconName:"play-hover"},{defaultIconName:"pause",hoverIconName:"pause-hover"}]),this.muteUnmute=r.createTwoStateButton("mute-unmute",[{defaultIconName:"sound-off",hoverIconName:"sound-off-hover"},{defaultIconName:"sound-on",hoverIconName:"sound-on-hover"}]);var e=this.eventBus.triggerBind(a.PLAY_PAUSE_TOGGLE),t=this;this.playPause.addEventListener("click",function(){return t.reely&&(t.reely.isPausedByUser=t.reely.isPlaying()),e()}),this.leftCell.appendChild(this.playPause),this.muteUnmute.addEventListener("click",this.eventBus.triggerBind(a.MUTE_UNMUTE_TOGGLE)),this.rightCell.appendChild(this.muteUnmute)},addFullscreenButton:function(){s.add(this.midCell,s.CONTROL_BAR_MID+"-fullscreen"),s.add(this.rightCell,s.CONTROL_BAR_RIGHT+"-fullscreen"),this.fullscreenNormal=r.createTwoStateButton("fullscreen-normal",[{defaultIconName:"fullscreen",hoverIconName:"fullscreen-hover"},{defaultIconName:"normal",hoverIconName:"normal-hover"}]),this.fullscreenNormal.addEventListener("click",this.eventBus.triggerBind(a.FULLSCREEN_NORMAL_TOGGLE)),this.rightCell.appendChild(this.fullscreenNormal)},injectControlsStyles:function(){var e=[];e=(e=e.concat(this.getButtonStyles())).concat(this.getControlBarStyles()),this.zoo.insertRules(e)},determineButtonVisualWidth:function(){return this.spriteDimensions.spriteWidth+2*this.spriteDimensions.buttonPadding},determineContainerStyles:function(){var e=this.controlBarConfig,t={position:"absolute",display:"inline-block",height:e.height+"px",width:"100%",transition:"opacity 1s ease"};return"center"===e.anchorX&&(t.margin="0 auto",t.textAlign="center"),t[e.anchorY]=e.offsetY,t},determineBarElStyles:function(){var e=this.controlBarConfig,t={position:"relative",display:"block",height:"inherit",width:e.width,"background-color":"transparent","background-position":"0 0","background-repeat":"repeat-x"};return this.controlBarConfig.hideBG||(t["background-image"]='url("'+this.spritesheet.getSrc()+'")'),"center"===e.anchorX?t.margin="0 auto":t[e.anchorX]=e.offsetX,t},getButtonStyles:function(){return[["."+s.BUTTON_ICON,{height:this.spriteDimensions.spriteHeight+"px",width:this.spriteDimensions.spriteWidth+"px",padding:this.spriteDimensions.buttonPadding+"px"}]]},getControlBarStyles:function(){var e=this.determineButtonVisualWidth(),t=this.determineContainerStyles(),i=this.determineBarElStyles();return[["."+s.CONTROL_BAR_CONTAINER,t],["."+s.FULLSCREEN+" ."+s.CONTROL_BAR_CONTAINER,{bottom:0,top:"auto"}],["."+s.CONTROL_BAR,i],["."+s.FULLSCREEN+" ."+s.CONTROL_BAR,{left:0,right:"auto",width:"100%"}],[["."+s.CONTROL_BAR_LEFT,"."+s.CONTROL_BAR_RIGHT],{display:"inline-block",height:"100%",width:e+"px"}],[["."+s.CONTROL_BAR_RIGHT+"-fullscreen"],{width:2*e+"px"}],["."+s.CONTROL_BAR_LEFT,{float:"left"}],["."+s.CONTROL_BAR_RIGHT,{float:"right"}],["."+s.CONTROL_BAR_MID,{position:"absolute",left:"0",display:"block",height:"100%",width:"100%","box-sizing":"border-box","padding-left":e+"px","padding-right":e+"px"}],["."+s.CONTROL_BAR_MID+"-fullscreen",{"padding-right":2*e+"px"}],[".reely-two-state-fullscreen-normal",{"padding-left":e+"px"}]]}},t.exports=n},{"./reely-css-classes.js":103,"./reely-el-maker.js":104,"./reely-events.js":106,"./reely-scrubber.js":109}],103:[function(e,t,i){t.exports={CONTAINER:"reely-container",VIDEO:"reely-video",OVERLAY_CONTAINER:"reely-overlay-container",OVERLAY_SLATE:"reely-overlay-slate",CONTROL_BAR_CONTAINER:"reely-control-bar-container",CONTROL_BAR:"reely-control-bar",CONTROL_BAR_LEFT:"reely-control-bar-left",CONTROL_BAR_RIGHT:"reely-control-bar-right",CONTROL_BAR_MID:"reely-control-bar-mid",BUTTON:"reely-button",BUTTON_ICON:"reely-button-icon",BUTTON_ICON_LARGE:"reely-button-icon-large",TWO_STATE_BUTTON:"reely-two-state",TWO_STATE_DEFAULT:"reely-two-state-default",TWO_STATE_ALT:"reely-two-state-toggled",REPEAT_X_SPRITE:"reely-repeat-x-sprite",ICON_LARGE:"reely-icon-large",ICON:"reely-icon",ICON_DEFAULT:"reely-default-icon",ICON_HOVER:"reely-hover-icon",ICON_ACTIVE:"reely-toggle-active",ICON_DOWN:"reely-toggle-down",LOADING_SPINNER:"reely-loading-spinner",SCRUBBER_CONTAINER:"reely-scrubber-container",TOGGLED:"reely-toggled",UNSELECTABLE:"reely-unselectable",HIDDEN:"reely-hidden",INVISIBLE:"reely-invisible",TRANSPARENT:"reely-transparent",FULLSCREEN:"reely-fullscreen",add:function(e,t){switch(void 0===t&&console.warn("Attempted to add() an undefined class."),this.mode()){case"modern":return e.classList.add(t);case"oldIE":return e.className+=" "+t}},contains:function(e,t){switch(void 0===t&&console.warn("Attempted to check contains() an undefined class."),this.mode()){case"modern":return e.classList.contains(t);case"oldIE":return-1!==e.className.split(" ").indexOf(t)}},remove:function(e,t){void 0===t&&console.warn("Attempted to remove() an undefined class."),this._removeClass||(this._removeClass=this.removeModes[this.mode()]),this._removeClass(e,t)},removeModes:{modern:function(e,t){e.classList.remove(t)},oldIE:function(e,t){var i=e.className.split(" "),t=i.indexOf(t);-1!==t&&i.splice(t,1),e.className=i.join(" ")}},mode:function(){var e;return this._mode||(e=document.createElement("div"),this._mode="classList"in e?"modern":"oldIE"),this._mode}}},{}],104:[function(e,t,i){var s=e("./reely-css-classes.js");t.exports={make:function(e,t,i){e=document.createElement(e);return e.setAttribute("class",this.arrayWrap(t).join(" ")),i&&(e.id=i),e},createIcon:function(e,t){return this._createIcon(s.ICON,e,t)},createLargeIcon:function(e,t){return this._createIcon(s.ICON_LARGE,e,t)},_createIcon:function(e,t,i){e=this.concatClasses([e,e+"-"+t],i);return this.make("div",e)},createRepeatXSprite:function(e,t){e=this.concatClasses([s.REPEAT_X_SPRITE,s.REPEAT_X_SPRITE+"-"+e],t);return this.make("div",e)},createSpriteEl:function(e,t){return t&&(e=this.concatClasses(e,t)),this.make("div",e)},concatClasses:function(e,t){return t?"string"==typeof t?(e.push(t),e):e.concat(t):e},createTwoStateButton:function(e,t){var i=this.createIcon,n=s.BUTTON_ICON;return this._createTwoStateButton(e,t,n,i)},createLargeTwoStateButton:function(e,t){var i=this.createLargeIcon,n=s.BUTTON_ICON_LARGE;return this._createTwoStateButton(e,t,n,i)},_createTwoStateButton:function(e,t,i,n){var e=this.make("div",[s.TWO_STATE_BUTTON,s.TWO_STATE_BUTTON+"-"+e]),o=this.createButtonState(t[0],s.TWO_STATE_DEFAULT,i,n),t=this.createButtonState(t[1],s.TWO_STATE_ALT,i,n);return e.appendChild(o),e.appendChild(t),e},createButtonState:function(e,t,i,n){return n=n||this.createIcon,i=i||s.BUTTON_ICON,this._createButtonState(e,t,i,n)},_createButtonState:function(e,t,i,n){var o=[s.BUTTON,s.UNSELECTABLE],i=(o.push(i),t&&(o=o.concat(this.arrayWrap(t))),this.make("div",o)),t=n.call(this,e.defaultIconName,s.ICON_DEFAULT),o=n.call(this,e.hoverIconName,s.ICON_HOVER);return i.appendChild(t),i.appendChild(o),i},arrayWrap:function(e){return void 0===e?[]:"[object Array]"!==Object.prototype.toString.call(e)?[e]:e}}},{"./reely-css-classes.js":103}],105:[function(e,t,i){function n(){this.init()}var o=e("./reely-events.js");n.prototype={reelyEvents:[],init:function(){this.triggers={},this.listeners={},this.reelyEvents=this.getReelyEventsArray();for(var e=0;e<this.reelyEvents.length;e++){var t=this.reelyEvents[e];this.triggers[t]=this.triggerBind(t),this.listeners[t]=[]}},getReelyEventsArray:function(){var e,t=[];for(e in o)o.hasOwnProperty(e)&&t.push(o[e]);return t},addEventListener:function(e,t,i){this.listeners[e]||console.warn("Attempted to addEventListener with unsupported event :: ",e);var n=Array.prototype.slice.call(arguments);n.splice(0,3),this.listeners[e].push({callback:t,context:i,args:n})},removeEventListener:function(e,t,i){this.listeners[e]||console.warn("Attempted to removeEventListener with unsupported event :: ",e);for(var n,o=this.listeners[e].slice(),s=0;s<o.length;s++)if((n=o[s]).callback===t&&n.context===i){o.splice(s,1);break}this.listeners[e]=o},triggerBind:function(e,t){return this.trigger.bind(this,e)},trigger:function(e){this.listeners[e]||console.warn("Attempted to trigger an unsupported event :: ",e);for(var t,i,n=Array.prototype.slice.call(arguments),o=(n.splice(0,1),this.listeners[e]),s=0;s<o.length;s++)i=(t=o[s]).args.concat(n),t.callback.apply(t.context,i)}},t.exports=n},{"./reely-events.js":106}],106:[function(e,t,i){t.exports={STARTED:"started",PLAY_PAUSE_TOGGLE:"playPauseToggle",MUTE_UNMUTE_TOGGLE:"muteUnmuteToggle",FULLSCREEN_NORMAL_TOGGLE:"fullscreenNormalToggle",SCRUBBER_BAR_CLICK:"scrubberBarClick",MOUSE_IN:"mouseIn",MOUSE_OUT:"mouseOut",MOUSE_MOVE:"mouseMove",MUTED:"muted",UNMUTED:"unmuted",VID_ENTERFULLSCREEN:"video:enterfullscreen",VID_EXITFULLSCREEN:"video:exitfullscreen",VID_LOADSTART:"video:loadstart",VID_LOADEDMETADATA:"video:loadedmetadata",VID_LOADEDDATA:"video:loadeddata",VID_CANPLAY:"video:canplay",VID_CANPLAYTHROUGH:"video:canplaythrough",VID_WAITING:"video:waiting",VID_PROGRESS:"video:progress",VID_SUSPEND:"video:suspend",VID_PLAY:"video:play",VID_PLAYING:"video:playing",VID_PAUSE:"video:pause",VID_TIMEUPDATE:"video:timeupdate",VID_ENDED:"video:ended",FADE_OUT_START:"reely:fadeoutstart",FADE_IN_START:"reely:fadeinstart"}},{}],107:[function(e,t,i){function n(e){this.eventBus=e.eventBus,this.zoo=e.zoo,this.init()}var o=e("./reely-css-classes.js"),s=e("./reely-el-maker.js"),r=e("./reely-events.js");n.prototype={PROGRESS_TICKS_TO_SHOW:5,init:function(){this.el=s.make("div",o.LOADING_SPINNER+"-outer-container"),this.innerContainer=s.make("div",o.LOADING_SPINNER+"-inner-container"),this.spinner=s.make("div",o.LOADING_SPINNER),this.innerContainer.appendChild(this.spinner),this.el.appendChild(this.innerContainer),this.injectLoadingSpinnerCSS(),this.progressTicks=0,this.listen()},listen:function(){this.eventBus.addEventListener(r.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.addEventListener(r.VID_CANPLAY,this.onCanPlay,this),this.eventBus.addEventListener(r.VID_PROGRESS,this.onProgress,this),this.eventBus.addEventListener(r.VID_SUSPEND,this.onSuspend,this),this.eventBus.addEventListener(r.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.addEventListener(r.VID_PLAY,this.onPlay,this),this.eventBus.addEventListener(r.VID_PAUSE,this.onPause,this)},teardown:function(){this.eventBus.removeEventListener(r.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.removeEventListener(r.VID_CANPLAY,this.onCanPlay,this),this.eventBus.removeEventListener(r.VID_PROGRESS,this.onProgress,this),this.eventBus.removeEventListener(r.VID_SUSPEND,this.onSuspend,this),this.eventBus.removeEventListener(r.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.removeEventListener(r.VID_PLAY,this.onPlay,this),this.eventBus.removeEventListener(r.VID_PAUSE,this.onPause,this)},onPlay:function(){this.isPlaying=!0,this.progressTicks=0},onPause:function(){this.isPlaying=!1,this.progressTicks=0},onLoadedMetadata:function(){this.show()},onCanPlay:function(){this.hide()},onSuspend:function(){this.progressTicks=0},onProgress:function(){this.isPlaying&&(this.progressTicks++,this.progressTicks>=this.PROGRESS_TICKS_TO_SHOW)&&this.show()},onTimeUpdate:function(){this.progressTicks=0,this.hide()},hide:function(){this.isHidden||(this.isHidden=!0,o.add(this.el,o.HIDDEN),o.remove(this.spinner,o.TRANSPARENT))},show:function(){this.isHidden&&(this.isHidden=!1,o.remove(this.el,o.HIDDEN),o.remove(this.spinner,o.TRANSPARENT))},injectLoadingSpinnerCSS:function(){var e="loading-spinner-spin";this.zoo.insertKeyframes(e,this.getSpinnerKeyframes());var t=(t=[]).concat(this.getSpinnerStyles());this.zoo.insertRules(t),this.zoo.insertAnimation("."+o.LOADING_SPINNER,"animation",e+" 1.6s linear infinite")},getSpinnerKeyframes:function(){return{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(359deg)"}}},getSpinnerStyles:function(){return[["."+o.LOADING_SPINNER+"-outer-container",{position:"absolute",top:"50%",left:"50%",height:0,width:0}],["."+o.LOADING_SPINNER+"-inner-container",{display:"block",height:"64px",width:"64px",transform:"translate(-50%, -50%)"}],["."+o.LOADING_SPINNER,{display:"block","box-sizing":"border-box",height:"64px",width:"64px",background:"transparent","border-radius":"50%","border-top":"7px solid rgba(255, 255, 255, 1)","border-right":"7px solid rgba(255, 255, 255, 0.5)","border-bottom":"7px solid rgba(255, 255, 255, 0.5)","border-left":"7px solid rgba(255, 255, 255, 0.5)",transition:"opacity 1s ease-out"}]]}},t.exports=n},{"./reely-css-classes.js":103,"./reely-el-maker.js":104,"./reely-events.js":106}],108:[function(e,t,i){function n(e,t){this.eventBus=e.eventBus,this.spritesheet=e.spritesheet,this.spriteDimensions=e.spriteDimensions,this.slate=e.slate,this.zoo=e.zoo,this.loadingSpinner=new a(e),this.init(t)}var o=e("./reely-css-classes.js"),s=e("./reely-el-maker.js"),r=e("./reely-events.js"),a=e("./reely-loading-spinner.js");n.prototype={init:function(e){this.el=s.make("div",o.OVERLAY_CONTAINER),this.reely=e,this.isPlaying(!1),this.isEnded(!1),this.showSlate(),this.playReplay=s.createLargeTwoStateButton("overlay-play-pause",[{defaultIconName:"overlay-play",hoverIconName:"overlay-play-hover"},{defaultIconName:"overlay-replay",hoverIconName:"overlay-replay-hover"}]),this.el.appendChild(this.playReplay),this.el.appendChild(this.loadingSpinner.el),this.hide(),this.broadcastInteraction(),this.injectOverlayStyles(),this.listen()},hide:function(){o.add(this.playReplay,o.TRANSPARENT)},show:function(){o.remove(this.playReplay,o.TRANSPARENT)},hideSlate:function(){o.remove(this.el,o.OVERLAY_SLATE)},showSlate:function(){o.add(this.el,o.OVERLAY_SLATE)},listen:function(){this.eventBus.addEventListener(r.VID_CANPLAY,this.onCanPlay,this),this.eventBus.addEventListener(r.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.addEventListener(r.VID_PLAY,this.onPlay,this),this.eventBus.addEventListener(r.VID_PAUSE,this.onPause,this),this.eventBus.addEventListener(r.VID_ENDED,this.onVideoEnded,this)},teardown:function(){this.loadingSpinner.teardown(),this.el.removeEventListener("click",this.eventBus.triggers[r.PLAY_PAUSE_TOGGLE]),this.el.removeEventListener("mouseenter",this.eventBus.triggers[r.MOUSE_IN]),this.el.removeEventListener("mouseleave",this.eventBus.triggers[r.MOUSE_OUT]),this.el.removeEventListener("mousemove",this.eventBus.triggers[r.MOUSE_MOVE]),this.eventBus.removeEventListener(r.VID_CANPLAY,this.onLoadedMetadata,this),this.eventBus.removeEventListener(r.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.removeEventListener(r.VID_PLAY,this.onPlay,this),this.eventBus.removeEventListener(r.VID_PAUSE,this.onPause,this),this.eventBus.removeEventListener(r.VID_ENDED,this.onVideoEnded,this)},broadcastInteraction:function(){var e=this.eventBus.triggers[r.PLAY_PAUSE_TOGGLE],t=this;this.el.addEventListener("click",function(){return t.reely&&(t.reely.isPausedByUser=t.reely.isPlaying()),e()}),this.el.addEventListener("mouseenter",this.eventBus.triggers[r.MOUSE_IN]),this.el.addEventListener("mouseleave",this.eventBus.triggers[r.MOUSE_OUT]),this.el.addEventListener("mousemove",this.eventBus.triggers[r.MOUSE_MOVE])},onCanPlay:function(){this.isPlaying()||this.show()},onScrubberBarClick:function(){this.setToPlayIcon(),this.hideSlate()},onPlay:function(){this.setToPlayIcon(),this.isEnded(!1),this.isPlaying(!0),this.hide(),this.hideSlate()},onPause:function(){this.isPlaying(!1),this.show()},onVideoEnded:function(){this.setToReplayIcon(),this.isEnded(!0),this.show(),this.showSlate()},setToPlayIcon:function(){o.remove(this.playReplay,o.TOGGLED)},setToReplayIcon:function(){o.add(this.playReplay,o.TOGGLED)},isPlaying:function(e){return null!=e&&(this._isPlaying=e),this._isPlaying},isEnded:function(e){return null!=e&&(this._isEnded=e),this._isEnded},injectOverlayStyles:function(){var e=[];e=(e=(e=(e=e.concat(this.getContainerStyles())).concat(this.getSlateStyles())).concat(this.getButtonStyles())).concat(this.getHoverOverrideStyles()),this.zoo.insertRules(e)},getContainerStyles:function(){return[["."+o.OVERLAY_CONTAINER,{position:"absolute",top:0,left:0,display:"block",height:"100%",width:"100%",cursor:"pointer","text-align":"center"}],["."+o.OVERLAY_CONTAINER+" *",{visibility:"inherit"}]]},getSlateStyles:function(){return this.slate?[["."+o.OVERLAY_SLATE,{background:"url("+this.slate+") no-repeat center center transparent","background-size":"contain"}]]:[]},getButtonStyles:function(){return[["."+o.OVERLAY_CONTAINER+" ."+o.TWO_STATE_BUTTON,{top:"50%",left:"50%"}],["."+o.OVERLAY_CONTAINER+" ."+o.BUTTON_ICON_LARGE,{transform:"translate(-50%, -50%)"}],["."+o.BUTTON_ICON_LARGE,{height:this.spriteDimensions.overlaySpriteHeight+"px",width:this.spriteDimensions.overlaySpriteWidth+"px",padding:this.spriteDimensions.buttonPadding+"px"}]]},getHoverOverrideStyles:function(){var e=o;return[[["."+e.OVERLAY_CONTAINER+" ."+e.TWO_STATE_BUTTON+" ."+e.TWO_STATE_DEFAULT,"."+e.OVERLAY_CONTAINER+" ."+e.TWO_STATE_BUTTON+" ."+e.TWO_STATE_DEFAULT],{visibility:"inherit"}],[["."+e.OVERLAY_CONTAINER+" ."+e.BUTTON+" ."+e.ICON_DEFAULT,"."+e.OVERLAY_CONTAINER+":hover ."+e.BUTTON+" ."+e.ICON_HOVER],{opacity:1}],[["."+e.OVERLAY_CONTAINER+":hover ."+e.BUTTON+" ."+e.ICON_DEFAULT,"."+e.OVERLAY_CONTAINER+" ."+e.BUTTON+" ."+e.ICON_HOVER],{opacity:0}],[["."+e.OVERLAY_CONTAINER+":hover ."+e.BUTTON+" ."+e.ICON_DEFAULT,"."+e.OVERLAY_CONTAINER+" ."+e.BUTTON+" ."+e.ICON_HOVER],{transition:"opacity 0.2s linear"}],["."+e.OVERLAY_CONTAINER+":hover ."+e.BUTTON+" ."+e.ICON_DEFAULT,{transition:"opacity 0s linear 0.2s"}]]}},t.exports=n},{"./reely-css-classes.js":103,"./reely-el-maker.js":104,"./reely-events.js":106,"./reely-loading-spinner.js":107}],109:[function(e,t,i){function n(e){this.eventBus=e.eventBus,this.spritesheet=e.spritesheet,this.spriteDimensions=e.spriteDimensions,this.zoo=e.zoo,this.init()}var o=e("./reely-css-classes.js"),s=e("./reely-el-maker.js"),r=e("./reely-events.js");n.prototype={init:function(){this.el=s.make("div",o.SCRUBBER_CONTAINER),this.el.addEventListener("click",this.onScrubberClick.bind(this)),this.els=this.createScrubberBarEls(),this.appendEls(),this.injectScrubberStyles(),this.listen()},getEl:function(){return this.el},appendEls:function(){this.el.appendChild(this.els.bg),this.el.appendChild(this.els.buffered),this.el.appendChild(this.els.played),this.el.appendChild(this.els.thumb)},createScrubberBarEls:function(){var e={};return e.bg=s.createRepeatXSprite("scrubber-bg"),e.bg.style.width="100%",e.played=s.createRepeatXSprite("scrubber-played-bg"),e.played.style.width=0,e.buffered=s.createRepeatXSprite("scrubber-buffered-bg"),e.buffered.style.width=0,e.thumb=s.createButtonState({defaultIconName:"scrubber-tab",hoverIconName:"scrubber-tab-hover"},o.BUTTON+"-scrubber-tab"),e},listen:function(){this.eventBus.addEventListener(r.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.addEventListener(r.VID_PLAY,this.onPlay,this)},teardown:function(){this.eventBus.removeEventListener(r.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.removeEventListener(r.VID_PLAY,this.onPlay,this)},onPlay:function(e){this.lastUpdateMs=Date.now()},onTimeUpdate:function(e){var t,i=Date.now(),e=(this.lastUpdateMs&&(t=(i-this.lastUpdateMs)/1e3),e.target),n=e.currentTime/e.duration,n=(this.setScrubberBar(n,t),this.determineBufferedFraction(e.buffered,e.duration));this.setBufferBar(n),this.lastUpdateMs=i},setScrubberTransition:function(e){e?(this.els.played.style.transition="width "+e+"s linear",this.els.thumb.style.transition="left "+e+"s linear"):(this.els.played.style.transition="",this.els.thumb.style.transition="")},onScrubberClick:function(e){o.contains(e.target,"reely-icon")||(e=(void 0!==e.offsetX?e.offsetX:e.layerX)/this.el.clientWidth,this.eventBus.trigger(r.SCRUBBER_BAR_CLICK,{clickedFraction:e}))},setScrubberBar:function(e,t){this.playedFraction=e,this.transitionInS=t,this.setScrubberTransition(this.transitionInS||void 0);e=100*this.playedFraction;this.els.played.style.width=e+"%",this.els.thumb.style.left=e+"%"},setBufferBar:function(e){this.els.buffered.style.width=100*e+"%"},determineBufferedFraction:function(e,t){for(var i=0,n=0,o=0;o<e.length;o++)n+=e.end(0)-e.start(0);return i=0<n?n/t:i},injectScrubberStyles:function(){var e=[];e=(e=e.concat(this.getScrubberBarStyles())).concat(this.getScrubberThumbOverrideStyles()),this.zoo.insertRules(e)},getScrubberBarStyles:function(){return[["."+o.SCRUBBER_CONTAINER,{position:"relative",height:"100%",width:"100%","box-sizing":"border-box",overflow:"initial","padding-top":this.spriteDimensions.buttonPadding+"px","padding-bottom":this.spriteDimensions.buttonPadding+"px"}],["."+o.BUTTON+"-scrubber-tab",{position:"absolute",top:0,left:0,transform:"translateX(-"+this.spriteDimensions.spriteWidth/2+"px)","padding-left":0,"padding-right":0,"pointer-events":"none"}]]},getScrubberThumbOverrideStyles:function(){return[["."+o.SCRUBBER_CONTAINER+" ."+o.ICON_HOVER,{left:0}]]}},t.exports=n},{"./reely-css-classes.js":103,"./reely-el-maker.js":104,"./reely-events.js":106}],110:[function(e,t,i){function n(e){this.spriteDimensions=e.spriteDimensions,this.controlBarConfig=e.controlBarConfig,this.zoo=e.zoo,this.spritesheetUrls=this.determineSpritesheetUrls(e.spritesheetUrls),this.overlaySpritesheetUrls=this.determineOverlaySpritesheetUrls(e.overlaySpritesheetUrls),this.init()}var o=e("./reely-css-classes.js"),s=e("./reely-config.js");n.prototype={TEMP_FORCE_PNG_SPRITESHEET:!0,init:function(){this.doesSupportSVG=this.supportsSVG(),this.spritesheetSrc=this.determineSpritesheetMode(this.spritesheetUrls),this.overlaySpritesheetSrc=this.determineSpritesheetMode(this.overlaySpritesheetUrls),this.spritesData=this.initSpritesData();var t=new Image;t.addEventListener("load",function(e){document.body.appendChild(t);e=(e.path||e.composedPath&&e.composedPath())[0];this.rows=e.height/e.width*2,this.injectSpritesheetCSS(),document.body.removeChild(t)}.bind(this)),t.style.visibility="hidden",t.style.position="fixed",t.style.left="-9999px",t.style.top="-9999px",t.style.zIndex="-9999",t.style.pointerEvents="none",t.src=this.spritesheetSrc},getSrc:function(){return this.spritesheetSrc},getOverlaySrc:function(){return this.overlaySpritesheetSrc},supportsSVG:function(){return"undefined"!=typeof SVGRect},determineSpritesheetMode:function(e){return!this.TEMP_FORCE_PNG_SPRITESHEET&&this.doesSupportSVG&&e.svg?e.svg:e.png},initSpritesData:function(){var e={},t=this.addControlsBGData(e,0);return t=this.addRepeatXData(e,t),this.addIconData(e,t),this.addLargeIconData(e),e},addControlsBGData:function(e,t){var i=this.controlBarConfig.height;return e.controlsBG={type:"repeat-x",h:i,x:0,y:t},t+i},addRepeatXData:function(e,t){for(var i=t,n=this.spriteDimensions.spriteHeight,o=["scrubber-bg","scrubber-played-bg","scrubber-buffered-bg"],s=0;s<o.length;s++)e[o[s]]={type:"repeat-x",h:n,x:0,y:i},i+=n;return i},addIconData:function(e,t){for(var i,n,o=this.spriteDimensions.spriteHeight,s=this.spriteDimensions.spriteWidth,r=["scrubber-tab","scrubber-tab-hover","scrubber-tabDown","","play","play-hover","pause","pause-hover","sound-off","sound-off-hover","sound-on","sound-on-hover","fullscreen","fullscreen-hover","normal","normal-hover"],a=t,d=0;d<r.length;d++)n=d%2,""!==(i=r[d])&&(e[i]={type:"icon",w:s,h:o,x:n?s:0,y:a}),a=n?a+o:a;return a},addLargeIconData:function(e,t){for(var i=this.spriteDimensions.overlaySpriteWidth,n=this.spriteDimensions.overlaySpriteHeight,o=["overlay-play","overlay-play-hover","overlay-replay","overlay-replay-hover"],s=0,r=0;r<o.length;r++)e[o[r]]={type:"icon-large",w:i,h:n,x:0,y:s},s+=n;return s},determineSpritesheetUrls:function(e){var t={png:s.DEFAULT_SPRITESHEET};return this._determineSpritesheetUrls(e,t)},determineOverlaySpritesheetUrls:function(e){var t={png:s.DEFAULT_OVERLAY_SPRITESHEET};return this._determineSpritesheetUrls(e,t)},_determineSpritesheetUrls:function(e,t){var i={};return e&&Object.keys(e).length&&e.png?i.png=e.png:i=t,i},injectSpritesheetCSS:function(){var e=[];e=(e=(e=e.concat(this.getSpriteStyles())).concat(this.getOverlaySpriteStyles())).concat(this.getIndividualSpriteStyles()),this.zoo.insertRules(e)},getSpriteStyles:function(){return[[["."+o.ICON,"."+o.REPEAT_X_SPRITE],{height:this.spriteDimensions.spriteHeight+"px",display:"inline-block","background-image":"url("+this.getSrc()+")","background-color":"transparent"}]]},getOverlaySpriteStyles:function(){return[["."+o.ICON_LARGE,{display:"inline-block",height:this.spriteDimensions.overlaySpriteHeight+"px",width:this.spriteDimensions.overlaySpriteWidth+"px","background-image":"url("+this.getOverlaySrc()+")","background-color":"transparent"}]]},getIndividualSpriteStyles:function(){var e,t,i=[],n={icon:this.getIconCSS,"repeat-x":this.getRepeatXSpriteCSS,"icon-large":this.getIconLargeCSS};for(t in this.spritesData)this.spritesData.hasOwnProperty(t)&&(e=n[(e=this.spritesData[t]).type].call(this,t,e),i.push(e));return i},getIconCSS:function(e,t){var i=this.spriteDimensions;return["."+o.ICON+"-"+e,{width:this.spriteDimensions.spriteWidth+"px","background-position":"-"+t.x+"px -"+t.y+"px","background-repeat":"no-repeat","background-size":2*i.spriteWidth+"px "+i.spriteHeight*this.rows+"px"}]},getRepeatXSpriteCSS:function(e,t){var i=this.spriteDimensions;return["."+o.REPEAT_X_SPRITE+"-"+e,{position:e.includes("controls")?"relative":"absolute","max-width":"100%","background-position":"0 -"+t.y+"px","background-repeat":"repeat-x","background-size":2*i.spriteWidth+"px "+i.spriteHeight*this.rows+"px"}]},getIconLargeCSS:function(e,t){return["."+o.ICON_LARGE+"-"+e,{"background-position":"0 -"+t.y+"px","background-repeat":"no-repeat"}]}},t.exports=n},{"./reely-config.js":101,"./reely-css-classes.js":103}],111:[function(e,t,i){function n(e){this.injectEl=e.injectEl,this.src=e.src,this.slate=e.slate||"",this.fullscreen=e.fullscreen||!1,this.autoplay=e.autoplay||!1,this.autosound=e.autosound||!1,this.playsInline=e.playsInline||!0,this.spritesheetUrls=e.spritesheets||{},this.overlaySpritesheetUrls=e.overlaySpritesheets||{},this.iframeId=e.iframeId,this.spriteDimensions=this.determineSpriteDimensionsConfig(e.spritesheets),this.setMediaKey=null,this.lastPermission="",this.hasSubscribed=!1,this.shouldObeyMediaInteroperability=!1,this.isInWeblab=!1,this.isPausedByUser=!e.autoplay,this.controlBarConfig=this.determineControlBarConfig(e.controlBar||{}),this.onScreenChange=this.onScreenChange.bind(this),this.onVolumeChange=this.onVolumeChange.bind(this),e.zoolander&&(this.zoo=e.zoolander),this.setInitialDebugMode(),this.init()}var o=e("./reely-event-bus.js"),s=e("./reely-controls.js"),r=e("./reely-overlay.js"),a=e("./reely-spritesheet.js"),d=e("../zoolander.js"),l=e("./reely-css-classes.js"),u=e("./reely-el-maker.js"),c=e("./reely-events.js"),h=e("../utils/weblab"),p=e("../utils/bridge").getBridge,m=e("../utils/url"),f="granted",g="pending";n.prototype={doDebug:!1,log:function(e){this.reelyDebug&&console.log("[reely]: ",e),window.top.Tarnhelm&&window.top.Tarnhelm.log&&window.top.Tarnhelm.log("[reely]: "+e)},init:function(){this.el=u.make("div",l.CONTAINER),this.shouldObeyMediaInteroperability=h.shouldObeyMediaInteroperability(),this.isInWeblab=h.isInWeblab(h.autoplayId),this.shouldObeyMediaInteroperability&&this.subscribeToMediaNotifications(),this.initZoolander(),this.injectPlayerStyles(),this.hide(),this.initChildren(),this.videoStarted=!1,this.videoEl=this.createVideoEl(),this.broadcast(),this.listen(),this.el.appendChild(this.videoEl),this.el.appendChild(this.overlay.el),this.el.appendChild(this.controls.el),this.injectEl.appendChild(this.el);this.autoplay&&this.videoEl&&3<=this.videoEl.readyState&&!this.isPlaying()&&this.isInWeblab&&this.play()},initZoolander:function(){var e,t;this.zoo||((e=this.injectEl.id)||(t=Date.now()+1e3*Math.floor(Math.random()),this.injectEl.id=e="reely-container-parent-"+t),this.zoo=new d({id:e,prefixId:e}))},initChildren:function(){this.eventBus=new o,this.spritesheet=new a({spritesheetUrls:this.spritesheetUrls,overlaySpritesheetUrls:this.overlaySpritesheetUrls,spriteDimensions:this.spriteDimensions,controlBarConfig:this.controlBarConfig,zoo:this.zoo});var e={eventBus:this.eventBus,spritesheet:this.spritesheet,slate:this.slate,spriteDimensions:this.spriteDimensions,controlBarConfig:this.controlBarConfig,zoo:this.zoo};this.overlay=new r(e,this),this.controls=new s(e,this)},play:function(){this.shouldObeyMediaInteroperability?this.requestPlayback({userInitiated:!0}):this.isPlaying()||this.eventBus.trigger(c.PLAY_PAUSE_TOGGLE)},pause:function(e){this.isPlaying()?(this.eventBus.trigger(c.PLAY_PAUSE_TOGGLE),this.shouldObeyMediaInteroperability&&(e&&e.ended?this.setMediaEnded():this.setMediaPaused())):this.shouldObeyMediaInteroperability&&e&&e.ended&&this.setMediaEnded()},isPlaying:function(){return!!this.videoEl&&!this.videoEl.paused},reset:function(){this.videoEl.currentTime=0,this.pause()},unmute:function(){this.isMuted()&&(this.videoEl.muted=!1)},mute:function(){this.isMuted()||(this.videoEl.muted=!0)},isMuted:function(){return this.videoEl.muted||0===this.videoEl.volume},onVolumeChange:function(){var e=this.controls.isToggled(this.controls.muteUnmute);e&&this.isMuted()?this.eventBus.trigger(c.MUTED):e||this.isMuted()||this.eventBus.trigger(c.UNMUTED)},normalScreenMode:function(){this.isFullscreen()&&(document.exitFullscreen?(document.exitFullscreen(),this.setNormalPlayerBar()):document.webkitExitFullscreen?(document.webkitExitFullscreen(),this.setNormalPlayerBar()):document.mozCancelFullScreen?(document.mozCancelFullScreen(),this.setNormalPlayerBar()):document.msExitFullscreen?(document.msExitFullscreen(),this.setNormalPlayerBar()):this.videoEl.webkitExitFullscreen&&(this.videoEl.webkitExitFullscreen(),this.setNormalPlayerBar()))},fullscreenMode:function(){this.isFullscreen()||(this.el.requestFullscreen?this.el.requestFullscreen():this.el.webkitRequestFullscreen?this.el.webkitRequestFullscreen():this.el.msRequestFullscreen?this.el.msRequestFullscreen():this.el.mozRequestFullScreen?this.el.mozRequestFullScreen():this.videoEl.webkitEnterFullscreen&&this.videoEl.webkitEnterFullscreen())},isFullscreen:function(){return this.el.fullscreen},supportsFullscreen:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled||document.mozFullScreenEnabled||this.videoEl&&this.videoEl.webkitSupportsFullscreen},hide:function(){l.add(this.el,l.HIDDEN)},show:function(){l.remove(this.el,l.HIDDEN)},requestPlayback:function(e){var t=this,e=e||{};return this.hasSubscribed?this.lastPermission===f&&this.videoEl?(this.videoEl.play(),this.setMediaPlay()):void p().requestPlayback({name:this.iframeId||"reely",userInitiated:!!e.userInitiated,videoFrame:this.getVideoFrame()}).then(function(e){t.log("requestPlayback success"),t.onMediaPermissionsChanged(e)},function(e){t.log("requestPlayback error: "+JSON.stringify(e))}):this.subscribeToMediaNotifications({shouldRequestPlayback:!0})},setMediaPlay:function(){p().isMediaOrchestratorBridge?this.setStatus("setMediaPlay",{isReely:!0}):this.setStatus("setMediaPlay")},setMediaPaused:function(){this.setStatus("setMediaPaused")},setMediaEnded:function(){this.setStatus("setMediaEnded")},setStatus:function(t,e){var i,n,o;this.shouldObeyMediaInteroperability&&(this.log(t),i=this,n=p()[t],o={key:this.setMediaKey,permission:this.lastPermission},(e?n(o,e):n(o)).then(function(e){i.log(t+" success")},function(e){i.log(t+" error: "+JSON.stringify(e))}))},subscribeToMediaNotifications:function(e){var t,i,e=!!(e||{}).shouldRequestPlayback;this.hasSubscribed||(t=p(),i={onMediaPermissionsChanged:this.onMediaPermissionsChanged.bind(this)},t.isMediaOrchestratorBridge&&(i.name=this.iframeId||"reely"),this.hasSubscribed=t.subscribe(i),this.log("subscribeToMediaNotifications: "+this.hasSubscribed),e&&this.requestPlayback({userInitiated:!1}))},onMediaPermissionsChanged:function(e){if(e&&e.permission){var t=e.permission.toLowerCase();switch(this.setMediaKey=e.key,this.lastPermission=e.permission,t){case f:this.log("onMediaPermissionsChanged: "+f),this.videoEl&&!this.isPausedByUser?(this.videoEl.play(),this.setMediaPlay()):this.log("isPausedByUser: "+this.isPausedByUser+", ignoring "+f+" permission");break;case"denied":this.log("onMediaPermissionsChanged: denied"),this.pause();break;case g:this.log("onMediaPermissionsChanged: "+g);break;default:this.log("onMediaPermissionsChanged unexpected permission: "+t)}}},getVideoFrame:function(){var e=this.videoEl?this.videoEl.getBoundingClientRect():{},t=window.top.Tarnhelm&&window.top.Tarnhelm.getDeviceInfo(),i=0,n=(this.videoEl&&this.videoEl.ownerDocument&&this.videoEl.ownerDocument.defaultView&&(i=this.videoEl.ownerDocument.defaultView.innerWidth),window.top.innerWidth),i=(i-n)/2,n={x:0<i&&"inline20"===this.iframeId?e.x-i:e.x,y:e.y,width:e.width,height:e.height};return p().isMediaOrchestratorBridge&&t.isMobileSite&&(i=(e=(i=this.videoEl&&this.videoEl.ownerDocument&&this.videoEl.ownerDocument.defaultView)?i.frameElement||i.iframe:null)?e.getBoundingClientRect():{x:0,y:0},n.x+=i.x+window.scrollX,n.y+=i.y+window.scrollY),t&&!t.isIMDbApp&&this.isFullscreen()&&(n.isFullscreen=!0),n},getEventBus:function(){return this.eventBus},broadcast:function(){this.passVideoEvents()},passVideoEvents:function(){this.log("passVideoEvents"),(this.doDebug||this.reelyDebug)&&this.passDebugEventLog(),this.videoEl.addEventListener("loadstart",this.eventBus.triggers[c.VID_LOADSTART]),this.videoEl.addEventListener("loadedmetadata",this.eventBus.triggers[c.VID_LOADEDMETADATA]),this.videoEl.addEventListener("loadeddata",this.eventBus.triggers[c.VID_LOADEDDATA]),this.videoEl.addEventListener("canplay",this.eventBus.triggers[c.VID_CANPLAY]),this.videoEl.addEventListener("canplaythrough",this.eventBus.triggers[c.VID_CANPLAYTHROUGH]),this.videoEl.addEventListener("waiting",this.eventBus.triggers[c.VID_WAITING]),this.videoEl.addEventListener("progress",this.eventBus.triggers[c.VID_PROGRESS]),this.videoEl.addEventListener("suspend",this.eventBus.triggers[c.VID_SUSPEND]),this.videoEl.addEventListener("play",this.eventBus.triggers[c.VID_PLAY]),this.videoEl.addEventListener("pause",this.eventBus.triggers[c.VID_PAUSE]),this.videoEl.addEventListener("timeupdate",this.eventBus.triggers[c.VID_TIMEUPDATE]),this.videoEl.addEventListener("ended",this.eventBus.triggers[c.VID_ENDED]),this.videoEl.addEventListener("volumechange",this.onVolumeChange),this.el.addEventListener("fullscreenchange",this.onScreenChange),this.el.addEventListener("mozfullscreenchange",this.onScreenChange),this.el.addEventListener("MSFullscreenChange",this.onScreenChange),this.el.addEventListener("webkitfullscreenchange",this.onScreenChange)},passDebugEventLog:function(){for(var e=["canplay","canplaythrough","loadeddata","loadedmetadata","loadstart","pause","play"],t=0;t<e.length;t++)this.videoEl.addEventListener(e[t],this.debugLog)},debugLog:function(e){window&&window.console&&window.console.log&&window.console.log("Media Event :: type :: ",e.type)},listen:function(){this.log("listen"),this.eventBus.addEventListener(c.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.addEventListener(c.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.addEventListener(c.VID_PLAY,this.onPlay,this),this.eventBus.addEventListener(c.VID_ENDED,this.onVideoEnded,this),this.eventBus.addEventListener(c.PLAY_PAUSE_TOGGLE,this.onPlayPauseClick,this),this.eventBus.addEventListener(c.MUTE_UNMUTE_TOGGLE,this.onMuteUnmuteClick,this),this.eventBus.addEventListener(c.FULLSCREEN_NORMAL_TOGGLE,this.onFullscreenNormalClick,this),this.eventBus.addEventListener(c.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.addEventListener(c.VID_CANPLAY,this.onCanPlay,this)},teardown:function(){this.pause({ended:!0}),this.mute(),this.videoEl.removeEventListener("loadstart",this.eventBus.triggers[c.VID_LOADSTART]),this.videoEl.removeEventListener("loadedmetadata",this.eventBus.triggers[c.VID_LOADEDMETADATA]),this.videoEl.removeEventListener("loadeddata",this.eventBus.triggers[c.VID_LOADEDDATA]),this.videoEl.removeEventListener("canplay",this.eventBus.triggers[c.VID_CANPLAY]),this.videoEl.removeEventListener("canplaythrough",this.eventBus.triggers[c.VID_CANPLAYTHROUGH]),this.videoEl.removeEventListener("waiting",this.eventBus.triggers[c.VID_WAITING]),this.videoEl.removeEventListener("progress",this.eventBus.triggers[c.VID_PROGRESS]),this.videoEl.removeEventListener("suspend",this.eventBus.triggers[c.VID_SUSPEND]),this.videoEl.removeEventListener("play",this.eventBus.triggers[c.VID_PLAY]),this.videoEl.removeEventListener("pause",this.eventBus.triggers[c.VID_PAUSE]),this.videoEl.removeEventListener("timeupdate",this.eventBus.triggers[c.VID_TIMEUPDATE]),this.videoEl.removeEventListener("ended",this.eventBus.triggers[c.VID_ENDED]),this.videoEl.removeEventListener("volumechange",this.onVolumeChange),this.videoEl.removeEventListener("click",this.eventBus.triggers[c.PLAY_PAUSE_TOGGLE]),this.el.removeEventListener("fullscreenchange",this.onScreenChange),this.el.removeEventListener("mozfullscreenchange",this.onScreenChange),this.el.removeEventListener("MSFullscreenChange",this.onScreenChange),this.el.removeEventListener("webkitfullscreenchange",this.onScreenChange),this.eventBus.removeEventListener(c.STARTED,this.onPlay,this),this.eventBus.removeEventListener(c.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.removeEventListener(c.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.removeEventListener(c.PLAY_PAUSE_TOGGLE,this.onPlayPauseClick,this),this.eventBus.removeEventListener(c.MUTE_UNMUTE_TOGGLE,this.onMuteUnmuteClick,this),this.eventBus.removeEventListener(c.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.removeEventListener(c.VID_CANPLAY,this.onCanPlay,this),this.zoo.teardown(),this.overlay.teardown(),this.controls.teardown(),this.removeNodes()},removeNodes:function(){this.injectEl.removeChild(this.el),this.videoEl=null,this.overlay.el=null,this.controls.el=null,this.el=null},onPlay:function(){this.videoStarted||(this.videoStarted=!0,this.eventBus.triggers[c.STARTED](),this.eventBus.removeEventListener(c.STARTED,this.onPlay,this))},onVideoEnded:function(){this.pause({ended:!0})},onPlayPauseClick:function(){this.videoEl.paused?this.shouldObeyMediaInteroperability?this.requestPlayback({userInitiated:!0}):this.videoEl.play():(this.videoEl.pause(),this.shouldObeyMediaInteroperability&&this.setMediaPaused())},onMuteUnmuteClick:function(e){this.isMuted()?(this.videoEl.volume=1,this.unmute()):this.mute()},setNormalPlayerBar:function(){l.remove(this.el,l.FULLSCREEN),this.el.fullscreen=!1,this.eventBus.trigger(c.VID_EXITFULLSCREEN)},onScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||this.videoEl&&this.videoEl.webkitDisplayingFullscreen?(l.add(this.el,l.FULLSCREEN),this.el.fullscreen=!0,this.eventBus.trigger(c.VID_ENTERFULLSCREEN)):this.setNormalPlayerBar()},onFullscreenNormalClick:function(e){this.isFullscreen()?this.normalScreenMode():this.fullscreenMode()},onScrubberBarClick:function(e){e=e.clickedFraction;this.videoEl.currentTime=this.videoEl.duration*e},onLoadedMetadata:function(e){this.log("onLoadedMetadata"),this.fullscreen&&(this.supportsFullscreen()?this.controls.addFullscreenButton():this.log("Fullscreen not supported. Disabling.")),this.needsAspectInjection()&&this.injectAspectStyles()},checkIsPlayingAndIsInWeblab:function(){return this.autoplay&&!this.isPlaying()&&this.isInWeblab},playbackOnMediaInterop:function(){this.shouldObeyMediaInteroperability?this.requestPlayback({userInitiated:!1}):this.videoEl.play()},onLoadedData:function(e){this.log("onLoadedData"),this.show(),this.checkIsPlayingAndIsInWeblab()&&this.playbackOnMediaInterop()},onCanPlay:function(e){this.log("onCanPlay"),(this.checkIsPlayingAndIsInWeblab()||this.autoplay)&&this.playbackOnMediaInterop()},createVideoEl:function(){var e=u.make("video",l.VIDEO),t=(e.volume=1,e.preload=!0,this.slate&&(e.poster=this.slate),this.playsInline&&(e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline","")),this.autosound);return e.muted=!t,t&&this.eventBus.trigger(c.UNMUTED),this.addSources(e),e},addSources:function(e){var t,i=/\.([a-z0-9]{2,4})$/.exec(this.src),i=(i?(i=this.createSource(this.src,i[1]),e.appendChild(i)):(i=this.createSource(this.src,"mp4"),t=this.createSource(this.src,"webm"),e.appendChild(i),e.appendChild(t)),document.createElement("p"));i.innerHTML="Sorry, your browser does not support HTML5 video.",e.appendChild(i)},createSource:function(e,t){var i=document.createElement("source");return i.src=new RegExp("\\."+t+"$").test(e)?e:e+"."+t,i.type="video/"+t,i},determineControlBarConfig:function(e){var t=this.controlBarDefaults(),i=e;if(!i)return t;for(var n,o=t,s=(null==i.autohide&&null!=i.autoHide&&(i.autohide=i.autoHide,delete i.autoHide),["width","autohide","anchorX","offsetX","anchorY","offsetY","hideBG"]),r=0;r<s.length;r++)null!=i[n=s[r]]&&(o[n]=this.addPxIfNumber(i[n]));return o},controlBarDefaults:function(){return{height:1.5*this.spriteDimensions.spriteHeight,autohide:!0,anchorX:"center",offsetX:0,anchorY:"bottom",offsetY:0,width:"100%",hideBG:!1}},addPxIfNumber:function(e){return"number"==typeof e?e+"px":e},determineSpriteDimensionsConfig:function(e){var t=this.spriteDimensionsDefaults();return e&&e.buttonSize?{buttonPadding:.25*(e=e.buttonSize),spriteHeight:e,spriteWidth:e,overlaySpriteHeight:100,overlaySpriteWidth:100}:t},spriteDimensionsDefaults:function(){return{buttonPadding:5,spriteHeight:20,spriteWidth:20,overlaySpriteHeight:100,overlaySpriteWidth:100}},injectPlayerStyles:function(){var e=[];e=(e=(e=(e=(e=e.concat(this.getUtilityStyles())).concat(this.getPlayerStyles())).concat(this.getIconStyles())).concat(this.getButtonStyles())).concat(this.getTwoStateStyles()),this.zoo.insertRules(e)},getUtilityStyles:function(){return[["."+l.UNSELECTABLE,{"user-select":"none"}],["."+l.HIDDEN,{display:"none"}],["."+l.INVISIBLE,{visibility:"hidden"}],["."+l.TRANSPARENT,{opacity:0}]]},getPlayerStyles:function(){return[["."+l.CONTAINER,{position:"relative","z-index":1,display:"block",width:"100%",height:"100%",margin:"0 auto","background-color":"black",overflow:"visible"}],["."+l.VIDEO,{position:"absolute","z-index":-1,top:0,left:0,height:"100%",width:"100%",cursor:"pointer"}]]},getIconStyles:function(){return[[["."+l.ICON,"."+l.ICON_HOVER],{position:"absolute"}],["."+l.ICON_HOVER,{top:this.spriteDimensions.buttonPadding+"px",left:this.spriteDimensions.buttonPadding+"px"}]]},getButtonStyles:function(){return[["."+l.BUTTON,{cursor:"pointer"}],[["."+l.BUTTON+" ."+l.ICON_DEFAULT,"."+l.BUTTON+":hover ."+l.ICON_HOVER],{opacity:1}],[["."+l.BUTTON+":hover ."+l.ICON_DEFAULT,"."+l.BUTTON+" ."+l.ICON_HOVER],{opacity:0}],[["."+l.BUTTON+":hover ."+l.ICON_DEFAULT,"."+l.BUTTON+" ."+l.ICON_HOVER],{transition:"opacity 0.2s linear"}],["."+l.BUTTON+":hover ."+l.ICON_DEFAULT,{transition:"opacity 0s linear 0.2s"}]]},getTwoStateStyles:function(){return[[["."+l.TWO_STATE_BUTTON,"."+l.TWO_STATE_BUTTON+" ."+l.TWO_STATE_DEFAULT,"."+l.TWO_STATE_BUTTON+" ."+l.TWO_STATE_ALT],{position:"absolute"}],["."+l.TWO_STATE_BUTTON,{display:"inline-block"}],[["."+l.TWO_STATE_BUTTON+" ."+l.TWO_STATE_DEFAULT,"."+l.TWO_STATE_BUTTON+"."+l.TOGGLED+" ."+l.TWO_STATE_ALT],{opacity:1,visibility:"visible"}],[["."+l.TWO_STATE_BUTTON+"."+l.TOGGLED+" ."+l.TWO_STATE_DEFAULT,"."+l.TWO_STATE_BUTTON+" ."+l.TWO_STATE_ALT],{opacity:0,visibility:"hidden"}]]},needsAspectInjection:function(){return 0===this.el.parentNode.clientHeight},injectAspectStyles:function(){var e=this.determineLoadedVideoDimensions(),e=(e.height/e.width*100).toFixed(4);this.aspectRule=this.zoo.insertRule("."+l.CONTAINER,{"padding-top":e+"%"})},determineLoadedVideoDimensions:function(){return{width:this.videoEl.videoWidth,height:this.videoEl.videoHeight}},setInitialDebugMode:function(){var e=m.getQueryParam("reelyDebug");"1"!==e&&"true"!==e||(this.reelyDebug=!0,console.log("Reely video logs enabled."))}},t.exports=n},{"../utils/bridge":113,"../utils/url":115,"../utils/weblab":116,"../zoolander.js":118,"./reely-controls.js":102,"./reely-css-classes.js":103,"./reely-el-maker.js":104,"./reely-event-bus.js":105,"./reely-events.js":106,"./reely-overlay.js":108,"./reely-spritesheet.js":110}],112:[function(e,t,i){var h={adCustomAction1001:!0,adCustomAction1002:!0,adCustomAction1003:!0,adCustomAction1004:!0,adCustomAction1005:!0,adCustomAction1006:!0,adCustomAction1007:!0,adCustomAction1008:!0,adCustomAction1009:!0,adCustomAction1031:!0,adCustomAction1032:!0,adCustomAction1033:!0,adCustomAction1034:!0,adCustomAction1035:!0,adCustomAction1036:!0,adCustomAction1037:!0,adCustomAction1038:!0,adCustomAction1039:!0,adCustomAction1040:!0,adCustomAction1041:!0,adCustomAction1042:!0,adCustomAction1043:!0,adCustomAction1044:!0,adCustomAction1045:!0,adCustomAction1046:!0,adCustomAction1047:!0,adCustomAction1048:!0,adCustomAction1049:!0,adCustomAction1050:!0,adCustomAction1101:!0,adCustomAction1102:!0,adCustomAction1103:!0,adCustomAction1104:!0,adCustomAction1105:!0,adCustomAction1106:!0,adCustomAction1107:!0,adCustomAction1108:!0,adCustomAction1109:!0,adCustomAction1110:!0,adCustomAction1111:!0,adCustomAction1112:!0,adCustomAction1113:!0,adCustomAction1114:!0,adCustomAction1115:!0,adCustomAction1116:!0,adCustomAction1117:!0,adCustomAction1118:!0,adCustomAction1119:!0,adCustomAction1120:!0,adCustomAction1201:!0,adCustomAction1202:!0,adCustomAction1203:!0,adCustomAction1204:!0,adCustomAction1205:!0,adCustomAction1206:!0,adCustomAction1207:!0,adCustomAction1208:!0,adCustomAction1209:!0,adCustomAction1210:!0,adCustomAction1211:!0,adCustomAction1212:!0,adCustomAction1213:!0,adCustomAction1214:!0,adCustomAction1215:!0,adCustomAction1216:!0,adCustomAction1217:!0,adCustomAction1218:!0,adCustomAction1219:!0,adCustomAction1220:!0,adCustomAction1301:!0,adCustomAction1302:!0,adCustomAction1303:!0,adCustomAction1304:!0,adCustomAction1305:!0,adCustomAction1306:!0,adCustomAction1307:!0,adCustomAction1308:!0,adCustomAction1309:!0,adCustomAction1310:!0,adCustomAction1311:!0,adCustomAction1312:!0,adCustomAction1313:!0,adCustomAction1314:!0,adCustomAction1315:!0,adCustomAction1316:!0,adCustomAction1317:!0,adCustomAction1318:!0,adCustomAction1319:!0,adCustomAction1320:!0,adCustomAction1321:!0,adCustomAction1322:!0,adCustomAction1323:!0,adCustomAction1324:!0,adCustomAction1325:!0,adCustomAction1326:!0,adCustomAction1327:!0,adCustomAction1328:!0,adCustomAction1329:!0,adCustomAction1330:!0,adCustomAction1331:!0,adCustomAction1332:!0,adCustomAction1333:!0,adCustomAction1334:!0,adCustomAction1335:!0,adCustomAction1336:!0,adCustomAction1337:!0,adCustomAction1338:!0,adCustomAction1339:!0,adCustomAction1340:!0,adCustomAction1341:!0,adCustomAction1342:!0,adCustomAction1343:!0,adCustomAction1344:!0,adCustomAction1345:!0};t.exports=function(){for(var d={},i=5,n=2,o=1,e=1e3,t=[];e<=1499;e++){var s="adCustomAction"+e;h[s]||t.push(s)}var p,m,l=[],u=!1;function r(e){return isNaN(e)?t.length?t.shift():(console&&console.warn&&console.warn("WARNING: out of tracking actions!"),""):"adCustomAction"+(1!==e?e:"")}function a(e){var t;return isNaN(e)?o<=10?(t="tabClick"+(1!==o?o:""),o++,t):r():"tabClick"+(1!==e?e:"")}function f(e){var t;return isNaN(e)?Array.isArray(e)&&5===e.length?{"media/start":isNaN(e[0])?e[0]:r(e[0]),"media/firstQuartile":isNaN(e[1])?e[1]:r(e[1]),"media/midpoint":isNaN(e[2])?e[2]:r(e[2]),"media/thirdQuartile":isNaN(e[3])?e[3]:r(e[3]),"media/complete":isNaN(e[4])?e[4]:r(e[4])}:n<=i?(t=1!==n?n:"",n++,{"media/start":"videoStart"+t,"media/firstQuartile":"videoFirstQuartile"+t,"media/midpoint":"videoMidpoint"+t,"media/thirdQuartile":"videoThirdQuartile"+t,"media/complete":"videoComplete"+t}):{"media/start":r(),"media/firstQuartile":r(),"media/midpoint":r(),"media/thirdQuartile":r(),"media/complete":r()}:{"media/start":"videoStart"+(t=1!==e?e:""),"media/firstQuartile":"videoFirstQuartile"+t,"media/midpoint":"videoMidpoint"+t,"media/thirdQuartile":"videoThirdQuartile"+t,"media/complete":"videoComplete"+t}}function c(e,t,i){if(e[t])for(var n in i)e[t][n]?e[t][n]=[].concat(e[t][n],i[n]):e[t][n]=i[n];else e[t]=i}return p={alphalfa:{isMedia:!0},animaniac:{},gallery:{"click/clickPrev":a,"click/clickNext":a,"intent/swipeLeft":r,"intent/swipeRight":r},graphic:{},"minimal-video":{isMedia:!0},panel:{},reely:{isMedia:!0},rotator:{"intent/navigateRotator":r},rotatorbutton:{"click/click":a},"slider-rotator":{"click/clickPrev":a,"click/clickNext":a,"intent/swipeLeft":r,"intent/swipeRight":r}},m={click:{tracker:a,string:"click/click"},hoverIn:{tracker:r,string:"intent/hoverIn"},hoverOut:{tracker:r,string:"intent/hoverOut"}},{trackingConsumer:function(e){var t,i,n,o,s=e.eventType+"/"+(e.data&&e.data.eventSubType?e.data.eventSubType:""),r=d[e.unitName],a=[];if(r&&r[e.componentName])if(0<(a=r[e.componentName][s]?a.concat(r[e.componentName][s]):a).length){for(n=0;n<a.length;n++){for(i=0,o=l.length;i<o;i++)l[i](a[n],e,!1);u&&console.log("tracking "+a[n]+". "+e.componentName+" in "+e.unitName+" emitted "+s,e)}if(r&&r.global&&r.global[s]&&(t=r.global[s])){for(i=0,o=l.length;i<o;i++)l[i](t,e,!0);u&&console.log("tracking "+t+" as a global event. "+e.componentName+" in "+e.unitName+" emitted "+s,e)}}else u&&console.warn("tracking attempted, but couldn't find the event in the map. ",e);else u&&console.warn("attempt to track event on unmapped component: "+e.componentName+":"+e.eventType+"/"+e.data.eventSubType,e)},addToTrackingMap:function(e){var t,i,n,o,s={};if(e.trackingConfigs)for(t=0,i=e.trackingConfigs.length;t<i;t++)if((n=e.trackingConfigs[t]).componentName&&n.data&&n.data.trackingNumber&&n.trackingType)switch(n.trackingType){case"tab":c(s,n.componentName,{"click/click":a(n.data.trackingNumber)});break;case"video":c(s,n.componentName,f(n.data.trackingNumber));break;case"custom":c(s,n.componentName,{"click/click":r(n.data.trackingNumber)});break;default:c(s,n.componentName,{"click/click":n.trackingType})}else n.componentName&&n.trackingType&&c(s,n.componentName,{"click/click":n.trackingType});else for(s.global=f(1),t=0,i=(o=e.children).length;t<i;t++)!function e(t,i){var n,o,s,r,a=t.type,d={},l=!0,u=!0,c=p[a];if(u=(!t.video||!t.video.loop)&&u){if(t.actions)for(s in m)void 0!==t.actions[s]&&t.actions[s].length&&(d[m[s].string]=m[s].tracker(),l=!1);if(c)for(s in c)if("function"==typeof c[s])d[s]=c[s](),l=!1;else if("isMedia"===s&&!0===c[s]){var h=f();for(r in h)d[r]=h[r];l=!1}!1===l&&(t.description&&(d.label=t.description),i[t.name]=d)}if(t.children)for(n=0,o=t.children.length;n<o;n++)e(t.children[n],i)}(o[t],s);d[e.name]=s},getReadableTrackingMap:function(){var e,t,i,n="";for(e in d)for(t in d[e])for(i in d[e][t])"label"!==i&&(n+=e+": "+(d[e][t].label?'"'+d[e][t].label+'"':t)+" "+i+" = "+d[e][t][i]+"\n");return n},getTrackingMap:function(){return d},addConsumerCallback:function(e){"function"==typeof e&&l.push(e)},setDebug:function(e){u=!!e}}}},{}],113:[function(e,t,i){t.exports={getBridge:function(){return window.NativeWebBridge||(window.top.ad_utils&&window.top.ad_utils.mediaOrchestratorBridge?window.top.ad_utils.mediaOrchestratorBridge:void 0)}}},{}],114:[function(e,t,i){function r(e,t){return e.hasOwnProperty(t)&&"function"==typeof e[t]&&"function"==typeof e[t].apply}function a(e){var t;switch(!0){case"object"==typeof e&&e.hasOwnProperty("length"):t=e;break;case"object"==typeof e&&null===e:t=[e];break;default:t=[]}return t}t.exports=function(){var s=[];return{notifyObserver:function(e,t,i){e=s.indexOf(e),i=a(i);-1<e&&r(s[e],t)&&s[e][t].apply(s[e],i)},notify:function(e,t){for(var i=s.length,n=0,o=a(t);n<i;n++)r(s[n],e)&&s[n][e].apply(s[n],o)},subscribe:function(e){s.push(e)},unsubscribe:function(e){e=s.indexOf(e);-1<e&&s.splice(e,1)},clear:function(){s=[]}}}},{}],115:[function(e,t,i){t.exports={getQueryParam:function(e){return new URLSearchParams(window.location.search).get(e)||""}}},{}],116:[function(e,t,i){var n=e("./bridge").getBridge;t.exports={shouldObeyMediaInteroperability:function(){var e=window.top.Tarnhelm&&window.top.Tarnhelm.getDeviceInfo();return!(void 0===n()||!e)&&(!!e.isIMDbApp||window.top.ad_utils&&window.top.ad_utils.isResponsive())},isInWeblab:function(e){return null!==document.getElementById(e)},autoplayId:"TARNHELM_528955"}},{"./bridge":113}],117:[function(e,t,i){var n=(()=>{var e,t="-webkit",i="-moz",n="-ms",s={"box-shadow":[t],transform:[t,n,i,"-o"],perspective:[t,n],"box-sizing":[t,n,i],"background-size":[t],"user-select":[t,i,n],animation:[t,i,"-o"],transition:[t,i,"-o"],filter:[t,i,n,"-o"]},o=[];for(e in s)s.hasOwnProperty(e)&&o.push(e);return{needsFixer:function(e){return-1!==o.indexOf(e)},prefixedProps:function(e){var t=[e];if(this.needsFixer(e))for(var i,n=s[e],o=0;o<n.length;o++)i=n[o]+"-"+e,t.push(i);return t}}})();t.exports=n},{}],118:[function(e,t,i){function o(e,t,i){this.index=e,this.selector=t,this.styleText=i}function n(e){this.doc=this._determineDocument(e),this.styleElId=this._determineStyleElId(e),this.styleEl=this._createStyleEl(this.styleElId),this.prefixId=this._determinePrefixId(e),this.doc.head.appendChild(this.styleEl),this.ss=this.styleEl.sheet,this.isFrozen=!1,this._useInsertRule="insertRule"in this.ss,this._rulesKey=this._determineRulesKey(),this._animPrefix=this._determineAnimationPrefix(),this.NULLSELECTOR=".NULLRULE"+this.styleElId}var s=e("./zoofixer.js");t.exports=(n.prototype={rules:function(){return this.ss[this._rulesKey]},teardown:function(){this.doc=null,this.ss=null,this.styleEl=null},freeze:function(){this.isFrozen=!0},unfreeze:function(){this.isFrozen=!1},insertRule:function(e,t){if(!this.isFrozen){if(e&&t)return e=this._determineSelectors(e),t=this._determineStylesText(t),this._insertRule(e,t);console.warn("Bad selectors and/or stylesObj provided to Zoolander.")}},insertRules:function(e){if(!this.isFrozen){for(var t=[],i=0;i<e.length;i++){var n=e[i],o=n[0],o=this.insertRule(o,n[1]);t.push(o)}return t}},deleteRule:function(e){void 0===e||this.isFrozen||(this.ss.deleteRule(e.index),this._attemptInsert(this.NULLSELECTOR,"",e.index))},insertKeyframes:function(e,t){e="@"+this._animPrefix+"keyframes "+e,t=this._determineKeyframesStyleText(t);return this._insertRule(e,t,!0)},insertAnimation:function(e,t,i){e=this._determineSelectors(e),t=this._animPrefix+t+": "+i;return this._insertRule(e,t)},_insertRule:function(t,i,e){var n=this.rules().length;try{this._attemptInsert(t,i,n,e)}catch(e){return void console.warn("Zoolander failed to insertRule :: "+e,t,"{",i,"}")}return new o(n,t,i)},_attemptInsert:function(e,t,i,n){this._useInsertRule?this.ss.insertRule(e+" {"+t+"}",i):this.ss.addRule(e,t,i)},_createStyleEl:function(e){var e="imdb_ad_design_injected_"+e,t=this.doc.getElementById(e);return t||((t=this.doc.createElement("style")).type="text/css",t.id=e,t.appendChild(this.doc.createTextNode(""))),t},_determineStyleElId:function(e){return e&&e.id?e.id:Date.now()+Math.floor(10*Math.random())},_determineDocument:function(e){return e&&e.document?e.document:document},_determinePrefixId:function(e){var e=e&&e.prefixId?e.prefixId:"";return e?" "===(e="#"===e.charAt(0)?e:"#"+e).charAt(e.length-1)?e:e+" ":""},_isArr:function(e){return"[object Array]"===Object.prototype.toString.call(e)},_determineSelectors:function(e){var t,i,n=this.prefixId;return"string"==typeof e&&-1!==e.indexOf(",")?t=e.split(","):this._isArr(e)?t=e:i=e,t?this._concatSelectors(t,n):n+" "+i},_concatSelectors:function(e,t){for(var i="",n=0;n<e.length;n++)i+=t+" "+e[n],n!==e.length-1&&(i+=", ");return i},_determineAnimationPrefix:function(){for(var e=["webkit","Moz","ms"],t=this.doc.createElement("div"),i="",n=0;n<e.length;n++)if(void 0!==t.style[e[n]+"AnimationName"]){i="-"+e[n].toLowerCase()+"-";break}return i},_determineStylesText:function(e){var t,i="";for(t in e)e.hasOwnProperty(t)&&(i+=this._buildStyleDeclaration(t,e[t]));return i},_buildStyleDeclaration:function(e,t){if(s.needsFixer(e)){for(var i="",n=s.prefixedProps(e),o=0;o<n.length;o++)i+=n[o]+": "+t+"; ";return i}return e+": "+t+"; "},_determineKeyframesStyleText:function(e){var t,i,n="";for(t in e)e.hasOwnProperty(t)&&(i=this._determineStylesText(e[t]),n+=this._buildKeyframeStylesText(t,i));return n},_buildKeyframeStylesText:function(e,t){return e+" { "+t+" } "},_determineRulesKey:function(){return"cssRules"in this.ss?"cssRules":"rules"}}).constructor=n},{"./zoofixer.js":117}],119:[function(e,i,n){!function(I){!function(){var e,t;e=this,t=function(){var n="undefined"!=typeof Map?Map:(Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){e=o(this.__entries__,e),e=this.__entries__[e];return e&&e[1]},e.prototype.set=function(e,t){var i=o(this.__entries__,e);~i?this.__entries__[i][1]=t:this.__entries__.push([e,t])},e.prototype.delete=function(e){var t=this.__entries__,e=o(t,e);~e&&t.splice(e,1)},e.prototype.has=function(e){return!!~o(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var i=0,n=this.__entries__;i<n.length;i++){var o=n[i];e.call(t,o[1],o[0])}},e);function e(){this.__entries__=[]}function o(e,i){var n=-1;return e.some(function(e,t){return e[0]===i&&(n=t,!0)}),n}var i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,t=void 0!==I&&I.Math===Math?I:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),d="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(t):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},l=2;var s=["top","right","bottom","left","width","height","size","weight"],r="undefined"!=typeof MutationObserver,a=(u.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},u.prototype.removeObserver=function(e){var t=this.observers_,e=t.indexOf(e);~e&&t.splice(e,1),!t.length&&this.connected_&&this.disconnect_()},u.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},u.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),0<e.length},u.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),r?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},u.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},u.prototype.onTransitionEnd_=function(e){var e=e.propertyName,t=void 0===e?"":e;s.some(function(e){return!!~t.indexOf(e)})&&this.refresh()},u.getInstance=function(){return this.instance_||(this.instance_=new u),this.instance_},u.instance_=null,u);function u(){function e(){s&&(s=!1,n()),r&&i()}function t(){d(e)}function i(){var e=Date.now();if(s){if(e-a<l)return;r=!0}else r=!(s=!0),setTimeout(t,o);a=e}var n,o,s,r,a;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(n=this.refresh.bind(this),r=s=!(o=20),a=0,i)}var c=function(e,t){for(var i=0,n=Object.keys(t);i<n.length;i++){var o=n[i];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},h=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||t},p=y(0,0,0,0);function m(e){return parseFloat(e)||0}function f(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(e,t){return e+m(i["border-"+t+"-width"])},0)}function g(e){var t,i,n,o,s,r,a=e.clientWidth,d=e.clientHeight;return a||d?(i=(t=(e=>{for(var t={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var o=n[i],s=e["padding-"+o];t[o]=m(s)}return t})(r=h(e).getComputedStyle(e))).left+t.right,n=t.top+t.bottom,o=m(r.width),s=m(r.height),"border-box"===r.boxSizing&&(Math.round(o+i)!==a&&(o-=f(r,"left","right")+i),Math.round(s+n)!==d)&&(s-=f(r,"top","bottom")+n),e!==h(e).document.documentElement&&(r=Math.round(o+i)-a,e=Math.round(s+n)-d,1!==Math.abs(r)&&(o-=r),1!==Math.abs(e))&&(s-=e),y(t.left,t.top,o,s)):p}var v="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof h(e).SVGGraphicsElement}:function(e){return e instanceof h(e).SVGElement&&"function"==typeof e.getBBox};function _(e){var t;return i?v(e)?y(0,0,(t=(t=e).getBBox()).width,t.height):g(e):p}function y(e,t,i,n){return{x:e,y:t,width:i,height:n}}A.prototype.isActive=function(){var e=_(this.target);return(this.contentRect_=e).width!==this.broadcastWidth||e.height!==this.broadcastHeight},A.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var b=A;function A(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}var w=function(e,t){i=(t=t).x,n=t.y,s=t.width,t=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(o.prototype),c(o,{x:i,y:n,width:s,height:t,top:n,right:i+s,bottom:t+n,left:i});var i,n,o,s=o;c(this,{target:e,contentRect:s})},E=(S.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},S.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},S.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},S.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},S.prototype.broadcastActive=function(){var e,t;this.hasActive()&&(e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new w(e.target,e.broadcastRect())}),this.callback_.call(e,t,e),this.clearActive())},S.prototype.clearActive=function(){this.activeObservations_.splice(0)},S.prototype.hasActive=function(){return 0<this.activeObservations_.length},S);function S(e,t,i){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}var T=new("undefined"!=typeof WeakMap?WeakMap:n),C=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=a.getInstance(),t=new E(t,i,this);T.set(this,t)};return["observe","unobserve","disconnect"].forEach(function(t){C.prototype[t]=function(){var e;return(e=T.get(this))[t].apply(e,arguments)}}),void 0!==t.ResizeObserver?t.ResizeObserver:C},"object"==typeof n&&void 0!==i?i.exports=t():"function"==typeof define&&define.amd?define(t):e.ResizeObserver=t()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],120:[function(b,B,j){var i,e,t,n,o,s,r,a,A="undefined"!=typeof window?window:void 0,F=void 0,w={version:"v2.2.4",settings:{}},U=0,E="riot-",S=E+"tag",T="string",C="object",I="undefined",V="function",H=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,W=["_item","_id","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],G=0|(A&&A.document||{}).documentMode,N=Array.isArray;function z(){return o.href.split("#")[1]||""}function d(e){return e.split("/")}function l(e){(e=e.type?z():e)!=a&&(s.trigger.apply(null,["H"].concat(d(e))),a=e)}w.observable=function(s){var r={},t=0;return(s=s||{}).on=function(e,i){return R(i)&&(typeof i.id===I&&(i._id=t++),e.replace(/\S+/g,function(e,t){(r[e]=r[e]||[]).push(i),i.typed=0<t})),s},s.off=function(e,o){return"*"==e?r={}:e.replace(/\S+/g,function(e){if(o)for(var t,i=r[e],n=0;t=i&&i[n];++n)t._id==o._id&&i.splice(n--,1);else r[e]=[]}),s},s.one=function(t,i){return s.on(t,function e(){s.off(t,e),i.apply(s,arguments)})},s.trigger=function(e){for(var t,i=[].slice.call(arguments,1),n=r[e]||[],o=0;t=n[o];++o)t.busy||(t.busy=1,t.apply(s,t.typed?[e].concat(i):i),n[o]!==t&&o--,t.busy=0);return r.all&&"all"!=e&&s.trigger.apply(s,["all",e].concat(i)),s},s},w.mixin=(i={},function(e,t){if(!t)return i[e];i[e]=t}),e=w,t="hashchange",(n=A)&&(o=n.location,s=e.observable(),r=!1,(e=e.route=function(e){e[0]?l(o.hash=e):s.on("H",e)}).exec=function(e){e.apply(null,d(z()))},e.parser=function(e){d=e},e.stop=function(){r&&(n.removeEventListener?n.removeEventListener(t,l,!1):n.detachEvent("on"+t,l),s.off("*"),r=!1)},e.start=function(){r||(n.addEventListener?n.addEventListener(t,l,!1):n.attachEvent("on"+t,l),r=!0)},e.start()),X=/[{}]/g;var q,Y,u,X,c,K,$,O=function(e){var t=w.settings.brackets||"{ }";return q!==t&&(u=(q=t).split(" "),Y=u.map(function(e){return e.replace(/(?=.)/g,"\\")})),e instanceof RegExp?"{ }"===t?e:new RegExp(e.source.replace(X,function(e){return Y[~~("}"===e)]}),e.global?"g":""):u[e]},D=(c={},K='"in d?d:'+(A?"window).":"global)."),$=/(['"\/])(?:[^\\]*?|\\.|.)*?\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function\s*\()|([A-Za-z_$]\w*)/g,function(e,t){return e&&(c[e]||(c[e]=((e,t)=>e.indexOf(O(0))<0?(e=e.replace(/\n|\r\n?/g,"\n"),function(){return e}):(e=e.replace(O(/\\{/g),"￰").replace(O(/\\}/g),"￱"),t=((i,e)=>{var n=[];return e.map(function(e,t){t=i.indexOf(e),n.push(i.slice(0,t),e),i=i.slice(t+e.length)}),i&&n.push(i),n})(e,Z(e,O(/{/),O(/}/))),e=2!==t.length||t[0]?"["+t.map(function(e,t){return t%2?Q(e,!0):'"'+e.replace(/\n|\r\n?/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':Q(t[1]),new Function("d","return "+e.replace(/\uFFF0/g,O(0)).replace(/\uFFF1/g,O(1))+";")))(e)))(t)});function Q(e,t){return e=e.replace(/\n|\r\n?/g," ").replace(O(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(e)?"["+Z(e,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(e){return e.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(e,t,i){return i.replace(/[^&|=!><]+/g,J)+'?"'+t+'":"",'})}).join("")+'].join(" ").trim()':J(e,t)}function J(e,t){return(e=e.trim())?"(function(v){try{v="+e.replace($,function(e,t,i){return i?'(("'+i+K+i+")":e})+"}catch(e){}return "+(!0===t?'!v&&v!==0?"":v':"v")+"}).call(d)":""}function Z(o,e,t){var s,r=0,a=[],e=new RegExp("("+e.source+")|("+t.source+")","g");return o.replace(e,function(e,t,i,n){!r&&t&&(s=n),(r+=t?1:-1)||null==i||a.push(o.slice(s,n+i.length))}),a}te={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},h="div",ee=G&&G<10;var ee,te,h,ie=function(e){var t,i,n,o=e&&e.match(/^\s*<([-\w]+)/),s=o&&o[1].toLowerCase(),r=p(te[s]||h);return r.stub=!0,ee&&s&&(o=s.match(H))?(t=r,i=e,s=s,o=!!o[1],n=p(h),o=o?"select>":"table>",n.innerHTML="<"+o+i+"</"+o,(i=n.getElementsByTagName(s)[0])&&t.appendChild(i)):r.innerHTML=e,r};function ne(e,t,i){var n={};return n[e.key]=t,e.pos&&(n[e.pos]=i),n}function oe(s,r,a){L(s,"each");var d,e,t,l=de(s),i=s.outerHTML,u=!!y[l],c=y[l]||{tmpl:i},h=s.parentNode,p=document.createComment("riot placeholder"),m=[],f=v(s);h.insertBefore(p,s),i=a,e=O(0),t=i.trim().slice(e.length).match(/^\s*(\S+?)\s*(?:,\s*(\S+))?\s+in\s+(.+)$/),a=t?{key:t[1],pos:t[2],val:e+t[3]}:{val:i},r.one("premount",function(){h.stub&&(h=r.root),s.parentNode.removeChild(s)}).on("update",function(){for(var t=D(a.val,r),e=(N(t)||(d=t?JSON.stringify(t):"",t=t?Object.keys(t).map(function(e){return ne(a,e,t[e])}):[]),document.createDocumentFragment()),i=m.length,n=t.length;n<i;)m[--i].unmount(),m.splice(i,1);for(i=0;i<n;++i){var o=!d&&a.key?ne(a,t[i],i):t[i];m[i]?m[i].update(o):((m[i]=new g(c,{parent:r,isLoop:!0,hasImpl:u,root:H.test(l)?h:s.cloneNode(),item:o},s.innerHTML)).mount(),e.appendChild(m[i].root)),m[i]._item=o}h.insertBefore(e,p),f&&(r.tags[l]=m)}).one("updated",function(){var t=Object.keys(r);k(h,function(e){1!=e.nodeType||e.isLoop||e._looped||(e._visited=!1,e._looped=!0,ce(e,r,t))})})}function se(e,i,n){k(e,function(e){var t;1==e.nodeType&&(e.isLoop=e.isLoop||e.parentNode&&e.parentNode.isLoop||e.getAttribute("each")?1:0,(t=v(e))&&!e.isLoop&&n.push(((e,t,i)=>{var n,e=new g(e,{root:t,parent:i},t.innerHTML),o=de(t),i=M(i);return e.parent=i,(n=i.tags[o])?(N(n)||(i.tags[o]=[n]),~i.tags[o].indexOf(e)||i.tags[o].push(e)):i.tags[o]=e,t.innerHTML="",e})(t,e,i)),e.isLoop||ce(e,i,[]))})}function re(e,t,n){function o(e,t,i){0<=t.indexOf(O(0))&&n.push(P({dom:e,expr:t},i))}k(e,function(n){var e=n.nodeType;if(3==e&&"STYLE"!=n.parentNode.tagName&&o(n,n.nodeValue),1==e)return(e=n.getAttribute("each"))?(oe(n,t,e),!1):(x(n.attributes,function(e){var t=e.name,i=t.split("__")[1];if(o(n,e.value,{attr:i||t,bool:i}),i)return L(n,t),!1}),!v(n)&&void 0)})}function g(o,e,t){var i,s=w.observable(this),r=(i=e.opts,_.prototype=i,new _||{}),a=ie(o.tmpl),d=e.parent,l=e.isLoop,u=e.hasImpl,c=le(e.item),h=[],n=[],p=e.root,m=o.fn,f=p.tagName.toLowerCase(),g={},v=[];function _(){}function y(){var t=(!u||!l)&&d||s;x(p.attributes,function(e){r[e.name]=D(e.value,t)}),x(Object.keys(g),function(e){r[e]=D(g[e],t)})}function b(t){var e;x(n,function(e){e[t?"mount":"unmount"]()}),d&&(e=t?"on":"off",(l?d:d[e]("update",s.update))[e]("unmount",s.unmount))}m&&p._tag&&p._tag.unmount(!0),this.isMounted=!1,p.isLoop=l,(p._tag=this)._id=U++,P(this,{parent:d,root:p,opts:r,tags:{}},c),x(p.attributes,function(e){var t=e.value;O(/{.*}/).test(t)&&(g[e.name]=t)}),a.innerHTML&&!/^(select|optgroup|table|tbody|tr|col(?:group)?)$/.test(f)&&(a.innerHTML=a.innerHTML.replace(/<(yield)\/?>(<\/\1>)?/gi,t||"")),this.update=function(e){if(e=le(e),s.parent&&l&&x(Object.keys(s.parent),function(e){var t=!~W.indexOf(e)&&~v.indexOf(e);typeof s[e]!==I&&!t||(t||v.push(e),s[e]=s.parent[e])}),e&&typeof c===C){var t,i=e;for(t in c)typeof s[t]!==I&&(s[t]=i[t]);c=e}var u;P(s,e),y(),s.trigger("update",e),u=s,x(h,function(e,t){var i,n,o,s,r=e.dom,a=e.attr,d=D(e.expr,u),l=e.dom.parentNode;e.bool?d=!!d&&a:null==d&&(d=""),l&&"TEXTAREA"==l.tagName&&(d=(""+d).replace(/riot-/g,"")),e.value!==d&&(e.value=d,a?(L(r,a),R(d)?(n=d,s=u,(o=r)[a]=function(e){var t=s._item,i=s.parent;if(!t)for(;i&&!t;)t=i._item,i=i.parent;e=e||A.event;try{e.currentTarget=o,e.target||(e.target=e.srcElement),e.which||(e.which=e.charCode||e.keyCode)}catch(e){}e.item=t,!0===n.call(s,e)||/radio|check/.test(o.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),e.preventUpdate||(t?M(i):s).update()}):"if"==a?(i=e.stub,l=function(){ae(r.parentNode,r,i)},d?i&&(ae(i.parentNode,i,r),r.inStub=!1,ue(r)||k(r,function(e){e._tag&&!e._tag.isMounted&&(e._tag.isMounted=!!e._tag.trigger("mount"))})):(i=e.stub=i||document.createTextNode(""),r.parentNode?l():(u.parent||u).one("updated",l),r.inStub=!0)):/^(show|hide)$/.test(a)?r.style.display=(d="hide"==a?!d:d)?"":"none":"value"==a?r.value=d:(l=E,a.slice(0,l.length)===l&&a!=S?d&&r.setAttribute(a.slice(E.length),d):e.bool&&!(r[a]=d)||typeof d!==C&&r.setAttribute(a,d))):r.nodeValue=""+d)}),s.trigger("updated")},this.mixin=function(){x(arguments,function(t){t=typeof t===T?w.mixin(t):t,x(Object.keys(t),function(e){"init"!=e&&(s[e]=R(t[e])?t[e].bind(s):t[e])}),t.init&&t.init.bind(s)()})},this.mount=function(){if(y(),m&&m.call(s,r),re(a,s,h),b(!0),o.attrs||u){for(var e,t=o.attrs,i=function(e,t){p.setAttribute(e,t)},n=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;e=n.exec(t);)i(e[1].toLowerCase(),e[2]||e[3]||e[4]);re(s.root,s,h)}if(s.parent&&!l||s.update(c),s.trigger("premount"),l&&!u)s.root=p=a.firstChild;else{for(;a.firstChild;)p.appendChild(a.firstChild);p.stub&&(s.root=p=d.root)}!s.parent||s.parent.isMounted?(s.isMounted=!0,s.trigger("mount")):s.parent.one("mount",function(){ue(s.root)||(s.parent.isMounted=s.isMounted=!0,s.trigger("mount"))})},this.unmount=function(e){var i,t=p,n=t.parentNode;if(n){if(d)i=M(d),N(i.tags[f])?x(i.tags[f],function(e,t){e._id==s._id&&i.tags[f].splice(t,1)}):i.tags[f]=F;else for(;t.firstChild;)t.removeChild(t.firstChild);e?n.removeAttribute("riot-tag"):n.removeChild(t)}s.trigger("unmount"),b(),s.off("*"),p._tag=null},se(a,this,n)}function ae(e,t,i){e&&(e.insertBefore(i,t),e.removeChild(t))}function x(e,t){for(var i,n=0,o=(e||[]).length;n<o;n++)null!=(i=e[n])&&!1===t(i,n)&&n--;return e}function R(e){return typeof e===V}function L(e,t){e.removeAttribute(t)}function v(e){return e.tagName&&y[e.getAttribute(S)||e.tagName.toLowerCase()]}function M(e){for(var t=e;!v(t.root)&&t.parent;)t=t.parent;return t}function de(e){var t=v(e),i=e.getAttribute("name");return i&&i.indexOf(O(0))<0?i:t?t.name:e.tagName.toLowerCase()}function P(e){for(var t,i=arguments,n=1;n<i.length;++n)if(t=i[n])for(var o in t)e[o]=t[o];return e}function le(e){if(!(e instanceof g||e&&typeof e.trigger==V))return e;var t,i={};for(t in e)~W.indexOf(t)||(i[t]=e[t]);return i}function k(e,t){if(e&&!1!==t(e))for(e=e.firstChild;e;)k(e,t),e=e.nextSibling}function ue(e){for(;e;){if(e.inStub)return 1;e=e.parentNode}}function p(e){return document.createElement(e)}function m(e,t){return(t||document).querySelectorAll(e)}function ce(e,t,i){var n;e._visited||(n=e.getAttribute("id")||e.getAttribute("name"))&&(i.indexOf(n)<0&&((i=t[n])?N(i)?i.push(e):t[n]=[i,e]:t[n]=e),e._visited=!0)}var f,_=[],y={};function he(e){var t;w.render||(f||(f=p("style")).setAttribute("type","text/css"),t=document.head||document.getElementsByTagName("head")[0],f.styleSheet?f.styleSheet.cssText+=e:f.innerHTML+=e,f._rendered||(f.styleSheet?document.body.appendChild(f):(e=document.querySelector("style[type=riot]"))?(e.parentNode.insertBefore(f,e),e.parentNode.removeChild(e)):t.appendChild(f)),f._rendered=!0)}w.tag=function(e,t,i,n,o){return R(n)&&(o=n,/^[\w\-]+\s?=/.test(i)?(n=i,i=""):n=""),i&&(R(i)?o=i:he(i)),y[e]={name:e,tmpl:t,attrs:n,fn:o},e},w.mount=function(e,i,n){var t,o,s=[];function r(e){var t="";return x(e,function(e){t+=", *["+S+'="'+e.trim()+'"]'}),t}function a(){var e=Object.keys(y);return e+r(e)}function d(e){var t;e.tagName?(!i||(t=e.getAttribute(S))&&t==i||e.setAttribute(S,i),(t=((e,t,i)=>{var n=y[t],t=e._innerHTML=e._innerHTML||e.innerHTML;if(e.innerHTML="",(n=n&&e?new g(n,{root:e,opts:i},t):n)&&n.mount)return n.mount(),_.push(n),n.on("unmount",function(){_.splice(_.indexOf(n),1)})})(e,i||e.getAttribute(S)||e.tagName.toLowerCase(),n))&&s.push(t)):e.length&&x(e,d)}return typeof i===C&&(n=i,i=0),e=typeof e===T?("*"===e?e=t=a():e+=r(e.split(",")),m(e)):e,"*"===i&&(i=t||a(),e=e.tagName?m(i,e):(o=[],x(e,function(e){o.push(m(i,e))}),o),i=0),e.tagName?d(e):x(e,d),s},w.update=function(){return x(_,function(e){e.update()})},w.mountTo=w.mount,w.util={brackets:O,tmpl:D},typeof j===C?B.exports=w:"function"==typeof define&&define.amd?define(function(){return A.riot=w}):A.riot=w},{}],121:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.collapseAd=function(e){s(e,"none")},i.collapseElement=function(e,t){o(e,t,"none")},i.uncollapseAd=function(e){s(e,"block")},i.uncollapseElement=function(e,t){o(e,t,"block")};let n=["_wrapper","_before","_after","_sponsored"];function o(e,t,i){e=e.document.getElementById(t);e&&(e.style.display=i)}function s(e,t){var i=e.id||e.parentElement.id;e.style.display=t;for(let e=0;e<n.length;e++)o(window,i+n[e],t)}},{}],122:[function(e,t,i){var n=e("./ads-csa"),o=window.uet,s=window.uex;function r(e){consoleLog(e,"ads-amazon-csm")}var a,d,l=["top_ad","injected_billboard","injected_navstrip","top_rhs","middle_rhs","btf_rhs2","rhs_cornerstone","bottom_ad","inline20","inline40","inline50","inline60","inline80","inlinebottom","interstitial","mediaviewer_banner","provider_promotion","ss_online_video","adhesion_bottom"],u="top_ad top_rhs injected_navstrip injected_billboard navboard".split(" "),c=window.top.ad_utils.slot_events,h={},p={},m={},f={},g=window.ue_t0;if("function"!=typeof o||"function"!=typeof s)r("uet() / uex() not available, will not record CSM metrics");else{for(d=0;d<l.length;d++)(i=>{c.listen(i,"iframe",function(){h[i]=(new Date).getTime(),o("bb",i,{wb:1}),r(`CSM uet() recording "bb" for "${i}" -- Timestamp: `+Date.now()),(0,n.logCSAWidgetEvent)(i,n.CSA_MARKERS.WIDGET_BEGIN),(0,n.logCSAWidgetEvent)(i,n.CSA_MARKERS.CLICK_TO_BODY_BEGIN)}),c.listen(i,"request",function(){p[i]=(new Date).getTime(),o("be",i,{wb:1}),r(`CSM uet() recording "be" for "${i}" -- Timestamp: `+Date.now()),(0,n.logCSAWidgetEvent)(i,n.CSA_MARKERS.WIDGET_END),(0,n.logCSAWidgetEvent)(i,n.CSA_MARKERS.CLICK_TO_BODY_END)}),c.listen(i,"tagdeliver",function(){m[i]=(new Date).getTime(),o("af",i,{wb:1})}),c.listen(i,"reflow",function(e){var t=(new Date).getTime();0===e.data.duration&&g&&(t=g+10),o("cf",i,{wb:1},f[i]=t)}),c.listen(i,"load",function(){var e,t;generic.monitoring&&(e=generic.monitoring.get_remnant_partner(i),t=i+"."+e,"none"!==e&&(o("bb",t,{wb:1},h[i]),o("be",t,{wb:1},p[i]),o("af",t,{wb:1},m[i]),o("cf",t,{wb:1},f[i]),s("ld",t,{wb:1})),s("ld",i,{wb:1}),r(`CSM uex() recording "ld" for "${i}" -- Timestamp: `+Date.now()),(0,n.logCSAWidgetEvent)(i,n.CSA_MARKERS.LOADED),(0,n.logCSAWidgetEvent)(i,n.CSA_MARKERS.CLICK_TO_LOADED))})})(l[d]);window.top.ad_utils.ads_header.on_done(function(){function e(e){var t,i=0;for(t in e)i=Math.max(i,e[t]);return i}var t=[];for(d=0;d<u.length;d++)(a=u[d])in window.top.ad_utils.slots_on_page&&t.push(a);r("determined core_slots: "+t.join(",")),c.listen_all(t,"iframe",function(){o("bb","core_ads",{wb:1},e(h))}),c.listen_all(t,"request",function(){o("be","core_ads",{wb:1},e(p))}),c.listen_all(t,"tagdeliver",function(){o("af","core_ads",{wb:1},e(m))}),c.listen_all(t,"reflow",function(){o("cf","core_ads",{wb:1},e(f))}),c.listen_all(t,"load",function(){s("ld","core_ads",{wb:1})})})}},{"./ads-csa":125}],123:[function(e,t,i){function n(e){try{e()}catch(e){consoleError(e.message,"imdbads.cmd")}}window.imdbads=window.imdbads||{},imdbads.cmd=imdbads.cmd||[],window.top.ad_utils.ads_header.on_done(function(){for(var e=0,t=imdbads.cmd||[],e=0;e<t.length;e++)n(t[e]);imdbads.cmd={push:function(e){n(e)}}})},{}],124:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.adsBtrUtils=void 0;i.adsBtrUtils={MRC_BTR_CLASS:"mrc-btr-creative",BTR_CLIENT:"btr_client",COD_CLIENT:"cod_client",completedSlots:[],LOI_IMPRESSION_ID_SEPARATOR:"/e/loi/imp?b=",MSDK_IMPRESSION_ID_SEPARATOR:"/e/msdk/imp?b=",OPENRTB_IMPRESSION_ID_SEPARATOR:"/e/is/",AAX_BTR_MACRO:"${AAX_PAYLOAD}",AAX_BTR_MACRO_REPLACEMENT:"%7B%22measurementMethod%22:%22btr_client%22%7D",isImageLoaded(e){return e&&e.complete&&0<e.naturalHeight&&0<e.naturalWidth},isVideoLoaded(e){return e&&0<e.currentTime},isElementLoaded(e){let t;return e&&"IMG"===e.tagName?t=this.isImageLoaded(e):e&&"VIDEO"===e.tagName?t=this.isVideoLoaded(e):!e||"P"!==e.tagName&&"SPAN"!==e.tagName&&"DIV"!==e.tagName||(t=!0),t},evaluateCreativeBtrCriteria(e){if(e){e=e.getElementsByClassName(this.MRC_BTR_CLASS);if(0<e.length)return this.checkTaggedElementsLoaded(e)}return!1},checkTaggedElementsLoaded(t){var i=[];let n=0,o=0;for(let e=0;e<t.length;e++){var s=t[e];i.push(s),this.isElementLoaded(s)?o++:n++}return 0<o&&0===n},replaceAaxMacroWithBtrInfo(e){return e&&0!==e.length?e.replace(this.AAX_BTR_MACRO,this.AAX_BTR_MACRO_REPLACEMENT):""},markElementBtr(e){e&&e.classList&&e.classList.add(this.MRC_BTR_CLASS)},markSlotFired(e){this.completedSlots.push(e)},createBtrPixel(e,t,i){var n;e&&0<e.length&&((n=document.createElement("img")).setAttribute("border","0"),n.setAttribute("height","1"),n.setAttribute("width","1"),n.setAttribute("alt",""),n.setAttribute("class","impression-tracker"),n.setAttribute("src",e),t.appendChild(n),this.markSlotFired(i))},isAaxImpression(e){return/http(s)+:\/\/aax[a-zA-Z\-]*\.amazon[a-zA-Z\-]*\.com/.test(e)}}},{}],125:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.logCSAWidgetEvent=i.CSA_MARKERS=void 0;let o={CONTENT:"Content",MARK:"mark",WIDGET:"widget"};i.CSA_MARKERS={CLICK_TO_BODY_BEGIN:"clickToBodyBegin",CLICK_TO_BODY_END:"clickToBodyEnd",CLICK_TO_LOADED:"clickToLoaded",LOADED:"loaded",WIDGET_BEGIN:"widget-begin",WIDGET_END:"widget-end"};let s=e=>{"function"==typeof window.consoleLog&&window.consoleLog(e,"ads-csa")},r={};i.logCSAWidgetEvent=(e,t)=>{n=e;var i,n=r[n]||(window&&window.csa?(r[n]=window.csa(o.CONTENT,{element:{slotId:n,type:o.WIDGET}}),r[n]):void s(`[getCsaLatencyPlugin] window.csa is not available for metrics for slot '${n}'`));n&&(i=Date.now(),n(o.MARK,t,i),s(`[logCSAWidgetEvent] CSA recording '${t}' for '${e}' -- Timestamp: `+i))}},{}],126:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;i.default=new class{isFirefox(){return-1<navigator.userAgent.toLowerCase().indexOf("firefox")}frameDoc(e){e="string"==typeof e?document.getElementById(e):e;if(!e||"IFRAME"===e.tagName){if(!(0<e.src.length&&-1===e.src.indexOf("www.imdb.com")&&-1===e.src.indexOf("javascript:")))return e.contentWindow?e.contentWindow.document:e.contentDocument;window.generic.monitoring.record_event("iframe_not_sourceless_fdoc",!1)}}getSlotWrapper(e){return document.getElementById(e+"_wrapper")}getContextualFragment(e,t){return e&&t&&(e=e.createRange())?e.createContextualFragment(t):null}appendContentToIframeDoc(e,t){null!==e&&null!==(t=this.getContextualFragment(e,t))&&e.body.appendChild(t)}}},{}],127:[function(e,t,i){var s;(s=window.generic).install(s,{extended_split:function(e,t,i){for(var n,o=[],s=0;(!i||o.length<i-1)&&-1!==(n=e.indexOf(t,s));)o.push(e.substring(s,n)),s=n+t.length;return o.push(e.substring(s)),o},object_from_querystring:function(e){var t,i,n=e.split("&"),o={};if(""===e)return{};for(t=0;t<n.length;t++)o[(i=s.extended_split(n[t],"=",2))[0]]=1===i.length?null:decodeURIComponent(i[1]);return o},cookie:{set:function(e,t,i){var i=i?((n=new Date).setTime(n.getTime()+24*i*60*60*1e3),"; expires="+n.toGMTString()):"",n=document.location.host.split("."),o=n.pop(),n=n.pop();document.cookie=e+"="+escape(t)+i+"; path=/; domain="+n+"."+o},get:function(e){for(var t,i=document.cookie.split(";"),n=0;n<i.length;n++)if("string"==typeof i[n]&&(t=i[n].split("="))[0]&&t[1]&&t[0].replace(/\s/,"")===e)return unescape(t[1]);return null},erase:function(e){this.set(e,"",-1)}}})},{}],128:[function(e,t,i){var n,o,s;window.IMDbTimer&&window.IMDbTimer.events&&(n=csm,o=IMDbTimer.starttime,s=IMDbTimer.events,generic.send_csm_head_metrics=function(){n.record("csm_head_pre_title",s.csm_head_pre_title-o),n.record("csm_head_post_title",s.csm_head_post_title-o),n.record("csm_head_pre_css",s.csm_head_pre_css-o),n.record("csm_head_post_css",s.csm_head_post_css-o),n.record("csm_head_pre_icon",s.csm_head_pre_icon-o),n.record("csm_head_post_icon",s.csm_head_post_icon-o),n.record("csm_head_pre_ads",s.csm_head_pre_ads-o)})},{}],129:[function(e,t,i){var a,n,d,o,s,r,l,u,c,h,p,m,f,g,v,_,y,b=(m=e("./safeframe"))&&m.__esModule?m:{default:m},A=e("./slot-util");a=window,n=document,h=a.generic=a.generic||{},p={},m=a.IMDbTimer,f="IMDbTimer"in a?a.IMDbTimer.starttime:NaN,g=n.location.hash.match("debug=1")||!isNaN(f)&&Math.random()<.2,v={load:1,trueload:1,reflow:1,request:1,tagdeliver:1,iframe:1},o={},s={},r={top_ad:1,top_rhs:1,injected_navstrip:1,injected_billboard:1,navboard:1,bottom_ad:2,middle_rhs:2,btf_rhs2:2,rhs_cornerstone:2,inline80:2},l={},h.on_document_ready(function(e){e(a).on("beforeunload",function(){var e,t;for(e in o)(t=o[e]).request&&t.load===d&&h.monitoring.record_event("ad_load_failure."+e);h.monitoring.send_metrics()})}),_={is_slot_monitored:function(e){return e in r},is_twilight_slot:function(e){return e in r},is_twilight_core_slot:function(e){return e in r&&1===r[e]},set_metric_value:function(e,t,i){(o[e]=o[e]||{})[t]=i},get_metric_value:function(e,t){if(e in o)return o[e][t]},core_slots:function(){var e,t={};for(e in r)1===r[e]&&(t[e]=1);return t},record_slot_status:function(e){e=e.match(/^(.*)\.(got_ad|null|blank|fail)$/);e&&(l[e[1]]=e[2])},core_slots_have_an_ad:function(){var e,t=!1;for(e in _.core_slots()){if(!(e in l))return null;"got_ad"===l[e]&&(t=!0)}return t},set_partner:function(e,t){return s[e]=t,this},get_partner:function(e){return s[e]},set_remnant_partner:function(e,t){return _.set_partner(e,t)},get_remnant_partner:function(e){return _.get_partner(e)}},a.csm=(u={},{measure:function(e,t){this.record(e,this.duration(),t)},record:function(t,e,i,n){var o,s=u[t];if(g&&!csm.metrics[t]&&h.monitoring.record_metric(t+(n||""),e,i),csm.metrics[t]=e,s){for(o=0;o<s.length;o++)try{s[o](e,t)}catch(e){consoleLog("error invoking callback for "+t,"csm")}delete u[t]}},duration:function(e){return(e||Number(new Date))-f},listen:function(e,t){e in csm.metrics?setTimeout(t,0):(u[e]=u[e]||[]).push(t)},metrics:{}}),h.monitoring={event_starts:{},event_stops:{},events_to_stop:0,event_duration:{},event_counters:[],all_events_started_flag:!1,twilight_info:"",twilight_client:(e=navigator.userAgent,(c=e.match(/MSIE (\d+)/))&&6<=c[1]?"ie"+c[1]:(c=e.match(/Mac OS.*Firefox\/(\d+)/))?"3"===c[1]?"firefox3-mac":"firefox-mac":(c=e.match(/Firefox\/(\d+)/))?"3"===c[1]?"firefox3":"firefox":-1!==e.indexOf("Chrome")?"chrome":-1!==e.indexOf("Safari")?"safari":-1!==e.indexOf("Opera")?"opera":"Other"),isTwilightActiveSample:g,page_type:"",start_timing:function(e){this.start_timing_at(e,(new Date).getTime())},start_timing_at:function(e,t){this.event_starts[e]=t,this.events_to_stop++},stop_timing:function(e,t,i){var n=(new Date).getTime(),o=e;this.event_starts[e]&&(this.event_stops[e]=n,t&&(o+="."+t),this.record_metric(o,n-this.event_starts[e]),delete this.event_starts[e],this.events_to_stop--,i||this.all_events_started_flag&&0===this.events_to_stop)&&this.send_metrics()},record_event:function(e,t){var i;if(this.event_counters.push(e),e in p)for(weblab in p[e])i=e+"__weblab_"+weblab,this.event_counters.push(i),consoleLog(i,"twilight");consoleLog(e,"twilight"),t&&this.send_metrics()},record_metric:function(e,t,i){var n,o;if(_.record_slot_status(e),this.event_duration[e]=t,consoleLog(e+","+t,"twilight"),e in p)for(n in p[e])this.event_duration[o=e+"__weblab_"+n]=t,consoleLog(o+","+t,"twilight");i&&this.send_metrics()},send_metrics:function(){},all_events_started:function(){this.all_events_started_flag=!0},set_partner:function(e,t){e=(0,A.getSlotName)(e);_.set_partner(e,t)},set_partner_by_slot:function(e,t){_.set_partner(e,t)},get_partner:function(e){return _.get_partner(e)||"none"},set_remnant_partner:function(e,t){h.monitoring.set_partner(e,t)},get_remnant_partner:function(e){return h.monitoring.get_partner(e)},set_remnant_partner_fallback:function(e,t){var i=_.get_partner(e);void 0===i?_.set_partner(e,t):_.set_partner(e,i+"_"+t)},update_slot_metrics:function(e,t,i){var n=a.top.ad_utils.get_slot_iframe(e),o="."+h.monitoring.get_partner(e);if(b.default.isSafeframeSlot(e,n)){if(!(t in v))return;b.default.getSfAdObject(e)}else n&&n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.ad;e&&_.is_slot_monitored(e)&&_.get_metric_value(e,t)===d&&(_.set_metric_value(e,t,d!==i?i:csm.duration()),n=_.get_metric_value(e,t),_.is_twilight_slot(e))&&(csm.record("csm_"+e+"_"+t,n,0,o),"load"===t&&".none"!=o&&".1P"!=o&&csm.record("csm_"+e+"_deliver",n-_.get_metric_value(e,"tagdeliver"),0,o),_.is_twilight_core_slot(e))&&y.send(t)},update_sf_slot_metrics:function(e){e=JSON.parse(e);e&&e.slot&&e.event&&("reflow"===e.event?b.default.fireSfReflowMetric(e.slot):"fireload"===e.event?b.default.onSfAdLoad(e.slot):h.monitoring.update_slot_metrics(e.slot,e.event))},get_metric_value:function(e,t){return _.get_metric_value(e,t)},enable_weblab_metrics:function(e,t,i){for(var n,o=0;o<i.length;o++)p[n=i[o]]=p[n]||{},p[n][e+"_"+t]=1}},h.on_document_ready(function(e){e(a).on("beforeunload",function(e){var t=String(n.location).split("#",2)[0];a.name="clicktoresponse:"+(new Date).getTime()+":"+t}),h.monitoring.isTwilightActiveSample&&(csm.measure("csm_ready"),e(a).on("load",function(){csm.measure("csm_load",!0)}),e("div.dfp_slot").each(function(){h.monitoring.record_event("dfp_slot")}),e=parseInt(e("#servertime").attr("time"),10),isNaN(e)||h.monitoring.record_metric("csm_server",e))}),"http:"===n.location.protocol&&(c=a.name.match(/^clicktoresponse:(\d+):(.*)$/))&&(n.referrer===c[2]&&m&&(c=m.starttime-c[1],m.clicktoresponse=c,h.monitoring.record_metric("click_to_response",c)),a.name=""),y=(()=>{function t(){if(!r)for(var e in r=!0,consoleLog("Finalized core ads on current page: "+o.join(",")),s)y.send(e)}var e,o=[],i=_.core_slots(),s={},r=!1;for(e in i)a.top.ad_utils.slot_events.listen(e,"iframe",function(e){o.push(e.slot),o.length===i.length&&t()});return h.on_document_ready(t),{send:function(e){var t,i,n=0;if(r){for(i=0;i<o.length;i++){if(t=_.get_metric_value(o[i],e),d===t)return;n=Math.max(n,t)}csm.record("csm_core_ads_"+e,n)}else s[e]=1}}})()},{"./safeframe":165,"./slot-util":170}],130:[function(e,t,i){var n=e("./is-refresh-slot");{e=window.top.ad_utils;let a=["mediaviewer_banner"],t=["inline20","inline40","inline50","inline60","inline80","inlinebottom","interstitial"];function d(e,t,i,n){t=new o(t,i,n||{});try{e(t)}catch(e){consoleError(e)}}function o(e,t,i){this.slot=e,this.event=t,this.data=i}var l={},u={};e.slot_events={listen:function(e,t,i){if(!(-1<a.indexOf(e))){for(var n,o,s=t.replace(/(^\s+|\s+$)/g,"").split(/\s+/),r=0;r<s.length;r++)(n=e+":"+(o=s[r]))in u?d(i,e,o,u[n]):(l[n]=l[n]||[]).push(i);return this}},listen_all:function(e,t,i){n=i,o=e.length;for(var n,o,s=function(){0==--o&&n.apply(this,arguments)},r=0;r<e.length;r++)this.listen(e[r],t,s)},trigger:function(e,t,i){if(!(-1<a.indexOf(e))){var n,o=e+":"+t,s=l[o]||[],r=o.split(":")[0];if(!(o in u)||r&&this.slot_can_refire(r)){for(u[o]=i,n=0;n<s.length;n++)d(s[n],e,t,i);return this}generic.monitoring.record_event(o+"_already_fired",!1),consoleError("attempted to fire "+o+", but it has already fired!")}},has_fired:function(e,t){return e+":"+t in u},slot_can_refire:function(e){return t.includes(e)||(0,n.isRefreshSlotName)(e)}}}},{"./is-refresh-slot":150}],131:[function(e,k,B){var A,w,n,s,o,r,t,i,d,l,E,a,u,c,h,p,m,S,f,g,v,_,y,b,T,C,I,N,O,D=L(e("./ads-dom-utils")),x=L(e("./safeframe")),j=L(e("./slot-names")),R=L(e("./is-responsive")),F=L(e("./is-in-viewport")),U=L(e("./register-click-trackers")),V=L(e("./date-check")),H=e("./site-util"),W=e("./slot-util"),G=e("./ad-visibility-util"),z=e("./scale"),q=e("./backup-img-init"),Y=e("@imdb/ad-public-site-endpoint-builder"),X=e("./responsive-ad-api/responsive-ad-api"),K=e("./responsive-ad-api/media-orchestrator-bridge"),Q=e("./global-style"),J=e("./http"),Z=e("./ads-btr-utils"),ee=e("./tarnhelm-ad-utils"),te=e("./aps-auction-manager"),ie=e("./zuko/httpZukoCall"),e=((e,t)=>{if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=ne(t))&&t.has(e))return t.get(e);var i,n,o={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in e)"default"!==i&&{}.hasOwnProperty.call(e,i)&&((n=s?Object.getOwnPropertyDescriptor(e,i):null)&&(n.get||n.set)?Object.defineProperty(o,i,n):o[i]=e[i]);return o.default=e,t&&t.set(e,o),o})(e("./zuko/httpZukoCallUtils"));function ne(e){var t,i;return"function"!=typeof WeakMap?null:(t=new WeakMap,i=new WeakMap,(ne=function(e){return e?i:t})(e))}function L(e){return e&&e.__esModule?e:{default:e}}function M(e){var t=w.getElementById(e);return(e=x.default.getSafeframeDiv(e))&&"IFRAME"!==e.tagName?e.getElementsByTagName("iframe")[0]:t}function oe(e,t,i){e.attachEvent?e.attachEvent("on"+t,function(){i.apply(e,arguments)}):e.addEventListener(t,i,!1)}function se(e){var i="";return jQuery.each(s[e],function(e,t){i+='"'+e+'":['+o(t[0])+","+o(t[1])+"],"}),'"'+e+'":{'+i.substr(0,i.length-1)+"}"}function re(){return"/"===w.location.pathname?"h":"n"}function P(e){consoleLog(e,"inject_ad")}function ae(e){return T[e]=T[e]||{}}A=window,w=document,t=A.ads_js_start?(new Date).getTime()-A.ads_js_start:null,i=navigator.userAgent,d=/MSIE|Trident\/\d+/.test(i),l=/Firefox/.test(i),E=A.generic,a={top_ad:"t",top_rhs:"tr"},u={injected_billboard:"top_ad",injected_navstrip:"top_ad",navboard:"top_ad"},c={top_ad:{width:"728px",height:"300px"},injected_billboard:{width:"970px",height:"500px"},top_rhs:{width:"988px",height:"320px"}},h={b:1,l:1,bl:1},p=1e16*Math.random(),m={},o=function(e){e=parseInt(e,10);return isFinite(e)?e:0},r={top_ad:"t",top_rhs:"tr",injected_navstrip:"in",injected_billboard:"ib",bottom_ad:"b",btf_rhs2:"br"},S={store:function(){E.on_document_ready(function(e){var o,t;try{var i=E.cookie.get("as");if(i)try{s=JSON.parse(i),n=n||s||{}}catch(e){n=n||(s={})}o=(s=s||{})[re()]||{},e.each(r,function(e,t){var i,n=(e=>e=0!==(e=$("#"+e)).length&&"IFRAME"!==e[0].tagName?e.find("iframe"):e)(e);0!==n.length&&(o[t]=[(t=n,i=A.top.ad_utils.get_ad_object(t[0]),"none"===t.css("display")?0:parseInt(i.w,10)),(t=n,i=e,n=0,e=A.top.ad_utils.get_ad_object(t[0]),e=parseInt(e.h,10),"top_ad"===i?jQuery("#nb20").hasClass("banner")?n=-5:jQuery("#nb20").hasClass("supertab")&&(n=-15):"injected_billboard"===i&&(n=20),t.id&&"swfAutoMaxHeight"in t[0].contentWindow&&(e=t[0].contentWindow.swfMinHeight),"none"===t.css("display")||0===e?0:e+n)])}),s[re()]=o,t="{",s&&("h"in s&&(t+=se("h")),"h"in s&&"n"in s&&(t+=","),"n"in s)&&(t+=se("n")),E.cookie.set("as",t+="}",E.days_to_midnight||1)}catch(e){consoleLog("Failed to store ad size cookie "+e.toString(),"ads")}})}},A.ad_size_cookie=S,(0,X.initializeResponsiveAdApi)(),O={inject_slot:function(e,t){var i,n,o,s,r=e.id,a='<style>body{background:transparent;}</style><script type="data-doubleclick" src="https://ia.media-imdb.com/images/G/01/mobile/blank_pixel._V137875076_.gif'+(e.getAttribute("data-dart-params")||"")+'"><\/script>'+t;!x.default.isSafeframeSlot(r,e)||t&&0===t.indexOf("\x3c!-- blank --\x3e")||!A.DAsf&&!A.MAsf?(a=a+"<script defer>parent.window.top.ad_utils.ad_table."+r+".fired=true;<\/script><script defer>window.frameElement.onload?.call(window.frameElement);<\/script>",d?(t=e,r=a,o="__srcless_"+Math.floor(68719476735*Math.random()).toString(36),s="<body><script>document.write(parent.window.top.ad_utils."+o+");delete parent.window.top.ad_utils."+o+";<\/script></body>",A.top.ad_utils[o]=r,t.src="javascript:unescape('"+escape(s)+"')"):(i=e,o=a,r=D.default.frameDoc(i),l||r.open("text/html","replace"),n="",n="https:"===location.protocol?'<head><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"/></head><body>'+o+"<script>document.close()<\/script></body>":"<body>"+o+"<script>document.close()<\/script></body>",(0,R.default)(i.contentWindow)?setTimeout(function(){var e=w.getElementById(i.id);null!==e&&e.contentWindow.document.write(n)},0):r.write(n))):x.default.injectCode(r,a)}},A.ad_utils=A.top.ad_utils={responsiveAdAPI:X.responsiveAdAPI,apsAuctionManager:te.apsAuctionManager,adsBtrUtils:Z.adsBtrUtils,tarnhelmAdUtils:ee.tarnhelmAdUtils,mediaOrchestratorBridge:K.mediaOrchestratorBridge,ord:p,regenerateOrd:function(){A.consoleLog("Regenerating Client Side Ord","ads"),p=1e16*Math.random(),A.top.ad_utils.ord=p},ad_table:{},ad_navbar:{},ad_queue:[],low_latency_punt_ads:{},blank_ad_code:"<script>document.ad={h:0,w:0,scope:'blank'}<\/script>",slots_on_page:null,dateCheck:V.default,isInViewport:F.default,registerClickTrackers:U.default,get_slot_iframe:M,scaleTarnhelm:z.scaleTarnhelm,initAndBindResponsiveBackupLogic:q.initAndBindResponsiveBackupLogic,aax_instr_pixel_url:{},aax_imp_pixel_url:{},paets_loaded_pixel_url:{},update_ad_details:x.default.updateAdDetails,set_partner:x.default.setPartner,get_safeframe_ad_objs:x.default.getSafeframeAdObjs,sf_ad_details:{},removeOpacityAnimation:function(e,t){e&&t&&(t=D.default.getSlotWrapper(t))&&(t.classList.remove("iframe_tweening"),e.classList.remove("ad_fadein"))},setup_slot_metrics:function(i){A.top.ad_utils.slot_events.listen(i,"iframe request reflow tagdeliver load",function(e){var t=e.data.duration,i=e.data.timestamp;void 0===t&&i&&(t=csm.duration(i)),E.monitoring.update_slot_metrics(e.slot,e.event,t)}),A.top.ad_utils.slot_events.listen(i,"request",function(e){e=e.slot;E.monitoring.start_timing(e)}),A.top.ad_utils.slot_events.listen(i,"request tagdeliver",function(e){for(var t=e.slot,i=A.top.ad_utils.inject_ad.get_injectable_slots(t),n=0;n<i.length;n++)A.top.ad_utils.slot_events.trigger(i[n],e.event,e.data)}),A.top.ad_utils.slot_events.listen(i,"load",function(e){var t=e.data.type;t?E.monitoring.stop_timing(i,t,!0):consoleError(e.slot+" loaded, but type was not reported"),E.monitoring.update_slot_metrics(e.slot,"trueload")}),A.top.ad_utils.slot_events.listen(i,"punt",function(e){var t=e.event+"_"+e.data.type;E.monitoring.update_slot_metrics(e.slot,t)})},constructClientSideUrl:Y.constructClientSideUrl,constructCurrentSlotSizeMap:Y.constructCurrentSlotSizeMap,mobileWebCreativeResizing:z.mobileWebCreativeResizing,isInternetExplorer:H.isInternetExplorer,isIpad:H.isIpad,isResponsive:R.default,makeAdSlotsCall:J.makeAdSlotsCall,makeAdsGraphletCall:ie.makeAdsGraphletCall,adsGraphletUtils:e,register_ad:function(e){A.top.ad_utils.setup_slot_metrics(e),A.top.ad_utils.slot_events.trigger(e,"iframe"),this.ad_table[e]={slot:e}},gpt:(C=null,I=[],{handle_response:function(e){var t;for(C=e,t=0;t<I.length;t++)this.render_ad(I[t])},render_ad:function(e){var t,i;C?(i=C[e]||{},t=M(e),i=i._html_||"",null!==t.getAttribute("data-roadblocked")&&(i="\x3c!-- roadblocked --\x3e"+A.top.ad_utils.blank_ad_code,A.top.ad_utils.slot_events.trigger(e,"request",{duration:0})),O.inject_slot(t,i)):I.push(e)}}),expand_ad:function(t){var e=this,i=t.id,n=t.height,o=t.width,i=x.default.getRawSlotName(i);if(!("expand_called"in this.ad_table[i])){var s,r=D.default.getSlotWrapper(i).id,a=this.get_ad_object(t),d=csm.duration(),l=w.getElementById(i+"_reflow_helper");l&&l.offsetTop;if(i+"_wrapper"===r||E.has_document_readied()){if(this.ad_table&&this.ad_table[i]){this.ad_table[i].expanded=1;l=(0,q.initAndBindResponsiveBackupLogic)(t.contentWindow);if(a&&!l&&(w.ads||(w.ads={}),w.ads[a.cid]=a,A.top.ad_utils.resize_iframe(t,a),a.st?this.expand_supertab(a):a.bb?this.expand_billboard(a):"top_ad"!==i||!this.is_open(i,a)||a.clickroll||a.overlay||this.expand_top_banner(),a.wrap&&this.expand_wrap(a),a.bamf&&this.expand_bamf(a,t),a.inner_bamf&&this.expand_inner_bamf(a),a.relative_bamf&&this.expand_relative_bamf(a),this.is_open(i,a)?A.top.ad_utils.show_hidden_labels(i):this.collapse_ad(t),a.styles))for(s in a.styles)E.override_style(s,a.styles[s].style);this.ad_table[i].expand_called=1,E.on_document_ready(function(e){e(t).trigger("expand_ad")}),A.top.ad_utils.fire_reflow_metric(i,a,o,n,t.width,t.height),A.top.ad_utils.fire_tagdeliver_metric(i,d),S.store(),w.body.className=w.body.className}}else E.on_document_ready(function(){e.expand_ad(t)})}},resize_iframe:function(e,t){"w"in t&&(e.width=parseInt(t.w,10)),"h"in t&&(e.height=t.expandHeight?parseInt(t.expandHeight,10):parseInt(t.h,10)),"z"in t&&t.z&&(slot_wrapper.style.zIndex=t.z,slot_wrapper.style.position="relative")},show_hidden_labels:function(e){var t=w.getElementById(e+"_before"),e=w.getElementById(e+"_after");t&&this.display_label(t),e&&this.display_label(e)},fire_reflow_metric:function(t,i,e,n,o,s){var r=csm.duration(),a=w.getElementById(t+"_reflow_helper"),d=a?a.offsetTop:null;n===s&&e===o?A.top.ad_utils.slot_events.trigger(t,"reflow",{duration:0}):setTimeout(function(){var e="top_ad"===t&&A.top.ad_utils.is_open(t,i)&&!i.st?10:0,e=a&&a.offsetTop===d+e;A.top.ad_utils.slot_events.trigger(t,"reflow",{duration:e?0:r})},10)},fire_tagdeliver_metric:function(e,t){e in u||A.top.ad_utils.slot_events.has_fired(e,"tagdeliver")||A.top.ad_utils.slot_events.trigger(e,"tagdeliver",{duration:t})},get_ad_object:function(e){var t=e.id;if(x.default.isSafeframeSlot(t,e))return x.default.getSfAdObject(t);var i=D.default.frameDoc(e),e=null;if(null!=i){if(e=i.ad)"pid"in e||(e.pid="DFP"),"instrPixel"in e||(e.instrPixel=A.top.ad_utils.aax_instr_pixel_url[t.toUpperCase()]);else{var n,o,s,r=0,a=0,d=["img","object","embed","iframe"];for(o in d)for(s=i.getElementsByTagName(d[o]),n=0;n<s.length;n++){var l=s[n],u=l.scrollWidth||l.width,l=l.scrollHeight||l.height;u&&1<u&&(r=Math.max(r,parseInt(u,10))),l&&1<l&&(a=Math.max(a,parseInt(l,10))),consoleLog(t+" : estimated size : "+u+","+l,"ads")}e={w:r.toString(),h:a.toString(),pid:"",url:"",aid:"0",cid:"0",instrPixel:A.top.ad_utils.aax_instr_pixel_url[t.toUpperCase()]},0!==r&&0!==a||(e.scope="null")}return i.ad=e}consoleLog("Cannot get document back from iframe")},get_cornerstone_ad_object:function(e){e=a[e]+"adData";return"aanResponse"in top.document&&e in top.document.aanResponse?top.document.aanResponse[e]:null},get_mapped_amazon_slot_name:function(e){return a[e]||e},on_ad_load:function(e){if(e&&0<e.src.length&&-1===e.src.indexOf("www.imdb.com")&&-1===e.src.indexOf("javascript:"))E.monitoring.record_event("iframe_not_sourceless",!1);else{var t,i,n,o=e.id,s=this.ad_table[o];if(s&&s.fired){t=this.get_ad_object(e),this.responsiveAdAPI&&(this.responsiveAdAPI.events.adIframeLoad(o),this.responsiveAdAPI.shouldMakeAdSticky(e,t)&&this.responsiveAdAPI.makeAdSticky(j.default.INLINE20),this.responsiveAdAPI.updateSponsoredLabel(e)),i=this.get_type_of_ad(t),s.loaded=!0,!t||"blank"!==t.scope&&"null"!==t.scope||(n="0"===e.getAttribute("data-original-width")&&"0"===e.getAttribute("data-original-height")?0:E.monitoring.get_metric_value(o,"reflow")),(0,Q.globalizeCss)(e.contentWindow);try{s.expanded||this.expand_ad(e)}catch(e){consoleLog("Exception during expand_ad:"+e.message)}A.top.ad_utils.slot_events.trigger(o,"load",{duration:n,type:i})}else consoleLog("deflected spurious onload event for "+o,"on_ad_load")}},is_open:function(e,t){var i=M(e),i=i&&i.getAttribute("data-first-party-creative-template");return"top_ad"===e&&i?t&&"w"in t&&"h"in t&&0<t.w&&0<t.h&&"blank"!==t.scope:t&&"blank"!==t.scope},expand_supertab:function(e){var t=w.getElementById("nb15"),i=w.getElementById("nb20");t?t.className="supertab":i&&(i.className="supertab")},expand_billboard:function(e){var s,t,i=w,n=parent,o="injected_billboard",r=M(o),a=D.default.getSlotWrapper(o),d=w.getElementById("top_rhs_wrapper"),l=d?d.parentElement||d.parentNode:null,u=e.bb_close_tracker,c=e.bb_show,h=e.bb_show_tracker,p="ax",m=!1;return!!a&&(a.className=(a.className?a.className+" ":"")+"billboard",(t=i.createElement("div")).id="billboard_show_button",t.style.display="none",l?l.insertBefore(t,d):(A.top.ad_utils.slot_events.listen("top_rhs","iframe",function(){y()}),t.style.marginRight="19px",t.style.marginTop="7px",a.parentNode.insertBefore(t,a)),1===e.bb&&(n.window.top.ad_utils.ns.register("billboard","close",function(){v(),void 0!==u&&u()}),t.innerHTML=c,t.onclick=function(){t.style.display="none",r.style.display="block",f(),s[e.aid]="o",g(),S.store(),a.style.margin="20px 19px",void 0!==h&&h()},f(),e.aid in s)&&"c"===s[e.aid]&&v(),!0);function f(){var e,t=E.cookie.get(p),i=t&&t.split(/o|c/),n=t&&t.split(/\d*/),o={};if(i&&n)for(""===n[0]&&n.shift(),e=0;e<n.length;++e)o[i[e]]=n[e];s=o}function g(){var e,t="";new Date;for(e in s)s.hasOwnProperty(e)&&(t+=e+s[e]);E.cookie.set(p,t,E.days_to_midnight||1)}function v(){r.style.display="none",d||m?b():E.on_document_ready(_)}function _(){y(),b()}function y(){if(!m&&(d=w.getElementById("top_rhs_wrapper"),l=d?d.parentElement||d.parentNode:null,d))try{a.parentNode.removeChild(t),l.insertBefore(t,d),t.style.marginRight="",t.style.marginTop=""}catch(e){consoleLog("caught a duplicate call to attempt_reattach_show_ad_button","ads")}}function b(){void 0!==c&&""!==c&&(t.style.display="block"),f(),s[e.aid]="c",g(),S.store(),a.style.margin="0px",m=!0}},expand_top_banner:function(){var e=w.getElementById("nb15");e?e.className="banner":(e=w.getElementById("top_ad"))&&(e.style.margin="auto")},expand_bamf:function(e,t){e=e.bamf;E.extend(t.style,e.style)},expand_inner_bamf:function(e){var e=e.inner_bamf,t=w.getElementById(e.targetId);t&&e.node&&E.insert_after(e.node,t)},expand_relative_bamf:function(e){var t,e=e.relative_bamf,i=w.getElementById(e.targetId);"insert_after"===e.relation?t=E.insert_after:"insert_before"===e.relation?t=E.insert_before:"insert_inside"===e.relation&&(t=E.insert_inside),i&&e.node&&t(e.node,i)},expand_wrap:function(e){var t,i,n;e.styles||(e.styles={}),i=e.sleeves?{wrapper:{style:{background:e.wrap}},root:{style:{background:"none","box-shadow":"none"}},pagecontent:{style:{height:"100%"}}}:(t="styleguide-v2",w.getElementById("imdbHeader")&&w.getElementById("imdbHeader").parentNode!==w.getElementById("nb20")&&(t="wrapper",i=-1<e.wrap.indexOf("fixed"),n=w.getElementById("wrapper"),i)&&null!==n&&n.style.setProperty("background-attachment","scroll","important"),{[t]:{style:{background:e.wrap}},root:{style:{"background-color":"transparent","box-shadow":"none"}},pagecontent:{style:{height:"100%"}},nb20:{style:{background:"none"}}}),E.extend(e.styles,i)},expand_label:function(e){e.className=e.className.replace(/hidden/,"")},display_label:function(e){e.style.display="block",e.style.visibility="visible"},collapse_ad:G.collapseAd,uncollapse_ad:G.uncollapseAd,get_type_of_ad:function(e){return e?e.scope||"got_ad":"null"},report_ad_data:function(e,i){var t=e;if(t!==top){try{for(;t.parent!==top;)t=t.parent;(0,W.getSlotName)(t)}catch(e){return void consoleLog("could not determine ad slot: "+e)}$.each("aid cid pid url dom dim".split(" "),function(e,t){t in i&&(t,i[t])})}},ns:(T={},{register:function(e,t,i){e="string"==typeof e?e:e.frameElement.id;ae(e)[t]=i},get:ae}),inject_ad:(_={},y={},b={},{render:function(e){var t=M(e),i=_[e];b[e]||(P(e+" rendered"),b[e]=1,A.top.ad_utils.ad_table[e]={slot:e,injected:!0},O.inject_slot(t,i||'<script>document.ad = {h:"0",w:"0",scope:"blank"}<\/script>'))},register:function(e){var t=u[e],i=this;P(e+" registered"),y[e]=1,_[e]?i.render(e):A.top.ad_utils.slot_events.listen(t,"load",function(){i.render(e)}),A.top.ad_utils.setup_slot_metrics(e),A.top.ad_utils.slot_events.trigger(e,"iframe")},inject:function(e,t){P(e+" injected"),_[e]=t,y[e]&&this.render(e)},get_injectable_slots:function(e){var t,i=[];for(t in u)u[t]===e&&i.push(t);return i}}),weblab:(v={},{set_treatment:function(e,t){v[e]=t},get_treatment:function(e){return v[e]}}),attach_aax_callback:function(t,i){i.aax_render_ad=function(e){e&&e.html?(i.document.write(e.html),i.document.got_aax_ad="got_ad"):i.document.got_aax_ad="blank",i.top.ad_utils.slot_events.trigger(t,"tagdeliver")}},set_aax_instrumentation_pixel_url:function(e,t){A.top.ad_utils.aax_instr_pixel_url[e.toUpperCase()]=t},set_aax_impression_pixel_url:function(e,t){A.top.ad_utils.aax_imp_pixel_url[e.toUpperCase()]=t},set_paets_loaded_pixel_url:function(e,t){A.top.ad_utils.paets_loaded_pixel_url[e.toUpperCase()]=t},inject_serverside_ad:function(e,t){var i=M(e),n=null!==i.getAttribute("data-roadblocked"),o=null!==i.getAttribute("data-blank-serverside");A.top.ad_utils.slot_events.trigger(e,"request",{duration:0}),n?t="\x3c!-- roadblocked --\x3e"+A.top.ad_utils.blank_ad_code:o&&(t="\x3c!-- blank --\x3e"+A.top.ad_utils.blank_ad_code),O.inject_slot(i,t)},aax_render_ad:function(t){var i=M(t),e=i.getAttribute("data-aax-url"),e="<script>parent.window.top.ad_utils.attach_aax_callback('"+t+"', window);<\/script><script src=\""+e+'"><\/script>';i.onload=function(){var e=A.top.ad_utils.ad_table[t];e&&e.fired?(e="got_ad"!==D.default.frameDoc(i).got_aax_ad?(i.style.display="none","blank"):D.default.frameDoc(i).got_aax_ad,A.top.ad_utils.slot_events.trigger(t,"load",{type:e})):consoleLog("deflected spurious cornerstone onload event for "+t,"aax_render_ad")},A.top.ad_utils.slot_events.trigger(t,"request"),O.inject_slot(i,e)},register_punt_ad:function(e,t,i,n){this.low_latency_punt_ads[e]={w:t,h:i,markup:n}},inject_punt_ad:function(e,t){var e=e.frameElement,i=e.id,n=D.default.frameDoc(e),o=null,s=n&&n.ad&&n.ad.aid?n.ad.aid:"0",r=n&&n.ad&&n.ad.cid?n.ad.cid:"0";i in this.low_latency_punt_ads?(o=this.low_latency_punt_ads[i],n.ad={w:o.w,h:o.h,pid:"",url:"",aid:s,cid:r},this.expand_ad(e),s=o.markup.replace(/\[PUNT_ORIGIN\]/,encodeURIComponent('{"punt_origin":"'+t+'"}')),n.write(s),A.top.ad_utils.slot_events.trigger(i,"punt",{type:"got_ad"})):A.top.ad_utils.slot_events.trigger(i,"punt",{type:"blank"})},fp:A.imdbads.frequencyCapping,set_slots_on_page:function(e){A.top.ad_utils.slots_on_page=e},ads_header:(f=!1,g=[],{on_done:function(e){if(f)try{e()}catch(e){consoleWarn(e)}else g.push(e)},done:function(){var e;for(f=!0,e=0;e<g.length;e++)try{g[e]()}catch(e){consoleWarn(e)}g=null}}),is_qualified_expanding:function(e){var t=c[e.slot];return!!(t&&e.width.replace(/px/g,"")<=t.width.replace(/px/g,"")&&e.height.replace(/px/g,"")<=t.height.replace(/px/g,"")&&h[e.direction])},expand_overlay:function(e){var t=JSON.parse(e);if(t&&t.slot&&t.width&&t.height&&t.direction&&A.top.ad_utils.is_qualified_expanding(t)){var i=A.top.ad_utils.get_slot_iframe(t.slot);if(void 0!==i){i.style.position="absolute",i.style.width=t.width,i.style.height=t.height;var n=w.getElementById(t.slot);switch(t.direction){case"l":A.top.ad_utils.expand_left(i,t,n);break;case"b":A.top.ad_utils.expand_bottom(i,t,n);break;case"bl":A.top.ad_utils.expand_left(i,t,n),A.top.ad_utils.expand_bottom(i,t,n)}}}},expand_general:function(e,t,i){i="top_ad"===i.slot?300:100;e.style.zIndex=i,t.style.width=e.width,t.style.height=e.height},expand_left:function(e,t,i){e.style.marginLeft="-"+(t.width.replace(/px/g,"")-e.width.replace(/px/g,""))+"px",A.top.ad_utils.expand_general(e,i,t)},expand_bottom:function(e,t,i){A.top.ad_utils.expand_general(e,i,t)},collapse_overlay:function(e){var t,e=JSON.parse(e);e&&e.slot&&x.default.getSfAdObject(e.slot)&&(t=A.top.ad_utils.get_slot_iframe(e.slot))&&(t.style.position="",t.style.width="",t.style.height="",t.style.zIndex="",t.style.marginLeft="",t.style.marginTop="",w.getElementById(e.slot).style.marginTop="")}},E.install(E,{should_jQuery_noConflict:A.$&&!A.jQuery,one_way_send_record:[],insert_after:function(t,i){try{i.parentNode.insertBefore(t,i.nextSibling)}catch(e){i.parentNode.appendChild(t)}},insert_before:function(e,t){t.parentNode.insertBefore(e,t)},insert_inside:function(e,t){t.appendChild(e)},extend:function(e,t){for(var i in t)"object"==typeof t[i]?e[i]!==t[i]&&(void 0===e[i]&&(e[i]={}),this.extend(e[i],t[i])):e[i]=t[i]},override_style:function(e,t,i){var n,e="#"+e;for(n in t)t[n]+=" !important";E.add_json_style(e,t,i)},add_json_style:function(e,t,i,n){var o,s=e+"{";for(o in t)s+=o+":"+t[o]+";";E.add_css_style(s+="}",i,n)},add_css_style:function(e,t,i){var n,o,s,r="css-style-generic",a=[r];for(s in t&&t.length?a.push(t):t=r,i=i||"a",a)w.getElementById(a[s])||((n=w.createElement("style")).setAttribute("type","text/css"),n.id=a[s],w.getElementsByTagName("head")[0].appendChild(n));if((n=w.getElementById(t)).styleSheet&&"cssText"in n.styleSheet)o=("a"===i?n.styleSheet.cssText:"")+e,n.styleSheet.cssText=o;else{o=("a"===i?n.innerHTML:"")+e;try{n.innerHTML=o}catch(e){n.innerText=o}}},add_css_file:function(e,t){var i=w.getElementById(t=t||"css-file-generic");i||((i=w.createElement("link")).setAttribute("type","text/css"),i.rel="stylesheet",i.id=t,w.getElementsByTagName("head")[0].appendChild(i)),i.href=e},set:function(e,t){e=e.split(":");("cookie"===e[0]?E.cookie:E.cache).set(e[1],t)},get:function(e){e=e.split(":");return("cookie"===e[0]?E.cookie:E.cache).get(e[1])},erase:function(e){e=e.split(":");return("cookie"===e[0]?E.cookie:E.cache).erase(e[1])},cache:{set:function(e,t){m[e]=t},get:function(e){return m[e]},erase:function(e){delete m[e]}},load_script:function(e){var t=w.createElement("script");t.type="text/javascript",t.src=e,w.getElementsByTagName("head")[0].appendChild(t)},load_script_notify:function(t,i){var n=w.createElement("script"),o=!1;n.type="text/javascript",n.src=t,n.onload=n.onreadystatechange=function(){var e=this.readyState;o||e&&"complete"!==e&&"loaded"!==e||(o=!0,w.body.removeChild(n),"function"==typeof i&&i(t))},w.body.appendChild(n)},one_way_send:function(e){var t=new Image(0,0);t.src=e,this.one_way_send_record.push(t)},load_when_visible:function(e,t){var i,n=0,o=jQuery(A),s=o.height()+o.scrollTop();!jQuery("#"+e).length||(i=jQuery(jQuery("#"+e).get(0)),i.offset().top<s)?t(e):o.scroll(function(){s=o.height()+o.scrollTop(),i.offset().top<s&&!n&&(n=1,t(e))})},unload_plugins:function(){for(var e,t,i,n,o,s=[w],r=new RegExp("^("+location.protocol+"//"+location.hostname+")?(/.*)?$"),a=function(e){for(var t,i=e.length-1;0<=i;i--)(t=e[i]).parentNode.removeChild(t)};s.length;)for(a((e=s.pop()).getElementsByTagName("object")),a(e.getElementsByTagName("embed")),o=(t=e.getElementsByTagName("iframe")).length-1;0<=o;o--)i=t[o],r.test(i.src)?(n=D.default.frameDoc(i))&&s.push(n):a([i])},addEventListener:function(e,t,i){oe(e,t,i)}}),A.custom={amazon:{load_callback:function(e){}},indirect:{close:function(e){e.location.href.match("floater")&&custom.floater.close((0,W.getSlotName)(e))}},full_page:{style_id:"custom__full_page__generated_styles",PLAID_CSS_MAP:{base:"--ipt-base-rgb",baseShade1:"--ipt-base-shade1-rgb",baseShade2:"--ipt-base-shade2-rgb",baseShade3:"--ipt-base-shade3-rgb",onBase:"--ipt-on-base-rgb",onBaseAccent1:"--ipt-on-base-accent1-rgb",onBaseAccent2:"--ipt-on-base-accent2-rgb",onBaseAccent3:"--ipt-on-base-accent3-rgb",onBaseError:"--ipt-on-base-error-rgb",baseAlt:"--ipt-baseAlt-rgb",baseAltShade1:"--ipt-baseAlt-shade1-rgb",baseAltShade2:"--ipt-baseAlt-shade2-rgb",baseAltShade3:"--ipt-baseAlt-shade3-rgb",onBaseAlt:"--ipt-on-baseAlt-rgb",onBaseAltAccent1:"--ipt-on-baseAlt-accent1-rgb",onBaseAltAccent2:"--ipt-on-baseAlt-accent2-rgb",onBaseAltAccent3:"--ipt-on-baseAlt-accent3-rgb",onBaseAltError:"--ipt-on-baseAlt-error-rgb",accent1:"--ipt-accent1-rgb",onAccent1:"--ipt-on-accent1-rgb",accent2:"--ipt-accent2-rgb",onAccent2:"--ipt-on-accent2-rgb"},apply_PLAID_styles:function(e){e=this._transform_PLAID_style_input(e),e=this._construct_PLAID_CSS_string(e);e&&e.length&&E.add_css_style(e,this.style_id,"a")},_transform_PLAID_style_input:function(e){var t,i,n,o={};for(t in e)e.hasOwnProperty(t)&&e[t]&&"undefined"!==e[t]&&"null"!==e[t]&&(i=this.PLAID_CSS_MAP[t])&&(n=e[t],o[i]=n.startsWith("#")&&this.hex_to_RGB(n)||n);return o},_construct_PLAID_CSS_string:function(e){if(Object.keys(e).length<1)return null;var t,i=["\n",":root {"];for(t in e){var n="   "+t+": "+e[t]+";";i.push(n)}return i.push("}"),3<i.length?i.join("\n"):null},apply_PLAID_theme:(N=!1,function(){if(!N)switch(this.theme){case"dark":N=!0;var e={base:this.to_CSS_var_string(this.PLAID_CSS_MAP.baseAlt),baseShade1:this.to_CSS_var_string(this.PLAID_CSS_MAP.baseAltShade1),baseShade2:this.to_CSS_var_string(this.PLAID_CSS_MAP.baseAltShade2),onBase:this.to_CSS_var_string(this.PLAID_CSS_MAP.onBaseAlt),onBaseAccent2:this.to_CSS_var_string(this.PLAID_CSS_MAP.onBaseAltAccent2)};this.apply_PLAID_styles(e);break;case"light":N=!0;e={baseAltShade2:this.to_CSS_var_string(this.PLAID_CSS_MAP.baseShade2),onBaseAltAccent2:this.to_CSS_var_string(this.PLAID_CSS_MAP.onBaseAccent2)};this.apply_PLAID_styles(e);break;default:return}}),apply_fast:function(e,t){var i,n,o,s=this.styles[e.treatment],r=[];for(i in s)if(s.hasOwnProperty(i))for(var a=s[i],d=0;d<a.length;d++)n=a[d],(o=this.get_values_for_setting(n,e,t))&&(o=this.build_rule(n.selector,i,o,n.important),r.push(o));E.add_css_style(r.join("\n"),this.style_id,"o"),this.apply_PLAID_theme()},get_values_for_setting:function(e,t,i){i=i?null:e.default;return e.fixed?i=e.fixed:e.name in t&&(i=t[e.name]),i="string"==typeof i?[i]:i},build_rule:function(e,t,i,n){for(var o="",s=0;s<i.length;s++)o+="  "+t+" : "+i[s]+(n?" !important":"")+";\n";return e+"{\n"+o+"}\n"},apply:function(e){var t=this;w.getElementById("root").style.boxShadow="none",A.generic.on_document_ready(function(){t.settings=e,"styles"in t?t._apply():A.generic.load_script_notify(t.data_url,function(){t._apply()})})},_apply:function(){var e=this.settings.ARGS.split(/&/),i={},n=this,o="/* ARGS:"+this.settings.ARGS+" */\n";jQuery.each(e,function(e,t){t=/^(.*)=(.*)$/.exec(t);3===t.length&&(i[t[1]]=unescape(t[2].replace(/\+/g," ")))}),e=this.invert_styles(i.treatment),jQuery.each(e,function(e,t){t.fixed?o+=n.format_css(t,t.fixed):(i[e]||t.default)&&(o+=n.format_css(t,i[e]))});try{jQuery("style#"+this.style_id).remove(),jQuery("head").append(jQuery('<style type="text/css">').attr("id",this.style_id).html(o))}catch(e){E.add_css_style(o,this.style_id,"o")}},invert_styles:function(e){var o=["default","important","fixed"],s={};return jQuery.each(this.styles[e],function(t,e){jQuery.each(e,function(e,i){var n=s[i.name]={style:t,selector:i.selector};jQuery.each(o,function(e,t){i[t]&&(n[t]=i[t])})})}),s},format_css:function(e,t){return e.selector+" { "+e.style+" : "+(t||e.default)+(e.important?" !important;":";")+"}\n"},hex_to_RGB:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,n){return t+t+i+i+n+n});e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?String(this.to_hex(e[1]))+","+this.to_hex(e[2])+","+this.to_hex(e[3]):null},to_hex:function(e){return parseInt(e,16)},to_CSS_var_string:function(e){return"var("+e+")"}},css:{inject_css:function(i,n){A.generic.on_document_ready(function(){var e=i.getElementById(n),t=w.head;E.insert_inside(e,t)})}}},S.store(),E.on_document_ready(function(e){e(A).on("load",function(){S.store()})}),E.on_document_ready(function(){oe(A,"unload",function(){E.unload_plugins()})}),t&&E.on_document_ready(function(){E.monitoring.record_metric("ads_js_response",t)})},{"./ad-visibility-util":121,"./ads-btr-utils":124,"./ads-dom-utils":126,"./aps-auction-manager":132,"./backup-img-init":133,"./date-check":142,"./global-style":146,"./http":147,"./is-in-viewport":149,"./is-responsive":151,"./register-click-trackers":154,"./responsive-ad-api/media-orchestrator-bridge":157,"./responsive-ad-api/responsive-ad-api":160,"./safeframe":165,"./scale":166,"./site-util":167,"./slot-names":169,"./slot-util":170,"./tarnhelm-ad-utils":171,"./zuko/httpZukoCall":175,"./zuko/httpZukoCallUtils":176,"@imdb/ad-public-site-endpoint-builder":86}],132:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.apsAuctionManager=void 0;var n,o=e("./responsive-ad-api/responsive-ad-api"),s=e("./responsive-ad-api/constants"),r=(n=e("./slot-names"))&&n.__esModule?n:{default:n},a=e("./ads-csa");let d=i.apsAuctionManager={APS_AAX_AD_TYPES:["SD","House"],SLOT_BLOCK_LIST:new Set(["interstitial"]),SLOT_LIST_REQUIRING_NO_CLASS1:new Set([r.default.ADHESION_BOTTOM]),auditLog:[],apsSlotInfoMap:{},apsSlotIdToOriginalSlotNameMap:{},GAM_SLOT_REQUEST_EVENT_NAME:"slotRequested",GAM_SLOT_RENDER_ENDED_EVENT_NAME:"slotRenderEnded",GAM_SLOT_RESPONSE_RECEIVED_EVENT_NAME:"slotResponseReceived",slotsWithInitialGAMContent:new Set,requestCount:0,requestCountBySlotName:new Map,makeApsAndGAMRequests(i,n){let o=window.apstag;i&&o&&0<n.length&&(this.log("Calling APS with slots: "+n.map(e=>JSON.stringify(e)).join("")),o.fetchBids({slots:n},function(e){d.log("Bids received from APS: "+JSON.stringify(e)),i.cmd.push(function(){var e=i.pubads().getSlots();let t=n.map(e=>e.slotName);e=e.filter(e=>t.includes(e.getAdUnitPath()));o.setDisplayBids(),i.pubads().refresh(e)})}))},emitGAMSlotLoadEvent(e,t,i){window.ue&&window.ue.count&&"function"==typeof window.ue.count&&e&&(window.ue.count(`imdb:apsAuctionManager:slotLoad:${e}_aps`,i?0:1),window.ue.count(`imdb:apsAuctionManager:slotLoad:${t}_aps`,i?0:1)),window.uex&&"function"==typeof window.uex&&e===r.default.ADHESION_BOTTOM&&(window.uex("ld",e,{wb:1}),d.log(`uex() recording "ld" for "${e}" -- Timestamp: `+Date.now()),(0,a.logCSAWidgetEvent)(e,a.CSA_MARKERS.LOADED),(0,a.logCSAWidgetEvent)(e,a.CSA_MARKERS.CLICK_TO_LOADED))},emitGAMSlotRequestEvent(e,t){window.ue&&window.ue.count&&"function"==typeof window.ue.count&&e&&(window.ue.count(`imdb:apsAuctionManager:slotRequest:${e}_aps`,1),window.ue.count(`imdb:apsAuctionManager:slotRequest:${t}_aps`,1)),window.uet&&"function"==typeof window.uet&&e===r.default.ADHESION_BOTTOM&&(window.uet("bb",e,{wb:1}),d.log(`uet() recording "bb" for "${e}" -- Timestamp: `+Date.now()),(0,a.logCSAWidgetEvent)(e,a.CSA_MARKERS.WIDGET_BEGIN),(0,a.logCSAWidgetEvent)(e,a.CSA_MARKERS.CLICK_TO_BODY_BEGIN))},emitGAMSlotResponseReceivedEvent(e){window.uet&&"function"==typeof window.uet&&e===r.default.ADHESION_BOTTOM&&(window.uet("be",e,{wb:1}),d.log(`uet() recording "be" for "${e}" -- Timestamp: `+Date.now()),(0,a.logCSAWidgetEvent)(e,a.CSA_MARKERS.WIDGET_END),(0,a.logCSAWidgetEvent)(e,a.CSA_MARKERS.CLICK_TO_BODY_END))},emitTimingMetric(e,t){t=d.apsSlotIdToOriginalSlotNameMap[t];t&&"function"==typeof window.uet&&window.uet(e,`imdb:apsAuctionManager:${t}_aps`,{wb:1})},setupGAMEventListenerForRequest(e){e&&e.cmd&&e.cmd.push(function(){e.pubads().addEventListener(d.GAM_SLOT_REQUEST_EVENT_NAME,e=>{var e=e.slot,e=e&&e.getSlotElementId(),e=d.apsSlotIdToOriginalSlotNameMap[e],t=d.hasStartedAnApsRefreshRequest()?"aggregate_refresh":"aggregate";d.emitGAMSlotRequestEvent(e,t)})})},setupGAMEventListenerAfterRender(e){e&&e.cmd&&e.cmd.push(function(){e.pubads().addEventListener(d.GAM_SLOT_RENDER_ENDED_EVENT_NAME,e=>{var t=e.slot,t=t&&t.getSlotElementId(),e=e.isEmpty,t=d.apsSlotIdToOriginalSlotNameMap[t],i=d.hasStartedAnApsRefreshRequest()?"aggregate_refresh":"aggregate";d.emitGAMSlotLoadEvent(t,i,e)})})},hideAdFromAccessibilityTools(){let t=!1,e=setInterval(()=>{t?clearInterval(e):document.querySelectorAll('div[style*="position: fixed"]').forEach(e=>{e.querySelectorAll("iframe").forEach(e=>{e.setAttribute("aria-hidden","true"),e.contentDocument&&e.contentDocument.body&&e.contentDocument.body.setAttribute("aria-hidden","true"),t=!0})})},500);setTimeout(()=>{e&&clearInterval(e)},1e4)},setupGAMEventListeners(e){e&&e.cmd&&(e.cmd.push(function(){e.pubads().addEventListener(d.GAM_SLOT_RESPONSE_RECEIVED_EVENT_NAME,e=>{var e=e.slot,t=e&&e.getSlotElementId(),e=e&&e.getResponseInformation(),i=(d.emitTimingMetric("bb",t),d.log(`slotResponseReceived for slot ${JSON.stringify(t)} with data `+JSON.stringify(e)),d.apsSlotIdToOriginalSlotNameMap[t]),i=(d.emitGAMSlotResponseReceivedEvent(i),new CustomEvent("apsSlotLoad_"+t,{detail:e}));window.top.dispatchEvent(i),d.log(`dispatched ${i.type} event with data `+JSON.stringify(i.detail))})}),this.log("Set up GAM slotResponseReceived listener"))},incrementApsRequestCountForSlot(e){this.requestCountBySlotName.has(e)?this.requestCountBySlotName.set(e,this.requestCountBySlotName.get(e)+1):this.requestCountBySlotName.set(e,1)},runApsAuctionFlow(e,t,i){if(this.log("Beginning aps auction flow"),this.requestCount++,this.apsSlotInfoMap){for(var n in t)this.incrementApsRequestCountForSlot(n),this.setupApsEventListener(e,this.apsSlotInfoMap[n].slotId,n,t);i=this.createApsSlotArrays(e,t,i);this.hasStartedAnApsRefreshRequest()||(this.setupGAMEventListeners(e),this.setupGAMEventListenerForRequest(e),this.setupGAMEventListenerAfterRender(e)),this.makeApsAndGAMRequests(e,i)}},aaxResponseIsLessValuableThanApsBid(e){var t=o.responsiveAdAPI.isAdProductTypeBlank(e),e=e?e.aaxAdType:"";return t||this.APS_AAX_AD_TYPES.includes(e)},createApsSlotArrays(i,e,n){this.log("Creating APS slot arrays for "+JSON.stringify(e));var o=[];for(let t in this.apsSlotInfoMap){var s=e[t],s=s?s.creativeMetadata:{};if(i&&e.hasOwnProperty(t)){let e=this.getApsInfoForSlot(t,n.get(t));e&&0<Object.keys(e).length&&this.isFirstApsRequestForSlot(t)&&(this.log("Defining slot "+t),i.cmd.push(function(){i.defineSlot(e.slotName,e.sizes[0],e.slotID).addService(i.pubads()),d.isGptDivPresent(e.slotID)?i.display(e.slotID):d.beginGptDivDisplayInterval(i,e.slotID,t),d.log(`Defined slot ${t} with `+JSON.stringify(e))})),this.aaxResponseIsLessValuableThanApsBid(s)&&o.push(e),d.apsSlotIdToOriginalSlotNameMap[e.slotID]=t}}return 0<o.length&&!this.hasStartedAnApsRefreshRequest()&&i.cmd.push(function(){i.pubads().disableInitialLoad(),i.pubads().enableSingleRequest(),i.enableServices(),d.log("Enabled googletag service")}),this.log("Created aps slots: "+o.map(e=>JSON.stringify(e)).join("")),o},beginGptDivDisplayInterval(e,t,i){let n=setInterval(()=>{d.isGptDivPresent(t)&&(e.display(t),d.log(`Displayed ${t} from interval`),clearInterval(n))},100)},isGptDivPresent(e){return null!==document.getElementById(e)},getApsInfoForSlot(e,t){let i={};var n;return this.apsSlotInfoMap&&Object.keys(this.apsSlotInfoMap).includes(e)&&(n=this.apsSlotInfoMap[e],i={slotName:n.slotName,slotID:n.slotId,sizes:[this.convertSizeStringToIntArray(t)]},n.slotParams)&&(i.slotParams=n.slotParams),this.log(`Created apsInfo for ${e}: `+JSON.stringify(i)),i},convertSizeStringToIntArray(e){let t=[];return t=e&&e.indexOf("x")?e.split("x").map(e=>parseInt(e)):t},getApsEnabledSlots(t,i){let n={};return t&&i&&Object.keys(t).filter(e=>!this.SLOT_BLOCK_LIST.has(e)).forEach(e=>{this.isInline20AdClass1(t)&&this.SLOT_LIST_REQUIRING_NO_CLASS1.has(e)?this.log(`Skip adding ${e} to apsEnabledSlots due to presence of class 1 ad`):(this.log(`Trying to add ${e} to apsEnabledSlots`),i.hasOwnProperty(e)&&this.aaxResponseIsLessValuableThanApsBid(t[e].creativeMetadata)&&(n[e]=t[e],this.log(`Added ${e} to apsEnabledSlots`)))}),n},isInline20AdClass1(e){if(e[r.default.INLINE20]&&e[r.default.INLINE20].slotMarkup){e=e[r.default.INLINE20].slotMarkup.match(/let adFeedbackUrl = '([^']+)'/);if(e&&e[1]){e=e[1].match(/adProgramId%22%3A%22(\d+)%22/);if(e&&e[1])return"1004"===e[1]}}else this.log("SlotsMap does not contain inline20 slot markup");return!1},setupApsEventListener(e,t,i,n){this.log("Adding APS event listener for "+t);var o="apsSlotLoad_"+t;window.top.addEventListener(o,e=>{e.detail?(d.log(`Successful APS bid received for ${i}|`+t),d.handleSuccessfulApsBidResponse(i)):(d.log(`Unsuccessful APS bid received for ${i}|`+t),d.handleFailedApsBidResponse(i,n[i]))},{once:!0}),d.log("Created event listener with ID: "+o)},handleSuccessfulApsBidResponse(e){1===d.requestCount&&(t=new CustomEvent("updateAdRefreshStateForSlot",{detail:{slotName:e,shouldSlotRefresh:!0}}),window.top.dispatchEvent(t)),d.hasStartedAnApsRefreshRequest()||d.slotsWithInitialGAMContent.add(e);var t=e.replace("_refresh","");o.responsiveAdAPI.queueFunc("adSlotMount",t,()=>{d.apsAdLoadCallback(e)})},apsAdLoadCallback(e){e===r.default.INLINE20&&window.mediaOrchestrator&&window.mediaOrchestrator.publish(s.MEDIA_PLAYBACK_EVENT_NAME,{slotName:e,timestamp:Date.now(),type:s.THIRD_PARTY_AD_DETECTED_EVENT_TYPE,dispatcher:"aps-auction-manager"});e=e.replace("_refresh","");d.hidePlaceholderPattern(e),e!==r.default.ADHESION_BOTTOM?o.responsiveAdAPI.unCollapseAd(e):d.hideAdFromAccessibilityTools(),d.hideAaxAd(e),d.hidePreviousGAMAd(e)},handleFailedApsBidResponse(e,t){d.log(t);var i=t&&t.creativeMetadata;d.shouldRenderAaxAd(e,i)&&(d.log("Rendering AAX ad for "+e),i=e.replace("_refresh",""),o.responsiveAdAPI.queueFunc("adSlotMount",i,()=>{o.responsiveAdAPI.renderAd(e,t)}))},getGoogleSlotFromApsSlotName(t){var e;if(window.googletag&&window.googletag.pubads&&"function"==typeof window.googletag.pubads)return e=(e=window.googletag.pubads().getSlots())&&e.find(e=>t===e.getAdUnitPath()),d.log(`GoogleSlot from ${t} is: `+e),e;d.log("googletag is not setup yet, failed to get Google slot")},getCurrentAaxAdWrapperDiv(e){return document.getElementById(o.responsiveAdAPI.getSlotWrapperId(e))||document.getElementById(o.responsiveAdAPI.getRefreshedSlotWrapperId(e))||void 0},hidePlaceholderPattern(e){e=document.getElementById(o.responsiveAdAPI.getSlotPlaceholderId(e));e?e.style.display="none":d.log("Cant find placeholder")},hideAaxAd(e){var t=d.getCurrentAaxAdWrapperDiv(e);t?(t.remove(),d.log("AAX Wrapper Div Removed for "+e)):d.log(`AAX Wrapper Div for ${e} not found`)},hidePreviousGAMAd(e){var t,i;d.slotsWithInitialGAMContent.has(e)&&(i=d.apsSlotInfoMap[e]&&d.apsSlotInfoMap[e].slotName,d.log("Trying to remove google ad slot with ID "+i),d.hasStartedAnApsRefreshRequest())&&(i=d.getGoogleSlotFromApsSlotName(i))&&(t=i.getSlotId().getDomId(),window.googletag.destroySlots([i]),(i=document.getElementById(t))&&(i.remove(),d.log("Removed googleDiv with ID "+t)),d.slotsWithInitialGAMContent.delete(e))},shouldRenderAaxAd(e,t){return!(this.hasStartedAnApsRefreshRequest()&&o.responsiveAdAPI.isAdProductTypeBlank(t)&&"mediaviewer_banner"!==e||e===r.default.ADHESION_BOTTOM)},log(e){this.auditLog.push(e)},viewAuditLog(){this.auditLog.forEach(e=>{console.log(e)})},hasStartedAnApsRefreshRequest(){return 1<this.requestCount},isFirstApsRequestForSlot(e){return 1===this.requestCountBySlotName.get(e)},cleanApsSlotInfoMap(e){var t={};if(e)for(var i in e){var n=e[i];t[i]={slotId:n.slotId||n.apsSlotId,slotName:n.slotName||n.apsSlotName,slotParams:n.slotParams||n.apsSlotParams}}return t},forceAaxRender(){this.APS_AAX_AD_TYPES=[]},forceApsRender(){this.APS_AAX_AD_TYPES=["SD","House","other"]},forceDefaultRender(){this.APS_AAX_AD_TYPES=["SD","House"]},block3PForMediaviewerBanner(){this.SLOT_BLOCK_LIST.add("mediaviewer_banner")}}},{"./ads-csa":125,"./responsive-ad-api/constants":155,"./responsive-ad-api/responsive-ad-api":160,"./slot-names":169}],133:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.initAndBindResponsiveBackupLogic=function(e){if(void 0!==e.tarnhelm_backup)(0,n.handleTarnhelmBackupImg)(e);else{if(void 0===e.backup_static)return!1;(0,o.handlePremiumStaticResponsiveBackup)(e)}return!0};var n=e("./tarnhelm-backup"),o=e("./non-tarnhelm-backup")},{"./non-tarnhelm-backup":152,"./tarnhelm-backup":172}],134:[function(e,t,i){function r(e,t,i,n,o){e&&e()?(e=i())?o(e):n():t()}Object.defineProperty(i,"__esModule",{value:!0}),i.bindBackupImage=function(e,t,i,n,o,s){r(t,i,n,o,s),e.parent.onresize=function(){r(t,i,n,o,s)}}},{}],135:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.backupImagesEnabled=h,i.isResponsiveBackupSlot=function(e){return d(e)||l(e)},i.shouldShowBackupDesktop=u,i.shouldShowBackupMobileWeb=c,i.shouldShowBackupSupplierResponsive=function(e){return function(){return h(e)&&((0,o.isInternetExplorer)()||(0,o.isIpad)()||u(e)||c(e))}};var n=(i=e("./is-responsive"))&&i.__esModule?i:{default:i},o=e("./site-util"),s=e("./slot-util");let r=1024,a=767;function d(e){return(0,o.isDesktop)()&&(0,n.default)(e)&&(0,s.isInline40)(e)}function l(e){return(0,o.isMobile)()&&(0,n.default)(e)&&(0,s.isInline40)(e)}function u(e){return d(e)&&(0,o.getBrowserWidth)(e)<r}function c(e){return l(e)&&(0,o.getBrowserWidth)(e)>a}function h(e){return!(e&&e.imdbCreativeModel&&e.imdbCreativeModel.disableBackupImages)}},{"./is-responsive":151,"./site-util":167,"./slot-util":170}],136:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}},{}],137:[function(e,t,i){function n(){var e;if(l()&&a.JSON){if(e=l().getItem(h))try{return JSON.parse(e)}catch(e){l().removeItem(h),console.log("Could not deserialize persistence variable")}return{}}return null}function o(e){l()&&a.JSON&&l().setItem(h,JSON.stringify(e))}function s(){var e,t=n();if(t){for(e in t)r(t[e])&&delete t[e];o(t)}}function r(e){return!(e&&e.l&&e.l>m)}var a,d,l,u,c,h,p,m;a=window,d=document,a.imdbads=a.imdbads||{},a.imdbads.frequencyCapping=(l=function(){try{return u&&!c?"undefined"!=typeof mraidbridge&&void 0!==mraidbridge.localstorage?mraidbridge.localstorage:void 0:(u&&c&&null!==a.localStorage&&(a.localStorage.setItem("foo","foo"),a.localStorage.removeItem("foo")),a.localStorage)}catch(e){}},u=/iphone|ipad|ipod/i.test(a.navigator.userAgent.toLowerCase()),c=null!==d.domain.match(/imdb/g),h="IMDbAdvertisingFrequencyCapping",p=(new Date).getTime(),m=p-864e5,a.generic&&a.generic.on_document_ready?a.generic.on_document_ready(s):"complete"===d.readyState?s():a.addEventListener("load",s,!1),{should_autoplay:function(e){var t=n();return!!t&&r(t[e])},log_autoplay:function(e){var t=n();t?(t[e]={l:p},o(t)):(console.log("Autoplay logged, but localStorage is not available!"),a.generic&&a.generic.monitoring&&a.generic.monitoring.record_event&&a.generic.monitoring.record_event("flash_persistence_failure",!0))},clear_autoplay:function(){o({})}})},{}],138:[function(e,t,i){e("../generic-init.js"),e("../document-ready.js"),e("../consolelog.js"),e("../yesScript.js"),e("../client-frequency-capping.js"),e("../ads.js"),e("../floater.js"),e("../custom-string.js"),e("../ads-slot-events.js"),e("../ads-generic-common.js"),e("../ads-monitor.js"),e("../ads-monitor-head.js"),e("../ads-amazon-csm.js"),e("../ads-async.js"),e("../parallax.js"),e("../slot-manager.js"),e("@amzn/IMDbAdvertisingStaticMedia/js/pageLoad.js")},{"../ads-amazon-csm.js":122,"../ads-async.js":123,"../ads-generic-common.js":127,"../ads-monitor-head.js":128,"../ads-monitor.js":129,"../ads-slot-events.js":130,"../ads.js":131,"../client-frequency-capping.js":137,"../consolelog.js":140,"../custom-string.js":141,"../document-ready.js":143,"../floater.js":144,"../generic-init.js":145,"../parallax.js":153,"../slot-manager.js":168,"../yesScript.js":174,"@amzn/IMDbAdvertisingStaticMedia/js/pageLoad.js":2}],139:[function(e,t,i){e("./ads.js"),e("@amzn/tarnhelmjs/dist/js/tarnhelm")},{"./ads.js":138,"@amzn/tarnhelmjs/dist/js/tarnhelm":83}],140:[function(e,t,i){window.consoleLog=function(e,t,i){var n=window.consoleLog,o=document.location.hash.match("debug=1"),o="error"===i||o;t?(n[t]=n[t]||[]).push(e):t="global",t=t+" : "+e,(n.global=n.global||[]).push(t);try{o&&window.console&&(window.console[i]?window.console[i](t):window.console.log&&window.console.log(t))}catch(e){}},window.consoleWarn=function(e,t){consoleLog(e,t,"warn")},window.consoleError=function(e,t){consoleLog(e,t,"error")}},{}],141:[function(e,t,i){var n;n=window,document,(n.custom=n.custom||{}).strings={chained_replace:function(e){for(var t=this,i=0;i<e.length;i++)var n=e[i],t=t.replace(n[0],n[1]);return t}}},{}],142:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(i,e){let n=new Date((new Date).toDateString()).valueOf(),o=[],s=0,r=0,a=0,d;for(let t=0;t<i.length;t++)try{var l=i[t].startDate,u=i[t].endDate,c=null==l||""===l,h=null==u||""===u;c&&h?e?d=t:o.push(t):(s=c?0:new Date(l.replace(/-/g,"/")).valueOf(),r=h?n+1:new Date(u.replace(/-/g,"/")).valueOf(),e&&(0===s||s<=n&&s>a)&&(a=s,d=t),!e&&s<=n&&r>n&&o.push(t))}catch(e){"consoleLog"in window&&window.consoleLog("Date checking failed for "+i[t].toString()+" with error: "+e.toString(),"ppb","error"),window.ueLogError&&window.ueLogError(e)}return e?d:o}},{}],143:[function(e,t,i){var n;(n=window.generic).install(n,{document_readys:[],document_is_ready:function(){var e,t=n.document_readys;if((n.document_readys=null)!==t)for(e=0;e<t.length;e++)try{t[e](jQuery)}catch(e){}n.should_jQuery_noConflict&&jQuery.noConflict(!1)},on_document_ready:function(e){n.has_document_readied()?e(jQuery):n.document_readys.push(e)},has_document_readied:function(){return null===n.document_readys},vanilla_on_document_ready:function(t){"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?t():window.addEventListener("DOMContentLoaded",e=>{t()})}})},{}],144:[function(e,t,i){var l,u,c=(e=e("./ads-dom-utils"))&&e.__esModule?e:{default:e};e=window,l=document,(u=e.custom=e.custom||{}).floater={close:function(e){e=l.getElementById(e);e.style.width="0px",e.style.height="0px"},launch:function(e,t,i,n,o,s,r,a){var d=l.createElement("iframe"),i="string"==typeof i?l.getElementById(i):i;"none"!==t&&setTimeout(function(){u.floater.close(s)},1e3*t),generic.extend(d,{id:s,name:s,className:a,width:e[0]+"px",height:e[1]+"px",frameBorder:"0",scrolling:"no",allowTransparency:"true",style:{marginLeft:o[0]+"px",marginTop:o[1]+"px",zIndex:o[2],position:"absolute"}}),n(d,i),c.default.isFirefox()?d.onload=function(){var e=c.default.frameDoc(d);c.default.appendContentToIframeDoc(e,r)}:setTimeout(function(){var e=c.default.frameDoc(d);c.default.appendContentToIframeDoc(e,r)},0)},set:function(e,t,i,n,o,s,r){var a="floater_"+Math.ceil(9999999*Math.random());return u.floater.launch(t,i,n,o,s,a,e,"floater_"+r),a}}},{"./ads-dom-utils":126}],145:[function(e,t,i){window.generic=window.generic||{},window.generic.install=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}},{}],146:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.globalizeCss=function(e){if(e){var t=e.top.document.body,i=e.document.getElementsByClassName(a),n=(0,r.getSlotName)(e)+"-imdb-adtech-global-css",o=t.getElementsByClassName(n);if(t){for(let e=0;e<o.length;e++)t.removeChild(o[e]);for(let e=0;e<i.length;e++){var s=i[e];s.classList.add(n),t.prepend(s)}}}};var r=e("./slot-util");let a="imdb-adtech-global-css"},{"./slot-util":170}],147:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.makeAdSlotsCall=function(e,t,o,s,r){if("undefined"!=typeof window&&(window.AdSlots={},window.AdSlotsLoading=!0,e)&&!window.hasAdAJAXCallFired){let n=window.top.ad_utils.constructClientSideUrl(t,o,s);if(n){let i=window.top.ad_utils.constructCurrentSlotSizeMap(o,s,window.innerWidth);if(!window.top.ad_utils.getAdsForSlotsUrl||window.top.ad_utils.getAdsForSlotsUrl!==n){window.hasAdAJAXCallFired=!0,"function"==typeof window.uet&&(window.uet("bb",l,{wb:1}),(0,d.logCSAWidgetEvent)(l,d.CSA_MARKERS.WIDGET_BEGIN),(0,d.logCSAWidgetEvent)(l,d.CSA_MARKERS.CLICK_TO_BODY_BEGIN));try{let t=new XMLHttpRequest;t.onreadystatechange=function(){var e;4===this.readyState&&200===this.status&&(window.ue&&"function"==typeof window.ue.count&&window.ue.count(l,0),e=JSON.parse(t.responseText),window.AdSlots={...window.AdSlots,...e.slotsMap},window.AdSlotsLoading=!1,window.top.ad_utils.getAdsForSlotsUrl=n,window.top.ad_utils)&&window.top.ad_utils.responsiveAdAPI&&window.top.ad_utils.responsiveAdAPI.handleAdServiceResponse(e,void 0,r,i),"function"==typeof window.uex&&(window.uex("ld",l,{wb:1}),(0,d.logCSAWidgetEvent)(l,d.CSA_MARKERS.LOADED),(0,d.logCSAWidgetEvent)(l,d.CSA_MARKERS.CLICK_TO_LOADED))},t.onerror=function(e){e.logLevel="WARN",e.signature=a.NO_AD_TO_LOAD_EVENT_NAME,e.message="http request blocked by client",u(e),window.mediaOrchestrator&&Object.keys(s).forEach(function(e){window.mediaOrchestrator.publish(a.NO_AD_TO_LOAD_EVENT_NAME,{slotName:e,timestamp:Date.now(),type:"",dispatcher:"ajax-request"})})},t.open("GET",n,!0),t.withCredentials=!0,t.send()}catch(e){u(e)}}window.hasAdAJAXCallFired=!1}}};var a=e("./responsive-ad-api/constants"),d=e("./ads-csa");let l="AdAJAXRequest",u=e=>{window.ue&&"function"==typeof window.ue.count&&window.ue.count(l,1),window.ueLogError&&(e.attribution="Advertising",window.ueLogError(e))}},{"./ads-csa":125,"./responsive-ad-api/constants":155}],148:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getImage=l,i.getSize=u,i.responsiveImageGenerator=function(i,n,o,s,r,a,d){return function(){var e,t=l(i,n);return void 0!==t&&t?(e=u(i,r,a,d),'<a href="'+o+'" target="'+s+'"><img src="'+t+'" width="'+e.width+'" height="'+e.height+'" border=0 /></a>'):t}};var o=e("./site-util");function l(e,t){return!(0,o.isIpad)()&&!(0,o.isInternetExplorer)()||e?e:t}function u(e,t,i,n){return!(0,o.isIpad)()&&!(0,o.isInternetExplorer)()||e?(e=n.split("x")).length<2?{width:0,height:0}:{width:e[0],height:e[1]}:{width:t,height:i}}},{"./site-util":167}],149:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){e=e.getBoundingClientRect();return 0<=e.top&&0<=e.left&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}},{}],150:[function(e,t,i){function n(e){return!!(e&&-1<e.toLowerCase().indexOf("_refresh"))}Object.defineProperty(i,"__esModule",{value:!0}),i.isRefreshSlotIFrame=function(e){return!(!e||!e.classList?.contains("refreshed-ad"))||n(e?.id)},i.isRefreshSlotName=n},{}],151:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return null!==e.top.document.getElementById("__next")||null!==e.parent.document.getElementById("__next")}},{}],152:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.handlePremiumStaticResponsiveBackup=function(t){let e=t.backup_static||{},i=e.adLinkId||"static-ad-link",n=e.backupLinkId||"static-backup-link",o=e.additionalHtml||"static-extra-html",s=e.responsiveImage||"",r=e.size||"0x0",a=e.renderWidth||0,d=e.renderHeight||0,l=e.adState="",u=(0,c.shouldShowBackupSupplierResponsive)(t);(0,p.bindBackupImage)(t,u,function(){(0,c.isResponsiveBackupSlot)(t)&&"ad"!==l&&((0,h.uncollapseAd)(t.frameElement),(0,h.collapseElement)(t,n),(0,h.uncollapseElement)(t,i),(0,h.uncollapseElement)(t,o),(0,g.isMobile)()?((0,m.removeWrapperSize)(t),(0,m.mobileWebCreativeResizing)(t,a,d)):(0,m.scaleWrapperToWidth)(t,a,a,d),l="ad")},function(){return s},function(){"collapsed"!==l&&((0,h.collapseAd)(t.frameElement),l="collapsed")},function(){var e;"backup"!==l&&((0,h.uncollapseAd)(t.frameElement),e=(0,f.getSize)(s,0,0,r),(0,m.scaleWrapperToWidth)(t,e.width,e.width,e.height),(0,h.uncollapseElement)(t,n),(0,h.collapseElement)(t,i),(0,h.collapseElement)(t,o),l="backup")})};var c=e("./backup-util"),h=e("./ad-visibility-util"),p=e("./backup-img"),m=e("./scale"),f=e("./img-generator"),g=e("./site-util")},{"./ad-visibility-util":121,"./backup-img":134,"./backup-util":135,"./img-generator":148,"./scale":166,"./site-util":167}],153:[function(e,t,i){var s,r;s=window,r=document,s.custom.parallax={init:function(o){s.generic.on_document_ready(function(){var e=o.getElementById("parallax"),t=r.getElementById("root"),e=(generic.insert_before(e,t),o.getElementById("skrollr_core_src").innerHTML);r.getElementById("skrollr_core_dest").innerHTML=e,s.skrollr&&s.skrollr.init({mobileCheck:function(){return!1},smoothScrolling:!0});for(var i=1;i<=10;i++){var n=r.getElementById("parallax_layer"+i);n&&(custom.parallax.seen["parallax_layer"+i]={obj:n,seen:!1})}r.addEventListener("scroll",custom.parallax.scrollListener)})},seen:{},interactionTrackers:{},scrollListener:function(){for(var e,t=1;t<=10;t++)(e=custom.parallax.seen["parallax_layer"+t])&&!e.seen&&e.obj.getBoundingClientRect().top-r.documentElement.clientHeight<-100&&((new Image).src=custom.parallax.interactionTrackers["parallax_layer"+t],e.seen=!0)}}},{}],154:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(n){n.addEventListener("click",function(){var t=n.getAttribute("data-ct-count");if(t&&0<t)for(let e=0;e<t;e++){var i=n.getAttribute("data-ct-"+e);i&&((new Image).src=i)}})}},{}],155:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.WRAP_BACKGROUND_STYLE_TAG_ID=i.WRAP_BACKGROUND_DIV_TAG_ID=i.TITLE_PAGE_TYPE=i.THIRD_PARTY_AD_DETECTED_EVENT_TYPE=i.PRIMARY_ADS_LOADED_EVENT_NAME=i.PLAY=i.PLAID_STYLE_OVERRIDES_ID=i.PLACEHOLDER_SUFFIX=i.PAGE_WRAPPER_CLASSNAME=i.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME=i.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE=i.NO_AD_TO_LOAD_EVENT_NAME=i.NAME_PAGE_TYPE=i.MEDIA_PLAYBACK_EVENT_NAME=i.LOADSTART=i.LARGE_BREAKPOINT=i.INLINE20_PAGE_BACKGROUND_CLASS=i.HOME_PAGE_TYPE=i.BLANK=i.AUTOPLAY_VIDEO_MAYBE_PRESENT_EVENT_TYPE=i.AD_LOADED_EVENT_NAME=void 0;i.AD_LOADED_EVENT_NAME="adLoaded",i.AUTOPLAY_VIDEO_MAYBE_PRESENT_EVENT_TYPE="1P-ad-autoplay-video-maybe-present",i.BLANK="blank",i.HOME_PAGE_TYPE="home",i.INLINE20_PAGE_BACKGROUND_CLASS="inline20-page-background",i.LARGE_BREAKPOINT=1024,i.LOADSTART="loadstart",i.MEDIA_PLAYBACK_EVENT_NAME="mediaPlaybackEvent",i.PAGE_WRAPPER_CLASSNAME="ipc-page-wrapper",i.PRIMARY_ADS_LOADED_EVENT_NAME="primaryAdsLoaded",i.NO_AD_TO_LOAD_EVENT_NAME="noAdToLoad",i.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE="no-autoplay-video-ad-detected",i.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME="noPrimaryAdsToLoad",i.PLAY="play",i.PLAID_STYLE_OVERRIDES_ID="plaid-style-overrides-id",i.THIRD_PARTY_AD_DETECTED_EVENT_TYPE="3P-ad-no-autoplay-video-detected",i.TITLE_PAGE_TYPE="title",i.NAME_PAGE_TYPE="name",i.WRAP_BACKGROUND_DIV_TAG_ID="ipc-wrap-background-id",i.WRAP_BACKGROUND_STYLE_TAG_ID="wrap-background-styles",i.PLACEHOLDER_SUFFIX="placeholderPattern"},{}],156:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getAdVideoAutoplayBufferInterval=function(){return this.adVideoAutoplayBufferInterval},i.getHasPremiumAd=function(){return this.hasPremiumAd},i.getLastAAXResponse=function(){return this.lastAAXResponse},i.getLastAdResponse=function(){return this.lastAdResponse},i.getPlaidOverrides=function(){return this.plaidOverrides},i.getPreviousWindowWidth=function(){return this.previousWindowWidth},i.getRefreshedSlotWrapperId=function(e){return e+"_refresh_wrapper"},i.getResponsiveResizingDisabledSlotsMap=function(){return this.responsiveResizingDisabledSlotsMap},i.getSlotPlaceholderId=function(e){return""+(e+n.PLACEHOLDER_SUFFIX)},i.getSlotResponsiveWrapperId=function(e){return e+"_responsive_wrapper"},i.getSlotWrapperId=function(e){return e+"_wrapper"};var n=e("./constants")},{"./constants":155}],157:[function(e,t,i){function n(e){return Promise.resolve(e)}function o(e){return Promise.reject(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.mediaOrchestratorBridge=i.INTRA_AD_VIDEO_PLAYER_BUFFER=void 0;i.INTRA_AD_VIDEO_PLAYER_BUFFER=300;let s="setMinimalVideoEnded";i.mediaOrchestratorBridge={isMediaOrchestratorBridge:!0,timers:{},getCurrentlyPlayingAsset(){return window.MediaOrchestrator_V1?n(window.MediaOrchestrator_V1.getCurrentlyPlayingAsset()):o(null)},requestPlayback(e){return window.MediaOrchestrator_V1?n(window.MediaOrchestrator_V1.requestPlayback(e)):o(!1)},setMediaPlay(e,t){return t&&t.isReely&&window.ad_utils.mediaOrchestratorBridge.timers[s]&&clearTimeout(window.ad_utils.mediaOrchestratorBridge.timers[s]),window.MediaOrchestrator_V1?n(window.MediaOrchestrator_V1.setMediaPlay(e)):o(!1)},setMediaPaused(e){return window.MediaOrchestrator_V1?n(window.MediaOrchestrator_V1.setMediaPaused(e)):o(!1)},setMediaEnded(e,t){function i(){return window.MediaOrchestrator_V1?n(window.MediaOrchestrator_V1.setMediaEnded(e)):o(!1)}return t&&t.isMinimalVideo?(window.ad_utils.mediaOrchestratorBridge.timers[s]=setTimeout(i,300),Promise.resolve(!0)):i()},subscribe(e){var t;return!!e.onMediaPermissionsChanged&&(t=e.name,window.MediaOrchestrator_V1)&&window.MediaOrchestrator_V1.subscribeToNotifications(t,e.onMediaPermissionsChanged)},updateAssetFrameLocation(e,t){return window.MediaOrchestrator_V1?n(window.MediaOrchestrator_V1.updateAssetFrameLocation(e,t)):o(!1)}}},{}],158:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.initializeMediaOrchestrator=function(){"undefined"!=typeof window&&(window.mediaOrchestrator=n);(()=>{let t=[],i=!1,n=!1;window.mediaOrchestrator.subscribe(l.AD_LOADED_EVENT_NAME,function(e){t.push(e.slotName),o.every(function(e){return t.includes(e)})&&!i&&(i=!0,window.mediaOrchestrator.publish(l.PRIMARY_ADS_LOADED_EVENT_NAME,{type:"",dispatcher:"media-orchestrator",slotName:"",timestamp:Date.now()}))}),window.mediaOrchestrator.subscribe(l.NO_AD_TO_LOAD_EVENT_NAME,function(e){o.includes(e.slotName)&&!n&&(n=!0,window.mediaOrchestrator.publish(l.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME,{type:"",dispatcher:"media-orchestrator",slotName:"",timestamp:Date.now()}))})})()},i.mediaOrchestrator=void 0;var l=e("./constants"),u=(e=e("../slot-names"))&&e.__esModule?e:{default:e};let o=[u.default.INLINE20,u.default.INLINE40],n=i.mediaOrchestrator=(()=>{let o={},s={},n={},r=o.hasOwnProperty,a=s.hasOwnProperty;function d(e,t){var i;e!==l.MEDIA_PLAYBACK_EVENT_NAME||t.slotName!==u.default.INLINE20&&t.slotName!==u.default.TOP_AD||t.type!==l.AUTOPLAY_VIDEO_MAYBE_PRESENT_EVENT_TYPE?e!==l.MEDIA_PLAYBACK_EVENT_NAME||t.slotName!==u.default.INLINE20&&t.slotName!==u.default.TOP_AD||t.type!==l.LOADSTART&&t.type!==l.PLAY||(e=t.slotName,n[e]&&clearTimeout(n[e])):(e=function(e){window.mediaOrchestrator.publish(l.MEDIA_PLAYBACK_EVENT_NAME,{type:l.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE,dispatcher:"media-orchestrator",slotName:e,timestamp:Date.now()})}.bind(null,t.slotName),t=t.slotName,e=e,i=2e3,n[t]=setTimeout(e,i))}return{getEventsLogForEvent(e){return void 0!==s[e]?s[e].slice():[]},subscribe(e,t){r.call(o,e)||(o[e]=[]);let i=o[e].push(t)-1;return{remove(){delete o[e][i]}}},publish(e,t){var i,n;r.call(o,e)||(o[e]=[]),i=e,n=t,a.call(s,i)||(s[i]=[]),s[i].push(n),d(e,t),o[e].forEach(function(e){e(void 0!==t?t:{})})}}})()},{"../slot-names":169,"./constants":155}],159:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.startSlotRenderMonitoring=function(r){((e,t)=>{e=e.replace("_refresh",""),n.has(e)&&clearInterval(n[e]),t=setInterval(t,o),n.set(e,t)})(r,()=>{{var n=r,o;let e=n.replace("_refresh",""),t=e+"_responsive_wrapper",i=document.getElementById(t);if(i){let e=0,t=0;for(var s of i.children)(e=>e&&e.checkVisibility&&e.checkVisibility()&&e.getBoundingClientRect&&0<e.getBoundingClientRect().width&&0<e.getBoundingClientRect().height)(s)&&(o=new RegExp("div-gpt-ad-.*"),new RegExp(n+".*_wrapper").test(s.id)||o.test(s.id)?e++:s.classList.contains("placeholder_pattern")||t++);1<e&&(e=>{window.ue&&window.ue.count&&"function"==typeof window.ue.count&&e&&(window.ue.count("imdb:adRender:multipleVisibleAds:slotName:"+e,1),window.ue.count("imdb:adRender:multipleVisibleAds:aggregate",1))})(n),0<t&&(e=>{window.ue&&window.ue.count&&"function"==typeof window.ue.count&&e&&(window.ue.count("imdb:adRender:unexpectedVisibleElement:slotName:"+e,1),window.ue.count("imdb:adRender:unexpectedVisibleElement:aggregate",1))})(n)}}})};let n=new Map,o=1e4},{}],160:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.initializeResponsiveAdApi=function(){(0,n.initializeVideoEventsMessageListeners)(),(0,o.initializeMediaOrchestrator)()},i.responsiveAdAPI=void 0;var l=(s=e("../slot-names"))&&s.__esModule?s:{default:s},n=e("./video-events"),o=e("./media-orchestrator"),s=m(e("./getters")),r=m(e("./setters")),a=e("./constants"),d=e("./sticky-ads"),u=e("../aps-auction-manager"),c=e("./sponsor-label"),h=e("./render-monitoring");function p(e){var t,i;return"function"!=typeof WeakMap?null:(t=new WeakMap,i=new WeakMap,(p=function(e){return e?i:t})(e))}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=p(t);if(t&&t.has(e))return t.get(e);var i,n,o={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in e)"default"!==i&&{}.hasOwnProperty.call(e,i)&&((n=s?Object.getOwnPropertyDescriptor(e,i):null)&&(n.get||n.set)?Object.defineProperty(o,i,n):o[i]=e[i]);return o.default=e,t&&t.set(e,o),o}let f=i.responsiveAdAPI={adVideoAutoplayBufferInterval:1e3,hasPremiumAd:null,lastAAXResponse:null,lastAdResponse:null,plaidOverrides:null,previousWindowWidth:0,responsiveResizingDisabledSlotsMap:{},...s,...r,shouldMakeAdSticky:d.shouldMakeAdSticky,makeAdSticky:d.makeAdSticky,updateSponsoredLabel:c.updateSponsoredLabel,clearData(){this.hasPremiumAd=null,this.lastAdResponse=null,this.plaidOverrides=null,this.previousWindowWidth=0,this.responsiveResizingDisabledSlotsMap={}},clearPageStyles(){g(a.PLAID_STYLE_OVERRIDES_ID)},clearWrapBackgroundStyles(){g(a.WRAP_BACKGROUND_STYLE_TAG_ID)},collapseAd(e){"undefined"!=typeof document&&(e=document.getElementById(this.getSlotResponsiveWrapperId(e)))&&(e.style.display="none")},dangerouslySetHTML(t,i,n,o){if("undefined"!=typeof document){i=i||document.getElementById(n);if(null!==(i=((e,t)=>{let i=e;return t===f.getSlotResponsiveWrapperId(l.default.INLINE40)&&(e=document.getElementsByClassName(l.default.INLINE40_SIDEBAR)[0],t=document.getElementsByClassName(l.default.INLINE40_MAIN)[0],window.innerWidth<a.LARGE_BREAKPOINT&&t?i=t:e&&(i=e)),i})(i,n))){let e=t;f.isAPSEnabled()&&(n=((e,t)=>{let i="",n=document.getElementById(e);return n&&e!==f.getSlotResponsiveWrapperId(l.default.PROVIDER_PROMOTION)&&(e=e.replace("_responsive_wrapper",""),i=(i=(i+=(e=>{let t="",i=document.getElementById(e+"_placeholder_styles");return i&&(t+=i.outerHTML),t})(e))+((e,t)=>{let i="";return e&&(e=document.getElementById(f.getSlotPlaceholderId(t)))&&((t=e.cloneNode(!0)).style.position="absolute",t.style.removeProperty("display"),t.classList.remove("placeholder_fadeout"),i+=t.outerHTML),i})(n,e))+((e,i)=>{let n="";return e&&(e=((e,t)=>{if(!e)return null;var i=e.getElementsByTagName("div"),n=[];for(let e=0;e<i.length;e++){var o=i[e];o.id&&o.id.startsWith(t)&&n.push(o)}return n})(e,"div-gpt"))&&0<e.length&&e.forEach(e=>{var t=e.cloneNode(!0);e.id.includes("_refresh")?(u.apsAuctionManager.log("Copied google div with "+e.id),t.innerHTML="",n+=t.outerHTML):(u.apsAuctionManager.log("Trying to remove google ad slot with id "+e.id),u.apsAuctionManager.hasStartedAnApsRefreshRequest()&&((t=u.apsAuctionManager.getGoogleSlotFromApsSlotName(i))&&(googletag.destroySlots([t]),u.apsAuctionManager.log("Called destroySlots on "+e.id)),e.remove()))}),n})(n,t)),i})(n,o))&&(e=n+t);o=document.createRange();o.selectNodeContents(i),o.deleteContents(),i.appendChild(o.createContextualFragment(e))}}},events:{queues:{adIframeLoad:{},adSlotMount:{},adSlotUnmount:{}},adIframeLoad(e){this.queues.adIframeLoad[e]=!0,e=e,window.mediaOrchestrator&&window.mediaOrchestrator.publish(a.AD_LOADED_EVENT_NAME,{type:"",dispatcher:"responsive-ad-api",slotName:e,timestamp:Date.now()})},adSlotMount(e){"function"==typeof window.uet&&window.uet("bb","adSlotMount",{wb:1}),"function"==typeof this.queues.adSlotMount[e]?this.queues.adSlotMount[e]():this.queues.adSlotMount[e]=!0,"function"==typeof window.uex&&window.uex("ld","adSlotMount",{wb:1})},adSlotUnmount(e){this.queues.adSlotMount[e]=!1},video:{}},getPageType(){var e=document.head?document.head.querySelector("meta[property$='pageType']"):null;return e?e.content:""},getSubPageType(){var e=document.head?document.head.querySelector("meta[property$='subpageType'], meta[property$='subPageType']"):null;return e?e.content:""},handleAAXResponse(e){this.setLastAAXResponse(e)},shouldRunApsAuction(e){return!this.isRobotRequest(!0)&&!this.hasPremiumAd&&window.apstag&&window.googletag&&e&&0<Object.keys(e).length},appendRefreshToSlotSizes(e){let i=new Map;return e&&e instanceof Map&&Array.from(e.entries()).forEach(e=>{var[e,t]=e;i.set(e,t),i.set(e+"_refresh",t)}),i},handleAdsGraphletResponse(e,t,i){i=this.appendRefreshToSlotSizes(i);this.handleAdServiceResponse(e,void 0,t,i)},handleAdServiceResponse(e,t,i,n){var o=e&&e.slotsMap?e.slotsMap:e,i=u.apsAuctionManager.cleanApsSlotInfoMap(i);this.setLastAdResponse(e),o&&(this.shouldRunApsAuction(i)?(e=window.googletag||{},u.apsAuctionManager.apsSlotInfoMap=i,i=u.apsAuctionManager.getApsEnabledSlots(o,i),u.apsAuctionManager.log("Created potential Aps Ads for: "+Object.keys(i)),u.apsAuctionManager.runApsAuctionFlow(e,i,n),this.renderAaxAds(o,t,i)):this.renderAaxAds(o,t))},renderAaxAds(e,t,i){for(var n in e[l.default.INLINE20]&&this.clearWrapBackgroundStyles(),t&&t.shouldClearPageStyles&&this.clearPageStyles(),e)i&&i.hasOwnProperty(n)&&u.apsAuctionManager.aaxResponseIsLessValuableThanApsBid(e[n].creativeMetadata)?u.apsAuctionManager.log("Delaying render for "+n):(u.apsAuctionManager.log("Short-circuit render for "+n),this.renderAd(n,e[n])),(0,h.startSlotRenderMonitoring)(n)},isBlankAd(e){e=e?e.creativeMetadata:null;return!!e&&(this.isAdProductTypeBlank(e)||0===e.creativeHeight||-1===e.creativeHeight)},isAdProductTypeBlank(e){return!(!e||!e.adProductType||e.adProductType.name!==a.BLANK)},queueFunc(e,t,i){this.events.queues[e][t]?i():this.events.queues[e][t]=i},renderAd(n,o){if("undefined"!=typeof document&&(n!==l.default.INTERSTITIAL||!this.isBlankAd(o))&&n!==l.default.ADHESION_BOTTOM){var s=o.slotMarkup;let e=n;u.apsAuctionManager.hasStartedAnApsRefreshRequest()&&(e=n.replace("_refresh",""));var r=this.getSlotResponsiveWrapperId(e),a=document.getElementById(r),d=u.apsAuctionManager.apsSlotInfoMap[n]&&u.apsAuctionManager.apsSlotInfoMap[n].slotName;let t=()=>{},i=(a?this.setVisibility(n,o):t=this.setVisibility.bind(this,n,o),s?this.dangerouslySetHTML.bind(null,s,a,r,d):()=>{});this.queueFunc("adSlotMount",e,()=>{i(),t()})}},setVisibility(e,t){this.isBlankAd(t)?this.collapseAd(e):this.unCollapseAd(e)},triggerCustomEvent(t,i){if("undefined"!=typeof window){let e;"function"==typeof CustomEvent?e=new CustomEvent(t,{detail:i}):(e=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,i),window.dispatchEvent(e)}},toggleAutoRefreshPauseState(){var e=new CustomEvent("toggleAutoRefreshPauseState");window.top.dispatchEvent(e)},unCollapseAd(e){"undefined"!=typeof document&&(e=document.getElementById(this.getSlotResponsiveWrapperId(e)))&&"none"===e.style.display&&(e.style.display="flex")},isAPSEnabled(){return!this.isRobotRequest(!1)&&!this.hasPremiumAd&&!(!window.apstag||!window.googletag)},isRobotRequest(e){let t=!1;return!window.Cypress&&(navigator&&(t=!(!navigator.webgl&&!navigator.webdriver)),e&&f.logRobotRequestDetectionMetric(t?1:0),t)},logRobotRequestDetectionMetric(e){window.ue&&window.ue.count&&"function"==typeof window.ue.count&&window.ue.count("aps_robotic_request_detection:isRobotRequest",e)}};function g(e){"undefined"!=typeof document&&(e=document.getElementById(e))&&e.remove()}},{"../aps-auction-manager":132,"../slot-names":169,"./constants":155,"./getters":156,"./media-orchestrator":158,"./render-monitoring":159,"./setters":161,"./sponsor-label":162,"./sticky-ads":163,"./video-events":164}],161:[function(e,t,i){function n(e){return!e||0===Object.keys(e).length}Object.defineProperty(i,"__esModule",{value:!0}),i.isEmpty=n,i.setAdVideoAutoplayBufferInterval=function(e){this.adVideoAutoplayBufferInterval=e},i.setHasPremiumAd=function(e){"boolean"==typeof e&&(this.hasPremiumAd=e)},i.setLastAAXResponse=function(e){this.lastAAXResponse=e},i.setLastAdResponse=function(e){e.slotsMap&&(this.lastAdResponse={slots:e.slotsMap});this.setHasPremiumAd(e.hasPremium),this.setPlaidOverrides(e.plaidOverrides),this.setResponsiveResizingDisabledSlotsMap(e)},i.setPlaidOverrides=function(e){n(e)||(this.plaidOverrides=e,this.triggerCustomEvent("clientSidePlaidOverride",e))},i.setPreviousWindowWidth=function(){this.previousWindowWidth=window.innerWidth},i.setResponsiveResizingDisabledSlotsMap=function(e){e.slotsMap&&Object.keys(e.slotsMap).forEach(e=>{delete this.responsiveResizingDisabledSlotsMap[e]});let t=e.responsiveResizingDisabledSlotsMap;t&&Object.keys(t).forEach(e=>{this.responsiveResizingDisabledSlotsMap[e]=t[e]})}},{}],162:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.isFreeformAd=m,i.shouldUpdateSponsoredLabel=p,i.updateSponsoredLabel=h;var n=s(e("../slot-names")),o=e("./sticky-ads"),i=s(e("resize-observer-polyfill"));function s(e){return e&&e.__esModule?e:{default:e}}let r=970,a=250,d="premium-wrap",l="inline20_wrapper",u="template : IMDb Freeform Ad",c=new i.default(e=>{h(e[0].target)});function h(e){p(e)&&document.getElementById(l).classList.add(d);e=document.getElementById(n.default.INLINE20);e&&c.observe(e)}function p(e){var t,i;return!!e.id.includes(n.default.INLINE20)&&(t=(0,o.didAdSetRodeoWrap)()||(0,o.didAdSetTarnhelmWrap)(e),i=e.clientHeight>a||e.clientWidth>r,e=m(e),t||i||e)}function m(e){try{return e.contentDocument.body.innerHTML.includes(u)}catch(e){return!1}}},{"../slot-names":169,"./sticky-ads":163,"resize-observer-polyfill":119}],163:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.didAdSetRodeoWrap=T,i.didAdSetTarnhelmWrap=u,i.getRodeoWrapStyles=C,i.isStickyEnabledAdSize=p,i.isStickyEnabledAdSizeMweb=h,i.isStickyEnabledIFrame=c,i.makeAdSticky=function(e){let t=E,i=document.querySelector("."+y.PAGE_WRAPPER_CLASSNAME),n=document.getElementById(e+"_responsive_wrapper"),o=n.getBoundingClientRect().top+window.scrollY,s=e+"-"+S,r=T(),a=`#${e}_responsive_wrapper`,d=window.scrollY,l=!1,u=!1,c=r?a:"."+y.INLINE20_PAGE_BACKGROUND_CLASS,h="";r||(h="background-color: rgba(0,0,0,0.5);");function p(e){return`
            @media screen {
                .${b} ${c} {
                    position: fixed !important;
                    height: ${n.clientHeight}px;
                    top: 0;
                    left: 0;
                    right: 0;
                    z-index: 50;
                    transition: opacity ${A}s ease-in;
                    ${e?"opacity: 1 !important;":""}
                    ${h}
                }
                .${b}.${y.PAGE_WRAPPER_CLASSNAME} {
                    top: ${n.clientHeight}px;
                }
                /* P70615346 - Apply page wrapper styles to RVI widget (below page wrapper) */
                .${b}.${y.PAGE_WRAPPER_CLASSNAME} + section {
                    margin-top: ${n.clientHeight}px;
                }
            }
        `}{var m;window.generic.add_css_style(p(!0),s,"a"),r&&(e=C(),m=e.backgroundImage,m=m&&"none"!==m?m:"",e=e.backgroundColor||"",window.generic.add_css_style(`
            @media screen and (min-width: ${y.LARGE_BREAKPOINT}px) {
                .${b} #${y.WRAP_BACKGROUND_DIV_TAG_ID}, .${b} ${a} {
                    background: ${m} fixed top no-repeat ${e} !important;
                    background-position-y: -56px !important;
                }
            }
        `,s))}function f(){d=window.scrollY,l||(window.requestAnimationFrame(()=>{_(d),l=!1}),l=!0)}document.addEventListener("scroll",f);let g=document.querySelector(c);function v(){u?(g.style.opacity=0,setTimeout(function(){g.style.opacity=1,i.classList.remove(b),u=!1},w)):(g.style.opacity=1,i.classList.remove(b),u=!1)}function _(e){!u&&e>o?(g.style.opacity=0,setTimeout(function(){i.classList.add(b),u=!0},0)):u&&e<=o&&v()}_(d),t&&setTimeout(function(){window.generic.add_css_style(p(!1),s,"o"),v(),document.removeEventListener("scroll",f)},t)},i.shouldMakeAdSticky=function(e,t){try{if(e.contentWindow.shouldBlockSticky)return!1}catch(e){}if(!window.ad_utils.isResponsive())return!1;if(window.ad_utils.responsiveAdAPI.getHasPremiumAd())return!1;if(!c(e))return!1;if(u(e))return!1;return h(e,t)||p(e,t)};var y=e("./constants"),n=(i=e("../slot-names"))&&i.__esModule?i:{default:i},o=e("../is-refresh-slot");let b="fixed-wrap",s=970,r=250,a=""+s,d=""+r,A=.3,w=1e3*A,E=3e3,S="sticky-wrap-styles",l=135;function T(){var e=C();return!(!e||!(e.backgroundImage&&"none"!==e.backgroundImage||e.backgroundColor&&!["#000","#000000","rgb(0, 0, 0)","rgb(0, 0, 0, 0)","rgba(0, 0, 0, 0)"].includes(e.backgroundColor)))}function u(e){var t,i;return!!e&&(t=parseInt(e.style.width,10),i=parseInt(e.style.height,10),e.width===a)&&e.height===d&&t>s&&i>r}function C(){var e=document.getElementById(y.WRAP_BACKGROUND_DIV_TAG_ID);try{return window.getComputedStyle(e)}catch(e){return{}}}function c(e){return e.id.includes(n.default.INLINE20)&&!(0,o.isRefreshSlotIFrame)(e)}function h(e,t){e=parseInt(e.height,10)<=l;return t?(t=parseInt(t.h,10)<=l,e&&t):e}function p(e,t){var i,e=e.width.includes(a)&&e.height.includes(d);return t?(i=t.w.toString(),t=t.h.toString(),i=i.includes(a)&&t.includes(d),e&&i):e}},{"../is-refresh-slot":150,"../slot-names":169,"./constants":155}],164:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.initializeVideoEventsMessageListeners=function(){"undefined"!=typeof window&&window.addEventListener("message",n,!1)};var o=(i=e("../slot-names"))&&i.__esModule?i:{default:i},s=e("./constants");function n(e){var t,i,n;e&&e.origin!==window.origin||(e.data&&"video-handler"===e.data.dispatcher?(n=e.data,i=n.slotName,t=n.type,window.top.ad_utils.responsiveAdAPI.events.video[t]||(window.top.ad_utils.responsiveAdAPI.events.video[t]={}),window.top.ad_utils.responsiveAdAPI.events.video[t][i]={timestamp:n.timestamp},(i=(t=n).slotName)!==o.default.INLINE20&&i!==o.default.TOP_AD||(window.top.ad_utils.responsiveAdAPI&&window.top.ad_utils.responsiveAdAPI.triggerCustomEvent(s.MEDIA_PLAYBACK_EVENT_NAME,t),window.top.mediaOrchestrator&&window.top.mediaOrchestrator.publish(s.MEDIA_PLAYBACK_EVENT_NAME,t))):e.data&&"generic"===e.data.dispatcher&&(n=e.data,n.type===s.NO_AD_TO_LOAD_EVENT_NAME)&&window.top.mediaOrchestrator&&window.top.mediaOrchestrator.publish(s.NO_AD_TO_LOAD_EVENT_NAME,n))}},{"../slot-names":169,"./constants":155}],165:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=e("./responsive-ad-api/sticky-ads"),o=a(e("./base64-encode")),n=e("./is-refresh-slot"),r=a(e("./slot-names")),c=e("./responsive-ad-api/getters");function a(e){return e&&e.__esModule?e:{default:e}}let d={TOP_AD:[{width:"728px",height:"90px"}],INJECTED_BILLBOARD:[{width:"970px",height:"250px"}],TOP_RHS:[{width:"300px",height:"250px"}]},l=["ia.media-imdb.com"],u=["BTF_RHS2","BOTTOM_AD","MEDIAVIEWER_BANNER","INLINE80"],h=["MEDIAVIEWER_BANNER"],p=["INTERSTITIAL"],m=["INLINE20","INLINE40","INLINE50","INLINE60","INLINE80","INLINEBOTTOM","TOP_RHS","TOP_AD"],f="ape_",g="_placement",v="data-first-party-creative-template",_=[{p:0,t:0,def:"amzn"},{p:50,t:1,def:"iab"},{p:100,t:0,def:"groupm"}],y=["openPsAdPopover","openATCModal","setPartner","sendMetrics","wrap"];class b{constructor(){this.sfSrclessIframeSizes={},this.sfAdObjs={}}isIMDbMobileDomain(){return!!window.MAsf}getSafeframeIdPrefix(){return f}getSafeframeAdObjs(){return this.sfAdObjs}injectCode(e,t){var i=this.isIMDbMobileDomain(),n=i?"MSFClient":"SFClient";this.renderAdInSF(e,t+(i?"":"<script defer>setTimeout( function(){"+n+'.getDebugInfo({key: "updateAdDetails"}); },0);<\/script>')+("<script defer>setTimeout(function(){"+n+'.customMessage("sendMetrics",JSON.stringify({"slot": "'+e+'", "event": "fireload"}));},0);<\/script>'))}getSafeframeDiv(e){return document.getElementById(f+e+g)}fireSfReflowMetric(e){var t=this.sfSrclessIframeSizes[e],i=t.w,t=t.h,n=window.top.ad_utils.get_slot_iframe(e),o=window.top.ad_utils.get_ad_object(n);window.top.ad_utils.fire_reflow_metric(e,o,i,t,n.width.replace(/px/g,""),n.height.replace(/px/g,""))}getSfAdObject(n){if(this.sfAdObjs[n])return this.sfAdObjs[n];{let i=null;var o=window.top.ad_utils.sf_ad_details[n];if(o){let e=o.width,t=o.height;e=e&&e.replace(/px/g,""),t=t&&t.replace(/px/g,""),i={aid:o.adId,cid:o.creativeId,w:e,h:t},this.sfAdObjs[n]=i}return i}}onSfAdLoad(e){var t,i=document.getElementById(`ape_${e}_iframe`),i=(window.top.ad_utils.responsiveAdAPI.events.adIframeLoad(e),(0,s.shouldMakeAdSticky)(i)&&(0,s.makeAdSticky)(r.default.INLINE20),this.getSfAdObject(e)),n=window.top.ad_utils.get_type_of_ad(i);let o;window.top.ad_utils&&window.top.ad_utils.ad_table&&(t=window.top.ad_utils.ad_table[e])&&(t.fired=!0,t.loaded=!0),null===i||"blank"!==i.scope&&"null"!==i.scope||(t=this.sfSrclessIframeSizes[e],o="0"===t.w&&"0"===t.h?0:window.generic.monitoring.get_metric_value(e,"reflow")),window.top.ad_utils.slot_events.trigger(e,"load",{duration:o,type:n})}updateAdDetails(e){e&&e.creativeId&&(window.top.ad_utils.sf_ad_details[e.slot]={},window.top.ad_utils.sf_ad_details[e.slot].creativeId=e.creativeId,window.top.ad_utils.sf_ad_details[e.slot].adId=e.adId,window.top.ad_utils.sf_ad_details[e.slot].width=e.width,window.top.ad_utils.sf_ad_details[e.slot].height=e.height)}setPartner(e){e=JSON.parse(e);e&&e.slot&&e.partner&&top&&top.generic&&top.generic.monitoring&&top.generic.monitoring.set_partner&&top.generic.monitoring.set_partner_by_slot(e.slot,e.partner)}isThirdPartyAd(e){return e&&!e.hasAttribute(v)}isSafeframeSlot(e,t){var i=this.isIMDbMobileDomain(),i=e&&-1<(i?h:u).indexOf(e.toUpperCase());return!(e&&-1<p.indexOf(e.toUpperCase()))&&(i||this.isConditionalSafeframeSlot(e,t))}isConditionalSafeframeSlot(e,t){return e&&(-1<m.indexOf(e.toUpperCase())||(0,n.isRefreshSlotIFrame)(t)||(0,n.isRefreshSlotName)(e))&&this.isThirdPartyAd(t)}getRawSlotName(e){let t=e;return t=e&&0===e.indexOf(this.getSafeframeIdPrefix())?e.slice(4,e.length-7):t}renderAdInSF(i,n){var o=document.getElementById(i);if(null!==o){var s=o.parentElement,r=o.getAttribute("data-original-width"),a=o.getAttribute("data-original-height"),n=(this.sfSrclessIframeSizes[i]={w:r,h:a},this.createAdDetailsObject(i,o,n));let e=s.getElementsByClassName("sponsored_label"),t=null;0<(e=0===e.length?s.getElementsByClassName("standard_sponsored_label"):e).length&&(t=e[0],s.removeChild(t)),s.removeChild(o);var o=document.createElement("div"),d=f+i+g,d=(o.setAttribute("name",d),o.setAttribute("id",d),this.isIMDbMobileDomain()),l=(d&&(l=document.createElement("div"),s.parentElement.replaceChild(l,s),l.appendChild(s),u=s.id,l.id=u,s.id="ape_"+u),d?s:o),u=(l.setAttribute("data-ad-details",JSON.stringify(n)),l.setAttribute("class","text/x-dacx-safeframe"),l.style.width=r+"px",l.style.height=a+"px",l.style.margin="0 auto",l.style.display="block",document.getElementById((0,c.getSlotPlaceholderId)(i.toLowerCase())));switch(u&&(o.style.position="relative",o.classList.add("rendered_ad_tweening")),s.appendChild(o),t&&(s.appendChild(t),s.style.width=r+"px",s.style.height=a+"px"),window.generic&&window.generic.monitoring&&((n=window.generic.monitoring.get_partner(i))&&"none"!==n||window.generic.monitoring.set_partner_by_slot(i,"3P")),i){case"injected_billboard":s.className=(s.className?s.className+" ":"")+"billboard";break;case"top_ad":window.top.ad_utils.expand_top_banner()}(d?window.MAsf:window.DAsf).loadAds(),u&&(o.classList.add("ad_fadein"),o.childNodes)&&0<o.childNodes.length&&o.childNodes[0].classList.add("ad_fadein"),window.csm&&window.top.ad_utils.fire_tagdeliver_metric&&(l=window.csm.duration(),window.top.ad_utils.fire_tagdeliver_metric(i,l)),window.ad_size_cookie&&window.ad_size_cookie.store()}}createAdDetailsObject(e,t,i){var n={},i=(n.slot=t.id,n.slotName=t.id,n.arid=t.id,n.htmlContentEncoded=(0,o.default)(i),n.serverSideFetchAd="true",n.loadAfter="",n.slot.toUpperCase()in d?n.allowedSizes=d[n.slot.toUpperCase()]:n.allowedSizes=[],n.allowedDomains=l,n.iframeClass=t.getAttribute("class"),n.iframeExtraStyle=t.getAttribute("style")||"",{}),t=(i.width=t.getAttribute("width")+"px",i.height=t.getAttribute("height")+"px",n.size=i,(i=t)&&(i.hasAttribute(v)||i.parentElement.hasAttribute(v))?n.viewabilityStandards=_:n.viewabilityStandards=[],n.aaxInstrPixelUrl=window.top.ad_utils.aax_instr_pixel_url[n.slot.toUpperCase()],window.top.ad_utils.aax_imp_pixel_url[n.slot.toUpperCase()]),i=(t&&(n.aaxImpPixelUrl=t),window.top.ad_utils.paets_loaded_pixel_url[n.slot.toUpperCase()]);return i&&(n.paetsLoadedPixelUrl=i),n.allowlistedCustomMessageEvents=y,n.allowlistedQueryParamKeys=[],n.adCreativeMetaData={adCreativeTemplateName:"IMDb"},n}}i.default=new b},{"./base64-encode":136,"./is-refresh-slot":150,"./responsive-ad-api/getters":156,"./responsive-ad-api/sticky-ads":163,"./slot-names":169}],166:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.centerAd=function(e){e=(0,s.getSlotWrapper)(e);e&&e.style&&(e.style.marginLeft="auto",e.style.marginRight="auto")},i.mobileWebCreativeResizing=function(e,t,i){var n=(0,s.getSlotName)(e);{var o;"top_ad"!==n.toLowerCase()&&0<=i&&0<=t?(o=640*(t=i/t),t=100*t,n&&((n=(0,s.getSlotWrapper)(e)).className+=` standard_expand_ad_slot_wrapper orientation_${n.id}}`,(0,s.getSlot)(e).className+=" standard_expand_ad_slot_iframe",o=`
                @media only screen and (min-width : 641px) {
                    .orientation_${n.id} {
                        width: 640px;
                        height: ${o}px;
                    }
                }

                @media only screen and (min-width : 640px) {
                    .orientation_${n.id} {
                        width: 100vw;
                        height: ${t}vw;
                    }
                }

                .sponsored_label {
                    padding-right: 5%;
                }
            `,e.top.generic.add_css_style(o,"expand-1p-ads"))):((0,s.getSlotWrapper)(e).setAttribute("style",`height: ${i}px; display: block;`),(0,s.getSlot)(e).setAttribute("style",`height: ${i}px;`))}},i.removeWrapperSize=function(e){(e=>{e&&(e.style.removeProperty("width"),e.style.removeProperty("height"))})((0,s.getSlotWrapper)(e))},i.resizeWrapperWithOverflowHidden=function(e,t,i){var n=top.document.getElementById("wrapper");n&&(n.style.overflowX="hidden");n=(0,s.getSlotWrapper)(e);n&&(n.style.margin="auto");l(n,t,i)},i.scaleIframeToWidth=r,i.scaleTarnhelm=function(e,t,i,n){var o=(()=>window.screen&&window.screen.width&&window.screen.height&&void 0!==window.orientation?"portrait"==(90===window.orientation||-90===window.orientation?"landscape":"portrait")?Math.min(window.screen.width,window.screen.height):Math.max(window.screen.width,window.screen.height):window.innerWidth)();r(e,o,i,n),a(e,o,i,n),d(e,t,o)},i.scaleTarnhelmAd=d,i.scaleWrapperToWidth=a,i.setupContainer=l;var s=e("./slot-util");function o(e,t,i,n){e&&(e.style.height=""+i+n,e.style.width=""+t+n,e.setAttribute("data-resizeElement",""+t+n+"|"+i+n))}function r(e,t,i,n){i=Math.floor(t/i*n);e&&e.frameElement&&(e.frameElement.height=i,e.frameElement.width=t),e&&e.document&&e.document.ad&&(e.document.ad.h=i,e.document.ad.w=t),o(e.frameElement,t,i,"px")}function a(e,t,i,n){i=Math.floor(t/i*n);o((0,s.getSlotWrapper)(e),t,i,"px")}function d(e,t,i){let n={actionName:"scale-ad-to-width",adName:t,data:{width:i}};setTimeout(function(){e.top.Tarnhelm&&window.top.Tarnhelm.triggerGlobalAction&&e.top.Tarnhelm.triggerGlobalAction(n)},0)}function l(e,t,i){e&&(e.style.position="relative",e.style.overflow="visible",o(e,t,i,"px"))}},{"./slot-util":170}],167:[function(e,t,i){function n(e){return e&&document.location.href.startsWith("https://"+e)}Object.defineProperty(i,"__esModule",{value:!0}),i.getBrowserWidth=function(e){return e.top.document.body.clientWidth},i.isDesktop=function(){return n("www.")},i.isInternetExplorer=function(){var e=(()=>{var e=window.navigator.userAgent,t=e.indexOf("MSIE");return 0<t?parseInt(e.substring(t+5,e.indexOf(".",t))):e.match(/Trident\/7\./)?11:0})();return 0<e&&e<=11},i.isIpad=function(){var e=navigator.userAgent.toLowerCase();return-1<e.indexOf("ipad")||-1<e.indexOf("macintosh")&&"ontouchend"in document},i.isMobile=function(){return n("m.")},i.isSubdomain=n},{}],168:[function(e,t,i){var o;(o=window).imdbads=o.imdbads||{},o.imdbads.SlotManager=(()=>{let i={},n;return{registerSlot:function(e,t){i[e]=t,"rhs"===e&&(t.getClickTracker&&(o.top.getClickTracker=t.getClickTracker),t.uatu)&&(n=t.uatu)},getDefaultUatu:function(){return n},getSlotData:function(e){return i[e]},getSlotClickTracker:function(e,t){return i[e]&&"function"==typeof i[e].getClickTracker?i[e].getClickTracker(t):""},getAllSlotData:function(){return i}}})()},{}],169:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.TOP_AD_SLOT_NAME=i.SIS_PIXEL_SLOT_NAME=i.PROVIDER_PROMOTION_NAME=i.PROMOTED_WATCH_BAR_NAME=i.MEDIAVIEWER_BANNER_SLOT_NAME=i.INTERSTITIAL_SLOT_NAME=i.INLINEBOTTOM_SLOT_NAME=i.INLINE80_SLOT_NAME=i.INLINE60_SLOT_NAME=i.INLINE50_SLOT_NAME=i.INLINE40_SLOT_NAME=i.INLINE40_SIDEBAR=i.INLINE40_MAIN=i.INLINE20_SLOT_NAME=i.ADHESION_BOTTOM_SLOT_NAME=void 0;i.INLINE20_SLOT_NAME="inline20",i.INLINE40_SLOT_NAME="inline40",i.INLINE40_MAIN="inline40-responsive-main",i.INLINE40_SIDEBAR="inline40-responsive-sidebar",i.INLINE50_SLOT_NAME="inline50",i.INLINE60_SLOT_NAME="inline60",i.INLINE80_SLOT_NAME="inline80",i.INLINEBOTTOM_SLOT_NAME="inlinebottom",i.INTERSTITIAL_SLOT_NAME="interstitial",i.MEDIAVIEWER_BANNER_SLOT_NAME="mediaviewer_banner",i.PROVIDER_PROMOTION_NAME="provider_promotion",i.PROMOTED_WATCH_BAR_NAME="promoted_watch_bar",i.SIS_PIXEL_SLOT_NAME="sis_pixel",i.TOP_AD_SLOT_NAME="top_ad",i.ADHESION_BOTTOM_SLOT_NAME="adhesion_bottom",i.default={INLINE20:"inline20",INLINE40:"inline40",INLINE40_MAIN:"inline40-responsive-main",INLINE40_SIDEBAR:"inline40-responsive-sidebar",INLINE50:"inline50",INLINE60:"inline60",INLINE80:"inline80",INLINEBOTTOM:"inlinebottom",INTERSTITIAL:"interstitial",MEDIAVIEWER_BANNER:"mediaviewer_banner",PROVIDER_PROMOTION:"provider_promotion",PROMOTED_WATCH_BAR:"promoted_watch_bar",SIS_PIXEL:"sis_pixel",TOP_AD:"top_ad",ADHESION_BOTTOM:"adhesion_bottom"}},{}],170:[function(e,t,i){function n(e){return e.frameElement&&e.frameElement.id?e.frameElement.id:"unknown"}function o(e){return n(e)+"_wrapper"}function s(e,t){return e.top.document.getElementById(t)}function r(e,t){return n(e)===t}Object.defineProperty(i,"__esModule",{value:!0}),i.getSlot=function(e){return s(e,n(e))},i.getSlotName=n,i.getSlotWrapper=function(e){return s(e,o(e))},i.getSlotWrapperName=o,i.isInline40=function(e){return r(e,"inline40")},i.isSlot=r},{}],171:[function(e,t,i){function s(e,t){if(e){var i=e.actions;if(i&&i.click&&0<i.click.length)for(var n of i.click)if("open-default-link"===n.actionName)return void function e(t){if(t)if("IMG"===t.tagName||"SPAN"===t.tagName||"P"===t.tagName||"VIDEO"===t.tagName||"DIV"===t.tagName&&0===t.childElementCount)t.classList.add("mrc-btr-creative");else for(var i of t.children)e(i)}(t.querySelector(`[name=${e.name}]`));if(e.children)for(var o of e.children)s(o,t)}}Object.defineProperty(i,"__esModule",{value:!0}),i.tarnhelmAdUtils=void 0;i.tarnhelmAdUtils={markTarnhelmAdForMRC(e,t){s(e,t)}}},{}],172:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.handleTarnhelmBackupImg=function(e){var t=e.tarnhelm_backup||{},i=t.appData||{},n=t.adName||void 0,o=t.trackingConsumer||void 0,s=t.pageBind||!1,r=t.scaleToFull&&(!i.isScalable||(0,b.isMobile)())||!1,a=t.clickThrough||"",d=t.target||"_blank",l=t.responsiveImage||"",u=t.legacyImage||"",c=t.renderWidth||0,h=t.renderHeight||0,p=t.size||"0x0",t=t.resizeWrapperWithOverflowHidden||!1,m=(0,f.shouldShowBackupSupplierResponsive)(e),n=(0,g.showTarnhelmAdCallback)(e,n,i,o,s,r,c,h,l,p,t),i=(0,v.responsiveImageGenerator)(l,u,a,d,c,h,p);o=(0,g.showBackupImageTarnhelmResponsiveCallback)(e,l,u,c,h,p);(0,y.bindBackupImage)(e,m,n,i,function(){"collapsed"!==e.tarnhelm_backup.adState&&((0,_.collapseAd)(e.frameElement),e.tarnhelm_backup.adState="collapsed")},o)};var f=e("./backup-util"),g=e("./tarnhlem-backup-callbacks"),v=e("./img-generator"),_=e("./ad-visibility-util"),y=e("./backup-img"),b=e("./site-util")},{"./ad-visibility-util":121,"./backup-img":134,"./backup-util":135,"./img-generator":148,"./site-util":167,"./tarnhlem-backup-callbacks":173}],173:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getAppNode=m,i.showBackupImageTarnhelmCallback=a,i.showBackupImageTarnhelmResponsiveCallback=function(t,i,e,n,o,s){return function(e){t&&t.tarnhelm_backup&&"backup"!==t.tarnhelm_backup.adState&&(a(t,e),e=(0,r.getSize)(i,n,o,s),(0,c.scaleIframeToWidth)(t,e.width,e.width,e.height),(0,c.scaleWrapperToWidth)(t,e.width,e.width,e.height),(0,c.centerAd)(t),t.tarnhelm_backup.adState="backup")}},i.showTarnhelmAdCallback=function(e,t,i,n,o,s,r,a,d,l,u){return function(){e&&e.tarnhelm_backup&&"ad"!==e.tarnhelm_backup.adState&&((0,h.uncollapseAd)(e.frameElement),s?((0,c.scaleTarnhelm)(e,t,r,a),(0,p.default)(e)&&setTimeout(function(){(0,c.scaleTarnhelm)(e,t,r,a)},1)):u?(0,c.resizeWrapperWithOverflowHidden)(e,r,a):(0,c.scaleWrapperToWidth)(e,r,r,a),e.top&&e.top.Tarnhelm&&(e.top.Tarnhelm.initAdInstance(m(e),e.frameElement,i,n),o)&&!e.top.Tarnhelm.pageLoadBound&&(e.top.addEventListener("load",function(){parent.Tarnhelm.triggerGlobalAction({actionName:"trigger-action-collection",collectionName:"pageLoad"})}),e.top.Tarnhelm.pageLoadBound=!0),e.tarnhelm_backup.adState="ad")}};var c=e("./scale"),h=e("./ad-visibility-util"),r=e("./img-generator"),p=(i=e("./is-responsive"))&&i.__esModule?i:{default:i};function m(e){return e.document.querySelector(".app")}function a(e,t){m(e).innerHTML=t}},{"./ad-visibility-util":121,"./img-generator":148,"./is-responsive":151,"./scale":166}],174:[function(e,t,i){document.getElementsByTagName("html")[0].className+=" scriptsOn"},{}],175:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.makeAdsGraphletCall=async function(t,e,i,n,o,s,r){if(r&&t&&e&&i){var r=Date.now(),a=window.ad_utils.constructCurrentSlotSizeMap(n,o,window.innerWidth);try{window.AdSlotsLoading=!0;var d=await fetch(t,{method:"POST",headers:(0,m.getZukoHeaders)(),body:(0,m.getRequestBody)(e,i,n,o),credentials:"include"}),l=d.status;if((0,m.logMetric)(b+l,1),200===l){var u,c,h=await d.json();if(!h.errors&&h.data)return u=h.data.webAds,c=(0,m.transformWebAdsOutput)(u),p.responsiveAdAPI.handleAdsGraphletResponse(c,s,a),window.AdSlots={...window.AdSlots,...c.slotsMap},(window.AdSlotsLoading=!1,m.logMetric)(y,Date.now()-r),void(0,m.logMetric)(v,1,Date.now()-r)}}catch(e){t=(0,m.getEmptyAdSlots)(n);window.AdSlots={...window.AdSlots,...t},window.mediaOrchestrator&&Object.keys(o).forEach(function(e){window.mediaOrchestrator.publish(f.NO_AD_TO_LOAD_EVENT_NAME,{slotName:e,timestamp:Date.now(),type:"",dispatcher:"adsGraphlet request"})}),p.responsiveAdAPI.handleAdsGraphletResponse(t,s,a)}(window.AdSlotsLoading=!1,m.logMetric)(_,1)}else(0,m.logMetric)(g,1),window.AdSlotsLoading=!1};var p=e("../responsive-ad-api/responsive-ad-api"),m=e("./httpZukoCallUtils"),f=e("../responsive-ad-api/constants");let g="noOp",v="success",_="failure",y="latency",b="statusCode."},{"../responsive-ad-api/constants":155,"../responsive-ad-api/responsive-ad-api":160,"./httpZukoCallUtils":176}],176:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.SESSION_ID_HEADER_NAME=i.SESSION_ID_COOKIE_NAME=i.FREEDONIA_HEADER_NAME=i.FREEDONIA_COOKIE_NAME=i.DEFAULT_HEADERS=i.CONSENT_INFO_HEADER_NAME=i.CONSENT_INFO_COOKIE_NAME=i.CLIENT_NAME_HEADER_NAME=i.CLIENT_NAME=void 0,i.getCookieValue=g,i.getEmptyAdSlots=function(e){if(!e||"string"!=typeof e||e.length<1)return{};let t={};return e.split(",").forEach(e=>{t[e]={creativeMetadata:{creativeWidth:0,creativeHeight:0,adProductType:{grade:"standard",name:"blank",symbol:"blk"}},adFeedbackUrl:"",slotMarkup:""}}),t},i.getRequestBody=function(e,t,i,n){t?.input?.webAdTargetingParameters&&(t.input.webAdTargetingParameters.slotSizeMap=f(i,n));return JSON.stringify({query:s(e),variables:t,extensions:{}})},i.getZukoHeaders=function(){let e=r,t=g(a),i=g(d),n=g(l);e[p]=m,t&&(e[u]=t);i&&(e[c]=i);n&&(e[h]=n);return e},i.logMetric=function(e,t){window.ue&&window.ue.count&&"function"==typeof window.ue.count&&window.ue.count(n+e,t)},i.sanitizeQuery=s,i.transformSlotSizeMap=f,i.transformSlots=o,i.transformWebAdsOutput=function(e){if(!e||!e.slots||0===e.slots.length)return{};let t=e.responsiveResizingDisabledSlots,i=[];t&&Array.isArray(t)&&0<t.length&&(i=t.reduce((e,t)=>({...e,[t.name]:t}),{}));var n=e.isRefreshRequest;return{slotsMap:o(e.slots,n),hasPremium:e.hasPremiumAd,plaidOverrides:void 0,responsiveSizingDisabledSlotsMap:i}};let n="AdAJAX.Zuko.WebAds.";function o(e,o){return e.reduce((t,i)=>{var n=i.creativeInfo;if(n){let e=n.adProductType;return e=e||{grade:"standard",name:"unknown",symbol:"unk"},{...t,[o?i.name+"_refresh":i.name]:{creativeMetadata:{creativeWidth:n.size.width,creativeHeight:n.size.height,aaxAdType:n.aaxAdType,adProductType:e},adFeedbackUrl:i.adFeedbackUrl,slotMarkup:n.slotMarkup}}}return t},{})}function s(e){return e&&0!==e.length?e.replaceAll("\n",""):e}let r=i.DEFAULT_HEADERS={"Content-Type":"application/json"},a=i.FREEDONIA_COOKIE_NAME="zo",d=i.CONSENT_INFO_COOKIE_NAME="ci",l=i.SESSION_ID_COOKIE_NAME="session-id",u=i.FREEDONIA_HEADER_NAME="x-imdb-adsystem-overrides",c=i.CONSENT_INFO_HEADER_NAME="x-imdb-consent-info",h=i.SESSION_ID_HEADER_NAME="x-amzn-sessionid",p=i.CLIENT_NAME_HEADER_NAME="x-imdb-client-name",m=i.CLIENT_NAME="imdb-ads-graphlet";function f(e,n){let o=window.innerWidth;return e.split(",").reduce((e,t)=>{var i=n[t];if(i){var i=Object.entries(i).find(e=>{var[e]=e;return Number(e)>=o});if(i&&2===i.length)i=i[1].split("x"),e.push({name:t,width:Number(i[0]),height:Number(i[1])})}return e},[])}function g(t){var e;return t&&0!==t.length&&document?.cookie&&(e=document.cookie.split(";").map(e=>e.trim().split("=")).find(e=>{var[e]=e;return e===t}))?e.at(1):void 0}},{}]},{},[139]);